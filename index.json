[{"categories":null,"contents":"Instalación pila LAMP en Debian 12 Si estás utilizando Debian 12, sigue los pasos a continuación para instalar un servidor web LAMP completo en Debian GNU/Linux 12 \u0026ldquo;Bookworm\u0026rdquo; (Stable). Ten en cuenta que Debian 12 incluye PHP 8.2 en sus repositorios, lo que puede ser diferente de versiones anteriores de Debian.\nInstalación del servidor web Lo primero en un servidor LAMP es la \u0026ldquo;A\u0026rdquo; de Apache. Para instalar Apache, ejecuta los siguientes comandos:\njaviercruces@IWEB:~$ sudo apt install apache2 javiercruces@IWEB:~$ sudo systemctl enable apache2 \u0026amp;\u0026amp; sudo systemctl start apache2 Con estos comandos, habrás instalado y activado el servidor web Apache. Puedes verificarlo escribiendo la IP del servidor en tu navegador favorito y debería mostrarte la página de inicio de Apache por defecto.\nInstalación de PHP Por lo general, necesitarás instalar algunos paquetes específicos para PHP, llamados modulos en funcion de la base de datos que utilices. Puedes instalarlos con el siguiente comando:\njaviercruces@IWEB:~$ sudo apt install php8.2 libapache2-mod-php8.2 php8.2-mysql Si instalas CMS como WordPress, Moodle o Prestashop en tu servidor, es posible que te pidan paquetes adicionales para su correcto funcionamiento. Estas aplicaciones suelen indicar claramente qué paquetes necesitas instalar.\nPara que Apache aplique los cambios y active PHP, reinicia el servicio con el siguiente comando:\njaviercruces@IWEB:~$ sudo systemctl restart apache2 Instalación y configuración de MariaDB Puedes usar indistintamente MariaDB o Mysql , en mi caso usare MariaDB :\njaviercruces@IWEB:~$ sudo apt install mariadb-server javiercruces@IWEB:~$ sudo systemctl enable mysql \u0026amp;\u0026amp; sudo systemctl start mysql Durante la instalación, se te pedirá establecer una contraseña para el usuario root de MySQL. Una vez que haya finalizado la instalación, ejecuta el siguiente comando para asegurar tu instalación de MariaDB:\njaviercruces@IWEB:~$ sudo mysql_secure_installation Sigue las instrucciones para asegurar tu instalación de MariaDB, como configurar la contraseña del usuario root y eliminar usuarios anónimos y bases de datos de prueba.\nDespués de completar estos pasos, habrás configurado MariaDB y podrás conectarte a través de la terminal:\njaviercruces@IWEB:~$ sudo mysql -u root -p Enter password: Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 32 Server version: 10.11.4-MariaDB-1~deb12u1 Debian 12 Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others. Type \u0026#39;help;\u0026#39; or \u0026#39;\\h\u0026#39; for help. Type \u0026#39;\\c\u0026#39; to clear the current input statement. MariaDB [(none)]\u0026gt; Con esto ya tendrías instalada la pila LAMP en debian 12\n","date":"October 28, 2023","hero":"/images/iweb/lamp/portada_lamp.png","permalink":"http://www.javiercd.es/posts/iaw/lamp/lamp/","summary":"Instalación pila LAMP en Debian 12 Si estás utilizando Debian 12, sigue los pasos a continuación para instalar un servidor web LAMP completo en Debian GNU/Linux 12 \u0026ldquo;Bookworm\u0026rdquo; (Stable). Ten en cuenta que Debian 12 incluye PHP 8.2 en sus repositorios, lo que puede ser diferente de versiones anteriores de Debian.\nInstalación del servidor web Lo primero en un servidor LAMP es la \u0026ldquo;A\u0026rdquo; de Apache. Para instalar Apache, ejecuta los siguientes comandos:","tags":["WordPress","CMS","IWEB","AW","debian","LAMP"],"title":"Instalación pila LAMP en debian 12"},{"categories":null,"contents":"Instalación pila LEMP en debian 12 con PHP-8 En esta guía, te explicare los pasos necesarios para instalar una pila LEMP (Linux, Nginx, MariaDB y PHP) en un servidor con Debian 12. La configuración incluirá PHP 8.2 como versión principal. La pila LEMP es esencial para alojar sitios web y aplicaciones web basadas en PHP, como WordPress u otras aplicaciones dinámicas. Sigue los pasos detallados a continuación para configurar tu servidor LEMP con PHP 8.2.\nRequisitos previos Antes de comenzar, asegúrate de que cumples con los siguientes requisitos:\nUn servidor Linux. Un usuario no root con privilegios sudo. Un nombre de dominio completo que apunte al servidor. Primero, actualiza y actualiza los paquetes del sistema:\njaviercruces@IWEB:~$ sudo apt update \u0026amp;\u0026amp; sudo apt upgrade Además, asegúrate de que los siguientes paquetes estén instalados en tu sistema , ya que los utilizaremos mas adelante :\njaviercruces@IWEB:~$ sudo apt install wget nano unzip tar -y Instalación PHP Debian 12 incluye PHP 8.2 por defecto. Puedes instalarlo ejecutando el siguiente comando:\njaviercruces@IWEB:~$ sudo apt install php-fpm php-cli php-mysql php-mbstring php-xml php-gd Hemos instalado las extensiones MySQL, CLI, GD, Mbstring y XML de PHP. Puedes instalar cualquier extensión adicional según tus necesidades. Para verificar la instalación de PHP, puedes ejecutar:\njaviercruces@IWEB:~$ php --version PHP 8.2.7 (cli) (built: Jun 9 2023 19:37:27) (NTS) Copyright (c) The PHP Group Zend Engine v4.2.7, Copyright (c) Zend Technologies with Zend OPcache v8.2.7, Copyright (c), by Zend Technologies javiercruces@IWEB:~$ Instalación MariaDB Puedes usar indistintamente MariaDB o Mysql , en mi caso usare MariaDB :\njaviercruces@IWEB:~$ sudo apt install mariadb-server javiercruces@IWEB:~$ sudo systemctl enable mysql \u0026amp;\u0026amp; sudo systemctl start mysql Durante la instalación, se te pedirá establecer una contraseña para el usuario root de MySQL. Una vez que haya finalizado la instalación, ejecuta el siguiente comando para asegurar tu instalación de MariaDB:\njaviercruces@IWEB:~$ sudo mysql_secure_installation Sigue las instrucciones para asegurar tu instalación de MariaDB, como configurar la contraseña del usuario root y eliminar usuarios anónimos y bases de datos de prueba.\nDespués de completar estos pasos, habrás configurado MariaDB y podrás conectarte a través de la terminal .\nSi te has saltado lanzar el script de la instalación segura , el usuario root de la base de datos no tiene contraseña asi que pulsa espacio para iniciar sesión una vez lanzado el comando .\njaviercruces@IWEB:~$ sudo mysql -u root -p Enter password: Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 32 Server version: 10.11.4-MariaDB-1~deb12u1 Debian 12 Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others. Type \u0026#39;help;\u0026#39; or \u0026#39;\\h\u0026#39; for help. Type \u0026#39;\\c\u0026#39; to clear the current input statement. MariaDB [(none)]\u0026gt; Instalar Nginx Primero, asegurémonos de que Nginx esté instalado en tu servidor:\njaviercruces@IWEB:~$ sudo apt install nginx Una vez que Nginx esté instalado, procederemos a configurar un socket TCP para trabajar con PHP-FPM.\nAbre el archivo de configuración de PHP-FPM para realizar la configuración necesaria:\njaviercruces@IWEB:~$ sudo nano /etc/php/8.2/fpm/pool.d/www.conf Dentro del archivo, busca la sección que define la dirección en la que PHP-FPM acepta solicitudes FastCGI.\nComenta la línea que comienza con listen y reemplázala por la siguiente línea para configurar un socket TCP en la dirección 127.0.0.1 y el puerto 9000:\n; The address on which to accept FastCGI requests. ; Valid syntaxes are: ; \u0026#39;ip.add.re.ss:port\u0026#39; - to listen on a TCP socket to a specific IPv4 address on ; a specific port; ; \u0026#39;[ip:6:addr:ess]:port\u0026#39; - to listen on a TCP socket to a specific IPv6 address on ; a specific port; ; \u0026#39;port\u0026#39; - to listen on a TCP socket to all addresses ; (IPv6 and IPv4-mapped) on a specific port; ; \u0026#39;/path/to/unix/socket\u0026#39; - to listen on a Unix socket. ; Note: This value is mandatory. ;listen = /run/php/php8.2-fpm.sock --\u0026gt; Comenta esta linea listen = 127.0.0.1:9000 Guarda los cambios y cierra el archivo.\nAhora vamos a editar la configuración del sitio virtual por defecto para hacerlo funcionar con fpm .\nPara lograrlo, vamos a modificar el contenido dentro de la sección location en la configuración del servidor. Aquí te proporciono un ejemplo de archivo de configuración que puedes utilizar:\nserver { listen 80 default_server; listen [::]:80 default_server; root /var/www/html; index index.html index.php index.htm index.nginx-debian.html ; server_name _; location / { try_files $uri $uri/ =404; } location ~ \\.php$ { include snippets/fastcgi-php.conf; fastcgi_pass 127.0.0.1:9000; #fastcgi_pass unix:/var/run/php/php8.2-fpm.sock; # fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } } Ahora vamos a reiniciar los servicios tanto de php como de Nginx para asegurar de que sea aplicado la configuración , pero primero vamos a comprobar si tienes errores de sintais en ambos ficheros .\nPara comprobar errores de sintaxis en Nginx :\njaviercruces@IWEB:~$ sudo nginx -t nginx: the configuration file /etc/nginx/nginx.conf syntax is ok nginx: configuration file /etc/nginx/nginx.conf test is successful Si la salida es correcta continua comprobando si has cometido errores de sintaxis en la configuración de PHP-FPM :\njaviercruces@IWEB:~$ sudo php-fpm8.2 -t [02-Nov-2023 17:33:02] NOTICE: configuration file /etc/php/8.2/fpm/php-fpm.conf test is successful Una vez las dos salidas de estos comandos no contienen errores , vamos a reiniciar ambos servicios para que se aplique la configuración :\njaviercruces@IWEB:/etc/nginx$ sudo systemctl restart php8.2-fpm nginx.service Comprobación de funcionamiento Para asegurarnos de que el servidor está funcionando correctamente con PHP-FPM, vamos a crear un archivo llamado info.php que mostrará información sobre la configuración de PHP en el servidor. A continuación, te mostraré cómo crear el archivo:\njaviercruces@IWEB:~$ sudo nano /var/www/html/info.php Dentro del archivo info.php, agrega el siguiente contenido:\n\u0026lt;?php phpinfo(); ?\u0026gt; Guarda y cierra el archivo\nEste archivo PHP mostrará información detallada sobre la configuración de PHP en tu servidor. Puedes acceder a él en tu navegador visitando http://tudominio.com/info.php (reemplaza tudominio.com con tu nombre de dominio real) o también puedes acceder al mismo poniendo en el navegador la IP de tu maquina.\nUna vez hecho esto , ya tienes instalado la pila LEMP para que la utilices en tus CMS.\n","date":"October 28, 2023","hero":"/images/iweb/lamp/portada_lemp.png","permalink":"http://www.javiercd.es/posts/iaw/lemp/lemp/","summary":"Instalación pila LEMP en debian 12 con PHP-8 En esta guía, te explicare los pasos necesarios para instalar una pila LEMP (Linux, Nginx, MariaDB y PHP) en un servidor con Debian 12. La configuración incluirá PHP 8.2 como versión principal. La pila LEMP es esencial para alojar sitios web y aplicaciones web basadas en PHP, como WordPress u otras aplicaciones dinámicas. Sigue los pasos detallados a continuación para configurar tu servidor LEMP con PHP 8.","tags":["WordPress","CMS","IWEB","AW","debian","LEMP"],"title":"Instalación pila LEMP en debian 12 con PHP-8"},{"categories":null,"contents":"Instalación WordPress en Debian 12 con pila LAMP PHP-8 WordPress es un sistema de gestión de contenidos (CMS, por sus siglas en inglés) de código abierto muy popular que se utiliza para crear y administrar sitios web y blogs. Fue lanzado por primera vez en 2003 y desde entonces ha ganado una amplia base de usuarios y una comunidad activa de desarrolladores y diseñadores.\nPreparación Antes de empezar con la instalación de WordPress vamos a dejar claro en una lista cual es el ecosistema de nuestro servidor para que todo funcione correctamente:\nServidor LAMP completo: Apache + MySQL -o MariaDB- y PHP 8.x. Configurado un Virtualhost para nuestro dominio. Creación de base de datos con usuario. Si no tienes instalado la pila LAMP sigue puedes hacerlo en este enlace.\nCreación del virtualhost Copiamos el archivo de configuración predeterminado de Apache y lo renombramos a wordpress.conf\njaviercruces@IWEB:/etc/apache2/sites-available$ sudo cp 000-default.conf wordpress.conf Configuramos el sitio virtual , recuerda cambiar el ServerName y DocumentRoot\n\u0026lt;VirtualHost *:80\u0026gt; # The ServerName directive sets the request scheme, hostname and port that # the server uses to identify itself. This is used when creating # redirection URLs. In the context of virtual hosts, the ServerName # specifies what hostname must appear in the request\u0026#39;s Host: header to # match this virtual host. For the default virtual host (this file) this # value is not decisive as it is used as a last resort host regardless. # However, you must set it for any further virtual host explicitly. ServerName wordpress.fjcd.es ServerAdmin webmaster@localhost DocumentRoot /var/www/wordpress # Available loglevels: trace8, ..., trace1, debug, info, notice, warn, # error, crit, alert, emerg. # It is also possible to configure the loglevel for particular # modules, e.g. #LogLevel info ssl:warn ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined # For most configuration files from conf-available/, which are # enabled or disabled at a global level, it is possible to # include a line for only one particular virtual host. For example the # following line enables the CGI configuration for this host only # after it has been globally disabled with \u0026#34;a2disconf\u0026#34;. #Include conf-available/serve-cgi-bin.conf \u0026lt;/VirtualHost\u0026gt; Habilitamos el sitio virtual wordpress.conf\njaviercruces@IWEB:/etc/apache2/sites-available$ sudo a2ensite wordpress.conf Enabling site wordpress. To activate the new configuration, you need to run: systemctl reload apache2 Recargamos Apache para aplicar la nueva configuración\njaviercruces@IWEB:/etc/apache2/sites-available$ sudo systemctl reload apache2 Para acceder a este virtualhost , en la maquina donde vayas a acceder al wordpress , al no tener servidor dns recuerda poner en el fichero host la ip de tu servidor con el ServerName :\njaviercruces@HPOMEN15:~$ cat /etc/hosts #Añade la IP de tu servidor y el ServerName correspondiente (wordpress.fjcd.es) #Ponlo al final del fichero y no modifiques las lineas existentes en tu fichero 192.168.125.27 wordpress.fjcd.es Creación de la base de datos con un usuario. Te recomiendo que apuntes los datos introducidos a continuación ya que los necesitaras mas adelante . Nos conectamos a la base de datos :\njaviercruces@IWEB:~$ sudo mysql -u root -p Enter password: Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 31 Server version: 10.11.4-MariaDB-1~deb12u1 Debian 12 Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others. Type \u0026#39;help;\u0026#39; or \u0026#39;\\h\u0026#39; for help. Type \u0026#39;\\c\u0026#39; to clear the current input statement. #Creamos una base de datos : MariaDB [(none)]\u0026gt; CREATE DATABASE fjcd_wordpress; Query OK, 1 row affected (0,001 sec) #Nos creamos el usuario para nuestra base de datos MariaDB [(none)]\u0026gt; CREATE USER \u0026#39;fjcd-wordpress\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED BY \u0026#39;tu_contraseña\u0026#39;; Query OK, 0 rows affected (0,013 sec) #Le damos permisos sobre la base de datos que hemos creado: MariaDB [(none)]\u0026gt; GRANT ALL PRIVILEGES ON fjcd_wordpress.* TO \u0026#39;fjcd-wordpress\u0026#39;@\u0026#39;localhost\u0026#39;; Query OK, 0 rows affected (0,010 sec) #Actualizamos los permisos: MariaDB [(none)]\u0026gt; FLUSH PRIVILEGES; Query OK, 0 rows affected (0,000 sec) #Nos salimos de la CLI de mysql MariaDB [(none)]\u0026gt; EXIT; Bye Instalación de WordPress Lo primero que haremos será descargarnos WordPress, podemos hacerlo usando wget o si lo tenemos descargado en nuestro anfitrión pasarlo haciendo uso de SCP o FTP .\njaviercruces@IWEB:~$ wget https://wordpress.org/latest.tar.gz --2023-10-27 12:33:17-- https://wordpress.org/latest.tar.gz Resolviendo wordpress.org (wordpress.org)... 198.143.164.252 Conectando con wordpress.org (wordpress.org)[198.143.164.252]:443... conectado. Petición HTTP enviada, esperando respuesta... 200 OK Longitud: 23465047 (22M) [application/octet-stream] Grabando a: «latest.tar.gz» latest.tar.gz 100%[=====================================\u0026gt;] 22,38M 14,8MB/s en 1,5s 2023-10-27 12:33:19 (14,8 MB/s) - «latest.tar.gz» guardado [23465047/23465047] Y descomprimiremos el fichero y copiaremos los ficheros dentro del DocumentRoot de nuestro VirtualHost:\njaviercruces@IWEB:~$ sudo mkdir /var/www/wordpress/ javiercruces@IWEB:~$ sudo tar -zxf latest.tar.gz -C /var/www/ Entramos a la ruta del WordPress para realizar poner correctamente el esquema de permisos :\njaviercruces@IWEB:~$ cd /var/www/ Cambiamos usuario y grupos:\njaviercruces@IWEB:/var/www$ sudo chown -R www-data:www-data wordpress/ Una vez hemos configurado todo esto, ahora ya podemos acceder con nuestro navegador a nuestro dominio para iniciar la instalación de WordPress.\nInstalación Web Accedemos a la url que hemos puesto en el ServerName de nuestro sitio virtual y posteriormente hemos configurado en el fichero hosts .\nLo primero sera seleccionar el idioma :\nA continuación nos dará una breve explicación de que es el CMS WordPress :\nAhora deberás de introducir los datos referente a los usuarios y el nombre de la base de datos que has creado con anterioridad\nUna vez introducidos los datos correctos continuaremos con la instalación :\nAhora deberás de introducir los datos para tu wordpress , como el nombre del sitio asi como la creación de un usuario administrador para que posteriormente puedas acceder a wp-admin:\nListo !! Ya has instalado wordpress\nAhora para acceder al panel de administración de wordpress deberás de introducir la siguiente url en tu navegador e inicia sesión con el usuario que has creado:\nListo !! Asi se ve el panel de administración de wordpress:\n","date":"October 28, 2023","hero":"/images/iweb/wordpress/portada_wordpress.png","permalink":"http://www.javiercd.es/posts/iaw/wordpress/instalacion_wordpress/","summary":"Instalación WordPress en Debian 12 con pila LAMP PHP-8 WordPress es un sistema de gestión de contenidos (CMS, por sus siglas en inglés) de código abierto muy popular que se utiliza para crear y administrar sitios web y blogs. Fue lanzado por primera vez en 2003 y desde entonces ha ganado una amplia base de usuarios y una comunidad activa de desarrolladores y diseñadores.\nPreparación Antes de empezar con la instalación de WordPress vamos a dejar claro en una lista cual es el ecosistema de nuestro servidor para que todo funcione correctamente:","tags":["WordPress","CMS","IWEB","AW","debian"],"title":"Instalación WordPress en Debian 12 con pila LAMP PHP-8"},{"categories":null,"contents":"Instalación WordPress en Debian 12 con pila LEMP PHP-8 WordPress es un sistema de gestión de contenidos (CMS, por sus siglas en inglés) de código abierto muy popular que se utiliza para crear y administrar sitios web y blogs. Fue lanzado por primera vez en 2003 y desde entonces ha ganado una amplia base de usuarios y una comunidad activa de desarrolladores y diseñadores.\nRequisitos previos Servidor con Linux: Debes disponer de un servidor que ejecute Linux , la guía esta pensada para Debian 12 . Usuario con permisos de superusuario: Debes tener acceso a un usuario con privilegios sudo en el servidor para poder llevar a cabo las tareas de instalación y configuración. Nombre de Dominio Completo (FQDN): Si deseas acceder a tu sitio WordPress a través de un dominio personalizado, asegúrate de tener configurado y apuntando un nombre de dominio completo (FQDN) al servidor. Acceso a Internet: Necesitas acceso a Internet para descargar paquetes y realizar actualizaciones durante el proceso de instalación. Asegúrate de cumplir con todos estos requisitos antes de comenzar con la instalación de WordPress en tu servidor .\nSi no tienes instalado la pila LEMP sigue puedes hacerlo en este enlace.\nCreación de un VirtualHost en Nginx La creación de un VirtualHost en Nginx te permite configurar múltiples sitios web en un único servidor. Sigue estos pasos para crear un VirtualHost en Nginx.\nCopia el archivo de configuración por defecto de Nginx para usarlo como ejemplo y nómbralo como quieras. En este ejemplo, lo nombraremos \u0026ldquo;wordpress\u0026rdquo; , ya que vamos a instalarlo sin embargo el nombre es meramente informativo.\njaviercruces@IWEB:~$ sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/wordpress Vamos a editar el contenido del mismo , para ello :\njaviercruces@IWEB:~$ sudo nano /etc/nginx/sites-available/wordpress Aquí te dejo el ejemplo del fichero de configuración de mi sitio , asegúrate de definir el nombre del servidor (tu dominio) y el directorio raíz del sitio.\nserver { listen 80; root /var/www/wordpress; # Cambia esta linea por la ubicación del directorio root de tu wordpress index index.php index.html index.htm; server_name wordpress.fjcd.es; # Cambia esta linea y pon el FQDN , a traves de este accederás a tu wordpress client_max_body_size 500M; location / { try_files $uri $uri/ /index.php?$args; } location = /favicon.ico { log_not_found off; access_log off; } location ~* \\.(js|css|png|jpg|jpeg|gif|ico)$ { expires max; log_not_found off; } location = /robots.txt { allow all; log_not_found off; access_log off; } location ~ \\.php$ { include snippets/fastcgi-php.conf; fastcgi_pass 127.0.0.1:9000; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } } Para hacer esta configuración activa vamos a crear un enlace simbólico\njaviercruces@IWEB:~$ sudo ln -s /etc/nginx/sites-available/wordpress /etc/nginx/sites-enabled/ Ahora vamos a reiniciar nginx , para que se apliquen los cambios :\njaviercruces@IWEB:~$ sudo systemctl reload nginx Para acceder a este virtualhost , en la maquina donde vayas a acceder al wordpress , al no tener servidor dns recuerda poner en el fichero host la ip de tu servidor con el ServerName :\njaviercruces@HPOMEN15:~$ cat /etc/hosts #Añade la IP de tu servidor y el ServerName correspondiente (wordpress.fjcd.es) #Ponlo al final del fichero y no modifiques las lineas existentes en tu fichero 192.168.125.27 wordpress.fjcd.es Creación de la base de datos con un usuario. Te recomiendo que apuntes los datos introducidos a continuación ya que los necesitaras mas adelante . Nos conectamos a la base de datos :\njaviercruces@IWEB:~$ sudo mysql -u root -p Enter password: Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 31 Server version: 10.11.4-MariaDB-1~deb12u1 Debian 12 Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others. Type \u0026#39;help;\u0026#39; or \u0026#39;\\h\u0026#39; for help. Type \u0026#39;\\c\u0026#39; to clear the current input statement. #Creamos una base de datos : MariaDB [(none)]\u0026gt; CREATE DATABASE fjcd_wordpress; Query OK, 1 row affected (0,001 sec) #Nos creamos el usuario para nuestra base de datos MariaDB [(none)]\u0026gt; CREATE USER \u0026#39;fjcd-wordpress\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED BY \u0026#39;tu_contraseña\u0026#39;; Query OK, 0 rows affected (0,013 sec) #Le damos permisos sobre la base de datos que hemos creado: MariaDB [(none)]\u0026gt; GRANT ALL PRIVILEGES ON fjcd_wordpress.* TO \u0026#39;fjcd-wordpress\u0026#39;@\u0026#39;localhost\u0026#39;; Query OK, 0 rows affected (0,010 sec) #Actualizamos los permisos: MariaDB [(none)]\u0026gt; FLUSH PRIVILEGES; Query OK, 0 rows affected (0,000 sec) #Nos salimos de la CLI de mysql MariaDB [(none)]\u0026gt; EXIT; Bye Instalación de WordPress Lo primero que haremos será descargarnos WordPress, podemos hacerlo usando wget o si lo tenemos descargado en nuestro anfitrión pasarlo haciendo uso de SCP o FTP .\njaviercruces@IWEB:~$ wget https://wordpress.org/latest.tar.gz --2023-10-27 12:33:17-- https://wordpress.org/latest.tar.gz Resolviendo wordpress.org (wordpress.org)... 198.143.164.252 Conectando con wordpress.org (wordpress.org)[198.143.164.252]:443... conectado. Petición HTTP enviada, esperando respuesta... 200 OK Longitud: 23465047 (22M) [application/octet-stream] Grabando a: «latest.tar.gz» latest.tar.gz 100%[=====================================\u0026gt;] 22,38M 14,8MB/s en 1,5s 2023-10-27 12:33:19 (14,8 MB/s) - «latest.tar.gz» guardado [23465047/23465047] Y descomprimiremos el fichero y copiaremos los ficheros dentro del DocumentRoot de nuestro VirtualHost:\njaviercruces@IWEB:~$ sudo mkdir /var/www/wordpress/ javiercruces@IWEB:~$ sudo tar -zxf latest.tar.gz -C /var/www/ Entramos a la ruta del WordPress para realizar poner correctamente el esquema de permisos :\njaviercruces@IWEB:~$ cd /var/www/ Cambiamos usuario y grupos:\njaviercruces@IWEB:/var/www$ sudo chown -R www-data:www-data wordpress/ Una vez hemos configurado todo esto, ahora ya podemos acceder con nuestro navegador a nuestro dominio para iniciar la instalación de WordPress.\nInstalación Web Accedemos a la url que hemos puesto en el ServerName de nuestro sitio virtual y posteriormente hemos configurado en el fichero hosts .\nLo primero sera seleccionar el idioma :\nA continuación nos dará una breve explicación de que es el CMS WordPress :\nAhora deberás de introducir los datos referente a los usuarios y el nombre de la base de datos que has creado con anterioridad\nUna vez introducidos los datos correctos continuaremos con la instalación :\nAhora deberás de introducir los datos para tu wordpress , como el nombre del sitio asi como la creación de un usuario administrador para que posteriormente puedas acceder a wp-admin:\nListo !! Ya has instalado wordpress\nAhora para acceder al panel de administración de wordpress deberás de introducir la siguiente url en tu navegador e inicia sesión con el usuario que has creado:\nListo !! Asi se ve el panel de administración de wordpress:\n","date":"October 28, 2023","hero":"/images/iweb/wordpress/portada_wordpress.png","permalink":"http://www.javiercd.es/posts/iaw/wordpress_lemp/instalacion_wordpress_lemp/","summary":"Instalación WordPress en Debian 12 con pila LEMP PHP-8 WordPress es un sistema de gestión de contenidos (CMS, por sus siglas en inglés) de código abierto muy popular que se utiliza para crear y administrar sitios web y blogs. Fue lanzado por primera vez en 2003 y desde entonces ha ganado una amplia base de usuarios y una comunidad activa de desarrolladores y diseñadores.\nRequisitos previos Servidor con Linux: Debes disponer de un servidor que ejecute Linux , la guía esta pensada para Debian 12 .","tags":["WordPress","CMS","IWEB","AW","debian"],"title":"Instalación WordPress en Debian 12 con pila LEMP PHP-8"},{"categories":null,"contents":"Documento en el cual se detallan los principales comandos a la hora de detectar incidencias en redes y lograr solucionarlos .\nComandos en Windows Explica el significado de los distintos parámetros a configurar en las Propiedades de TCP/IP en Windows Tenemos que tener en cuenta que cada configuración que hagamos es independiente para cada uno de nuestros adaptadores de red .\nPara acceder a configurar estos parámetros seguiremos la siguiente ruta en nuestro sistema :\nPanel de control \u0026gt;Redes e Internet \u0026gt; Centro de redes y recursos compartidos \u0026gt; Cambiar configuración del adaptador :\nUna vez aquí le daremos Clic derecho \u0026gt; Propiedades \u0026gt; Protocolo de version 4 (TCP/IP)\nUna vez aquí veremos dos pestañas a la cual podemos dirigirnos para configurar nuestra tarjeta , en la pestaña general podemos observar los siguiente apartados :\nEl primer apartado (General) relacionado con nuestra dirección ip :\nObtener una dirección ip automáticamente : Marcaremos esta opción cuando queramos que se use el servicio DHCP para asignar mediante el servicio dirección IP , mascara de subred y la puerta de enlace predeterminada . Usar la siguiente dirección IP : Aquí introduciremos nosotros manualmente la configuración de red deseada : Dirección IP: es una etiqueta numérica que identifica a nuestra maquina de manera única en nuestra red , no puede estar repetida . Mascara de subred : conjunto numérico cuya función es indicar a los dispositivos qué parte de la dirección IP es el número de la red incluyendo la subred, y qué parte es la correspondiente al host. Puerta de enlace predeterminada : Es la dirección ip predeterminada que se le asigna a un equipo para enviar los paquetes a otras redes . En el segundo apartado de esta pestaña realizaremos la configuración referente a los servidores DNS los cuales permitirán traducirnos nombres a direcciones IP para poder navegar .\nObtener la dirección del servidor DNS automáticamente : Esta opción hará que la dirección se obtenga del servidor DHCP que tengamos configurado en nuestra red . Usar la siguientes direcciones del servidor DNS : Esta opción nos sirve para manualmente seleccionar la dirección ip de nuestros servidores DNS: Servidor DNS preferido : La dirección que pongamos aquí sera la primera en consultar en caso de que necesite hacer una resolución Servidor DNS alternativo : Si el servidor primario fallase o estuviera caído en ese momento pasaríamos a utilizar el secundario . En la pestaña configuración alternativa , esta pensado para equipos que necesiten usarse en mas de una red , suele verse en entornos profesionales :\nDirección ip privada automática : Hará uso del servidor DHCP para configurarse . Configurada por el usuario : Nos permitirá introducirla manualmente la configuración (omitiré los campos explicados anteriormente ) : WINS preferido : es un servidor de nombres de Microsoft para NetBIOS, que mantiene una tabla con la correspondencia entre direcciones IP y nombres NetBIOS de ordenadores . WINS alternativo : Si el servidor primario fallase o estuviera caído en ese momento pasaríamos a utilizar el secundario . Utilidad del comando ping Ping es un comando o una herramienta de diagnóstico que permite hacer una verificación del estado de una determinada conexión de un host local con al menos un equipo remoto contemplado en una red de tipo TCP/IP , es la herramienta de diagnostico de redes mas conocida .\nLos usos mas comunes de esta herramienta son :\nComprobar la conectividad de una red. Medir la latencia que tardan en comunicarse dos puntos . Conocer la dirección IP utilizada por un nombre de dominio. Scripts que permiten llevar un registro de la disponibilidad de un servidor remoto. Scripts que permiten conocer cuando existe conexión en un equipo. Para hacer uso de este abriremos una cmd , pulsaremos WIN + R y escribiremos cmd .\nUso general de Ping La sintaxis mas simple de ping es la siguiente : ping [Parámetros] [IP/Nombre]\nSi nos fijamos en la salida del comando vemos que nos permite conoces :\nDirección IP que corresponde al nombre de la máquina remota. El número de secuencia ICMP (“Código que nos devuelve , ej : 0=red inaccesible”). TTL: Tiempo de vida en segundos; como este valor se decrementa en cada máquina en la cual es procesado, debe ser al menos igual o mayor que el número de saltos que dará .Si alguna vez este número es cero, el router interpretará que el paquete está viajando en círculos, por lo tanto, finaliza el proceso. **Latencia :**corresponde al lapso de tiempo en milisegundos que se necesita para dar una vuelta entre las máquinas fuente y destino. Como regla general, la demora de un paquete no debe ser mayor a 200 ms. Estadísticas del ping : Nos reúne toda la información mostrándonos los paquetes perdidos , enviados y recibidos . Además nos muestra el paquete con menor latencia y con mayor así como una media aritmética . PING -T Este parámetro nos permitirá hacer un ping infinito es decir no finalizara hasta que matemos el proceso , si no lo pusiésemos por defecto solo se enviaran 4 trazas . Para finalizar este la ejecución de este comando pulsaremos CTRL + C .\nCuando detengamos la ejecución nos mostrara las estadísticas que ha recopilado , paquetes enviados, paquetes recibidos y paquetes perdidos así como los tiempos medios de ida y vuelta .\nPING -A Este parámetro sirve para que nos resuelva una ip en un nombre de host ,imprimiendo una linea indicando el nombre de host al cual le estamos dirigiendo las trazas , lo que nos permite identificar mas fácilmente las maquinas :\nPING -N Este parámetro sirve para especificar el numero de solicitudes echo que deseemos al enviar paquetes , este lo indicaremos con un numero comprendido entre 1 – 4294967295 .\nPor ejemplo si queremos enviar 10 trazas el comando seria el siguiente :\nPodemos comprobar en la parte inferior que ha enviado en numero que le hemos indicado .\nPING -L Nos permite modificar el tamaño en bytes de los paquetes enviados , deberemos especificar un numero entre 0 y 65000 .\nPING -F Este parámetro sirve para evitar que los paquetes se fragmenten , el tamaño máximo de los paquetes sin fragmentar es de 1472 bytes .\nPodemos ver que si superamos este numero , nos dará un error informándonos que es necesario fragmentar el paquete :\nPING -I Este parámetro nos permite especificar el numero máximo que se pueden dar hasta alcanzar al destino , el valor máximo que podemos introducir 255 .\nCuando especificamos un TTL esto fija el número máximo de saltos, al pasar por un nuevo dispositivo (un router) este descuenta 1 al TTL especificando hasta que llega a 0, en este caso el destino se mostrará como inalcanzable, de esta forma se evita que un paquete viaje por la red indefinidamente buscando un destino que puede que no exista.\nPING -4 -6 Ping -4 : Fuerza la respuesta del host especificado con una dirección IPv4. Es necesario que tanto el equipo que lanza el ping como el destino tengan una configuración IPv4 correcta.\nPing -6 : Fuerza la respuesta del host especificado con una dirección IPv6. Es necesario que tanto el equipo que lanza el ping como el destino tengan una configuración IPv6 correcta.\nComprobar conectividad en una red Vamos a efectuar una serie de pruebas para verificar el funcionamiento y encontrar errores . Lo primero sera hacernos ping a nosotros mismos para ello :\nSi la salida es correcta esto demuestra que nuestro adaptador de red funciona correctamente .\nVamos a hacerle ping a una maquina de nuestra red local , así demostraremos que las conexiones físicas son correctas :\nVamos a hacerle ping a la puerta de enlace , de tener éxito demuestra que existe conexión con el equipo que suministra internet :\nHaremos ping a un sitio de internet usando ip , para comprobar que tenemos conexión a internet :\nPor ultimo hacer ping a un dominio en internet ,de tener éxito demuestra que existe conexión a internet y los servidores DNS configurados en la conexión funcionan correctamente:\nUso general del comando ipconfig Este comando se usa para ver la configuración actual de los adaptadores de red de nuestro equipo , un ejemplo de uso general del comando es el siguiente :\nEste nos muestra la siguiente información :\nDescripción del adaptador : Nombre del adaptador o tarjeta de red utilizado en la conexión. Dirección IPV4: Es la dirección IP asignada al equipo en la red local. Puerta de enlace predeterminada: Es la dirección IP del equipo proporciona acceso a internet. Servidores DNS: Dirección ip del encargado de resolver nombre de dominio a dirección IP de las paginas solicitadas. Generalmente son dos, el principal y el secundario. Estado de DHCP: Configuración dinámica de host, en el caso del equipo mostrado se encuentra habilitada, eso significa que siempre se utilizará una dirección IP asignada por este servicio . A partir de estos parámetros podemos consultar la información del adaptador o identificar una incoherencia en la configuración del mismo .\nIPCONFIG /ALL Nos devolverá toda la información disponible de los adaptadores de red , es una salida mas detallada que si omitimos este parámetro , con este podemos consultar los servidores DNS y las direcciones MAC .\nIPCONFIG /RELEASE Se utiliza para liberar una dirección ip en el servicio DHCP , no se nos volverá a asignar una hasta que ejecutemos ipconfig /renew\nPodemos especificar el adaptador del cual queremos que se libere la ip escribiéndolo a continuación, si omitimos el nombre los aplicara a todos .\nEJ: ipconfig /release Ethernet0 –\u0026gt; Solo liberara la ip del adaptador Ethernet0 *****Si queremos liberar una dirección ipv6 utilizaremos el parámetro /release6\nIPCONFIG /RENEW Una vez ejecutado el comando anterior deberemos de ejecutar este para solicitar al servidor DHCP una nueva concesión de dirección IP .\nPodemos especificar el adaptador del cual queremos que se renueve la oferta DHCP escribiéndolo a continuación.\nEJ: ipconfig /renew Ethernet0 –\u0026gt; Solo renovara la concesión del adaptador Ethernet0 *****Si queremos renovar una dirección ipv6 utilizaremos el parámetro /renew6\nIPCONFIG /FLUSHDNS Se utiliza para vaciar la cache de resolución DNS de nuestro equipo local , suele utilizarse cuando queremos comprobar el correcto funcionamiento del servidor DNS .\nIPCONFIG /REGISTERDNS Actualiza todas las concesiones DHCP y vuelve a registrar los nombres DNS. Este comando esta orientado al trabajo en entornos de dominio y a la actualización de los registros dinámicos del servidor de DNS del sistema en el que se esta ejecutando, teniendo en cuenta que si esta bloqueada de alguna forma la actualización dinámica no se efectuará.\nIPCONFIG /DISPLAYDNS Este comando simplemente nos muestra las consultas DNS que se están almacenados en la caché de nuestro sistema de la forma que se muestran en la imagen, muestran datos de registros del protocolo IPv4 como de IPv6.\nIPCONFIG /SHOWCLASSID Este comando nos permite comprobar las clases de usuario configuradas en nuestro servidor DHCP y que estarán disponibles para los diferentes clientes.\n*Si queremos comprobarlo para IPV6 utilizaremos el parámetro /showclassid6 .\nUso general ARP El comando arp muestra y modifica las tablas de conversión de direcciones IP en direcciones\nMAC que utiliza el protocolo de resolución de direcciones (ARP).\nARP -A Pide los datos de protocolo actuales y muestra las entradas ARP actuales. Si se especifica inet_addr, solo se muestran las direcciones IP y física del equipo especificado. Si existe más de una interfaz de red que utilice ARP, se muestran las entradas de cada tabla ARP.\n* La opción -g hace la misma función :\nComo se muestra en la captura de pantalla el comando arp –a enumera todos los dispositivos que se encuentran actualmente en la caché ARP del host, lo cual incluye la dirección IPv4, la dirección física y el tipo de direccionamiento (estático/dinámico) para cada dispositivo.\nSi queremos borrar la cache arp utilizaremos la opción -d seguida del comodín * para borrar todas las entradas en esta tabla , si solo quisiéramos eliminar una consulta pondríamos la dirección IP .\nPodemos solicitar la MAC de una dirección usando arp + IP del dispositivo y posteriormente verla en nuestra tabla con arp -a .\nUso general netstat El comando netstat genera visualizaciones que muestran el estado de la red y estadísticas de protocolo. El estado de los protocolos TCP, SCTP y los puntos finales de UDP puede visualizarse en formato de tabla. También puede visualizarse información sobre la tabla de enrutamiento e información de interfaces.\nNETSTAT -A Muestra las todas conexiones y puertos de escucha de nuestro equipo , así como el estado del puerto y la dirección remota la cual esta usando el mismo :\nNETSTAT -B Muestra el archivo ejecutable implicado en la creación de cada conexión o puerto de escucha.\nNETSTAT -E Nos muestra estadísticas sobre las interfaces de red , sirve para ver la actividad que ha tenido esta:\nNETSTAT -R Nos muestra la tabla de enrutamiento , así podemos ver los sitios a los cual nuestro equipo es capaz de llegar a través de la red :\nNETSTAT -N Nos muestra las conexiones activas con un formato de tabla , similar al parámetro -a solo que este nos indica el numero de puerto en lugar del nombre .\nNETSTAT -O Similar al parámetro anterior pero este nos añade el PID del proceso :\nNETSTAT -P Nos permite filtrar las conexiones según el protocolo (TCP, UDP, tcpv6 o tcpv4…)\nNETSTAT -T Muestra el estado de descarga de la conexión actual :\nNetstat es muy interesante para ver datos estadísticos de la conexión, pero también va a ser muy útil para analizar los puertos abiertos en un momento determinado y así identificar problemas. Es esencial para determinadas aplicaciones y poder lograr un rendimiento óptimo .\nUso general nslookup Es una aplicación incluida en todos los sistemas Windows, para consultar, obtener información, probar y solucionar problemas con los servidores DNS .\nAl invocarlo sin especificar ningún parámetro, devolverá el nombre del servidor DNS predeterminado y su dirección IP :\nEl comando dispone de dos modos de uso , el tradicional a través de linea de comandos y el interactivo . Podemos usarlo para resolver nombres de direcciones desde la terminal poniendo nslookup seguido del nombre que queramos resolver :\nTambién podemos hacer consultas inversas , es decir que a través de la ip nos diga el nombre :\nPor ejemplo podemos seleccionar el tipo de registros DNS para hacer peticiones los cuales son :\nA: para buscar registros A que son los relacionados con la dirección IPv4.. AAAA: para buscar registros AAAA que son los relacionados con la dirección IPv6. Si una web utiliza direccionamiento IPv6 y nosotros también, entonces tendremos que indicar este registro DNS. PTR: para buscar registros reversos. MX :para buscar los registros Mail Exchange del correo. TXT:, para buscar registros de texto como SPF o DKIM. CNAME: para buscar alias del dominio, esto también se conoce como subdominios, por ejemplo, el «www» siempre es un subdominio del principal» o el típico «ftp.» que es también un subdominio. Para cambiar el tipo de registro utilizamos la orden set type=Nombre del registro , por ejemplo :\nTambién podemos elegir el servidor desde el cual realizamos las consultas de la siguiente manera :\nUso general tracert Sirve para trazar la ruta que hace un paquete entrante que viene desde un host o punto de red hasta tu ordenador , así conocemos por donde viaja nuestro viaje .\nDiciendo uno a uno todos los nodos y routers por los que pasa el mensaje de prueba que has enviado, sus direcciones IP y la latencia de cada uno de ellos hasta llegar a su destino.\nHay algunos nodos que no son capaces de respondernos por eso las entradas de tiempo de espera agotado .\nTenemos algunos parámetros interesantes como :\n-d : No convierte direcciones en nombres de host -h : Nos permite seleccionar el numero máximos de saltos -4 o -6 : Fuerza usar IPV4 o IPV6 : -w : Nos permite especificar el tiempo de espera en milisegundos : Uso general route print El comando Route se utiliza para visualizar y modificar la tabla de enrutamiento. Route print muestra una lista con las rutas actuales conocidas por IP para el host. Route add se utiliza para añadir rutas a la tabla, y route delete se utiliza para borrar rutas de la tabla.\nAsí podemos especificar el camino para llegar a una red o dispositivo .\nLa sintaxis es la siguiente : route [-f] [-p] [comando [destino]] [MASK máscara de red]\nComando route print sin parámetros para mostrar todo el contenido de la tabla de enrutamiento :\nSi deseamos borrar la tabla de enrutamiento deberemos de utilizar el parámetro -f :\nAdemás podemos añadir , rutas manuales de la siguiente manera :\n→ route add IP_Destino Mascara_Destino Puerta_de_enlace métrica interfaz\nSi queremos cambiar una ruta , la sintaxis es la misma que el comando anterior cambiando la orden add por change :\nCuando solo queramos eliminar una ruta , utilizaremos la orden delete seguida del destino :\n¿Cómo puedes averiguar la IP pública de tu router? Hay muchas forma de saber esto desde Windows , podemos utilizar el comando curl para pedir la siguiente web y que nos devuelva la ip :\nOtra forma desde la linea de comandos es hacer una consulta dns con nslookup al servicio opendns :\nSi tenemos un navegador podemos usar una de las muchas webs que nos dicen la dirección ip publica del router , yo uso la siguiente https://ipchicken.com/ :\nLinux Configurar una interfaz de red Para configurar una tarjeta de red en Linux podemos hacerlo desde la interfaz gráfica o desde linea de comandos .\nDesde interfaz gráfica nos dirigimos a Configuración \u0026gt; Inalámbrica o Red . Una vez aquí encenderemos la tarjeta y le daremos al engranaje .\nUna vez aquí podemos configurar manualmente la configuración de red de nuestra tarjeta .\nEsto mismo podremos hacerlo desde la linea de comandos editando el fichero /etc/network/interfaces con permisos de superusuario .\nDentro de este podemos indicar la configuración de nuestros adaptadores de red , aquí te indico con lineas comentadas los parámetros básicos que podemos indicar en este archivo .\nUna vez hayamos configurado nuestras interfaces los cambios no se aplicaran automáticamente , para hacer esto tenemos varias formas , la mas cómodas es reiniciar el servicio :\nOtra forma de cambiar los servidores DNS que se utilizan es a través del fichero /etc/resolf.conf\nAquí seguido de nameserver pondremos la dirección ip o nombre de nuestro servidor DNS\nUso general ifconfig Explica la utilidad del comando ifconfig a partir de una captura real. ¿Hay alguna información de las que se obtiene con ipconfig /all que no aparezca? Trata de conseguirla de otra forma.\nEs similar a ifconfig y esta enfocado a las mismas funciones , este comando también se utiliza para ver, cambiar y administrar todas las configuraciones actuales de la red informática.\nEsta se instala con el paquete net-tools , para instalarlo:\nPara utilizar esta herramienta necesitaremos hacerlo como superusuario , con su uso mas simple nos mostrara la configuración básica TCP/IP de nuestra tarjeta de red así como unas estadísticas de la misma :\nPor ejemplo con ipconfig /all podemos ver los servidores DNS configurados cosa que con ifconfig no podremos ver .\nAsí que tendremos que ver el fichero /etc/resolf.conf\nUn uso común de este comando es configurar rápidamente una interfaz de red , por ejemplo :\nEsto podemos ponerlo en una sola linea\nAdemás también podremos levantar y bajar la tarjeta de red\nUso general dhclient Este utiliza el protocolo de configuración dinámica de host para configurar dinámicamente los parámetros de red de la interfaz de red.\nEl siguiente comando indicará a dhclient que libere la concesión actual que tiene del servidor DHCP ,es decir que queremos liberar la ip actual . Utilizaremos los parámetros -r y -v\nSi queremos volver a pedir una configuración de red al comando dhcp utilizaremos solamente el parámetro -v .\nPrincipalmente este comando se usa para esto , para solucionar problemas con la configuración del servicio DHCP .\nAlgunos parámetros que no he mencionado y pueden resultar útil son :\n-6 : Sirve para indicar que quieres IPV6 -p: Sirve para indicar otro puerto para hacer la consulta -s : Sirve para indicar la dirección del servidor DHCP Diferencias de los comandos netstat y ping respecto a los empleados en Windows netstat muestra información sobre el subsistema de red en nuestro equipo al igual que Windows . Si nos fijamos en el manual nos indica que Esta aplicación está parcialmente obsoleta. El reemplazo de netstat es ss, para netstat -r tiene ip route, para netstat -i puede usar ip -s link y para netstat -g dispone de ip maddr.\nSi lanzamos el parámetro podemos ver a simple vista que nos muestra mas información sin indicar ningún parámetro , por lo demás estos son los mismo que en Windows .\nMientras que el comando ping la diferencia es que es por defecto infinito , a diferencia de Windows este no acabara hasta que lo detengamos nosotros .\nEn este los parámetros con respecto a Windows cambia su “letra ” , aquí serian :\n-i : Indicar el intervalo para enviar el siguiente paquete en segundos (por defecto es 1 ) -s : Cambiar el tamaño del paquete en bytes -f : inundación , para probar el rendimiento de la red bajo una carga pesada (envía una gran cantidad de paquetes lo más rápido posible) -c : Indicar el numero de trazas enviadas -w: Dejara de imprimir los resultados después de los segundos indicados -q: Elimina la salida del comando , opción silenciosa -a : hace un sonido cuando hay una respuesta -V indica la version del comando La utilidad de este sigue siendo la misma , solucionar problemas de accesibilidad de hosts en una red. Esto nos ayuda a comprender por qué un sitio web no se carga.\nUso general comando dig Dig es un comando que permite realizar consultas a servidores DNS para obtener información relacionada con este servicio. Para instalarlo en nuestro sistema , haremos un apt install dnsutils .\nPodemos hacer una consulta dns , por ejemplo al instituto para comprobar si somos capaces de obtener su dirección ip :\nUtilizando la opción +trace realiza consultas iterativas para resolver la búsqueda de nombres. Consultará los nombres de servidores a partir de la raíz y posteriormente atravesará el árbol del espacio de nombres mediante consultas iterativas siguiendo las referencias en el camino:\nTambién podemos realizar consultas inversas con la opción -x :\nDiferencias del comando traceroute de Linux con el comando tracert de Windows La herramienta traceroute es exactamente la misma que el tracert, pero se denomina de otra forma, aunque internamente puede hacer uso de diferentes protocolos, ya que en algunos sistemas operativos se hace uso del protocolo ICMP Echo Request/reply, y en otros de hace uso de mensajes UDP directamente para comprobar cuantos saltos hay de un host a otro .\nEstas se usan para detectar donde esta el error a la hora de acceder a un determinado equipo y saber en que nodo se produce el “error” .\nAlgunos parámetros que pueden interesarnos son :\n-f, :Establece la distancia entre el primer salto y el siguiente salto. -g,: nos permite indicar la puerta de enlace. -I : Usa ICMP ECHO -m, :Establece el número de saltos; el valor predeterminado es 64. -M, :las rutas de seguimiento se realizan con ICMP o UDP; el método predeterminado es UDP. -p: Define el puerto de red; el valor predeterminado es 33434. -q: Define el numero de paquetes por salto. –resolve-hostnames: puede usar esta sintaxis para corregir los nombres de host. -w, : Define el tiempo de espera en segundos. Uso general wget Wget es una herramienta informática creada por el Proyecto GNU. Puedes usarlo para recuperar contenido y archivos de varios servidores web. El nombre es una combinación de World Wide Web y la palabra get. Admite descargas a través de FTP, SFTP, HTTP y HTTPS.\nPara instalarlo usamos el comando apt install wget .\nUn ejemplo es para descargar archivos , por ejemplo una iso . Pondríamos el comando seguido de la url :\nEste nos descargara el archivo en el directorio actual de trabajo .\nPodemos utilizar el comando -o para indicar un nombre diferente al descargar el archivo :\nAlgunos parámetros interesantes son :\n-P : Indicar el directorio donde queremos guardar el archivos \u0026ndash;limit-rate : sirve para limitar la velocidad de descarga -tries : nos permite indicar el numero de reintentos de la descarga -b : Realizara la descarga en segundo plano -c para indicar que se reanude una descarga Si quisiéramos descargar archivos desde un servidor ftp utilizaríamos la siguiente sintaxis : wget –ftp-user=usuario\u0026ndash;ftp-password=contraseña\nUso general de tcpdump Tcpdump es una herramienta para línea de comandos cuya utilidad principal es analizar el tráfico que circula por la red. Permite al usuario capturar y mostrar en tiempo real los paquetes transmitidos y recibidos por la red a la cual el ordenador está conectado\nLos parámetros mas comunes son :\n-i Permite especificar la interfaz de red en la que vamos a atender el tráfico. -c Permite limitar la cantidad de paquetes capturados en un número determinado. -n Evita la resolución de puertos y direcciones ip a nombres. -e Muestra las cabeceras ethernet además del paquete ip. -t No imprime la estampa de tiempo de captura de cada paquete. -x Muestra el contenido hexadecimal de la trama capturada. -xx Idem a -x, pero además muestra el contenido de la cabecera Ethernet. -X Muestra el contenido hexadecimal y en ASCII de la trama capturada. -A Solo muesta el contenido ASCII del paquete capturado. -s Muestra solo los primeros bytes desde el principio del paquete. -vv Muestra información adicional, incluyendo parámetros de las cabeceras de protocolo. -w file Permite guardar la salida en un archivo con formato pcap. -r file Permite leer los paquetes previamente capturados y almacenados en un archivo pcap. Por ejemplo podemos hacer una captura de nuestra red de un máximo de 50 paquetes :\nComo ves la salida es indescifrable , para leerla usaremos el comando ngrep para buscar coincidencias sin tener en cuenta mayúsculas y minúsculas .\nUso general del comando arp El comando arp nos permitirá interactuar con la cache de resolución arp , modificándola por ejemplo .\nTambién podemos averiguar la dirección MAC de un dispositivo , buscándolo en la tabla :\nLos parámetros son los mismo que podemos encontrar en Windows :\n-a : Encontrar una determinada dirección en la tabla -v : Muestra todas las entradas -n : Muestra todas las entradas de forma numérica -d : elimina una resolución determinada También podemos hacer esto mismo con el comando ip :\nPara este la sintaxis básica es de la siguiente forma :\nadd : Añadir resolución del : Eliminar resolución change : Cambiar una resolución replace : Remplazar una resolución Por ejemplo para añadir una tabla :\nComando ip Podremos ver y configurar direcciones IP, ver y configurar tablas de enrutamiento, ver y configurar túneles IP, y también ver y configurar la interfaz física .\nEste se le añade un “segundo comando ” para indicar su funcion , son los siguientes :\nlink: nos sirve para configurar las interfaces de red físicas o lógicas, por ejemplo, para ver el estado de todas las interfaces de red. address: permite ver y configurar las direcciones IPv4 y IPv6 asociadas a las diferentes interfaces de red. Cada interfaz debe tener al menos, una dirección IP configurada. addrlabel: permite añadir una etiqueta neighbour: permite ver los enlaces de vecindad, es decir, se puede ver la tabla ARP del sistema operativo. rule: permite ver y configurar políticas de enrutado y cambiarlas, esto se utiliza sobre todo cuando vas a configurar varias tablas de enrutamiento. route: permite ver y configurar las tablas de enrutamiento, tanto de la tabla de enrutamiento principal, como de las «secundarias» que configures. tunnel: permite ver los túneles IP y también configurarlos. maddr: permite ver y configurar las direcciones multienlace. mroute: permite ver y configurar la tabla de enrutamiento multicast. mrule: permite ver y configurar políticas de enrutamiento de direcciones multicast. monitor: permite monitorizar el estado de las tarjetas de red de manera continua, también direcciones IP y rutas. ntable: gestiona el caché de neighbour (ARP) tuntap: gestiona las interfaces TUN/TAP, orientado a las VPN como OpenVPN o WireGuard. maddress: configuración de las direcciones multicast xfrm: gestiona las políticas IPsec. netns: administrar espacios de nombres de red l2tp: configuración de L2TP tcp_metrics: gestiona métricas TCP. token: gestiona los identificadores con token de las interfaces. Bibliografía Cambiar configuración TCP/IP Información general sobre comandos Información protocolo ICMP\nComando PING\nComando NSLOOKUP\nDescripción parámetros de los comandos Configuración red debian Comando ifconfig\nComando ip\n","date":"September 8, 2023","hero":"/images/redes/comando_de_supervision_de_redes/comando_de_supervision_de_redes.webp","permalink":"http://www.javiercd.es/posts/redes/comandos_de_supervision_de_redes/comandos_de_supervisi%C3%B3n_de_redes/","summary":"Documento en el cual se detallan los principales comandos a la hora de detectar incidencias en redes y lograr solucionarlos .\nComandos en Windows Explica el significado de los distintos parámetros a configurar en las Propiedades de TCP/IP en Windows Tenemos que tener en cuenta que cada configuración que hagamos es independiente para cada uno de nuestros adaptadores de red .\nPara acceder a configurar estos parámetros seguiremos la siguiente ruta en nuestro sistema :","tags":["Redes","comandos"],"title":"Comandos de supervisión de redes"},{"categories":null,"contents":"Configuración Apache bajo debian Instalar un servidor web Apache para el uso en una Intranet Para instalar el servidor debemos ejecutar como root el siguiente comando:\nCrea dentro del directorio /var/www/html un fichero llamado entrada.html en el que pongáis un mensaje de bienvenida\nAhora lo meteré dentro de la ruta :\nA continuación vamos a publicar una página más completa en nuestro servidor, para ello\nutiliza tu sitio web de aplicaciones web.\nAdemas debemos de darle permisos de lectura a otros para que podamos visualizarla :\nAccede desde los clientes, poniendo en un navegador la siguiente URL:\nDesde debian cliente :\nA continuación vamos a publicar una página más completa en nuestro servidor, para ello utiliza tu sitio web de aplicaciones web:\nResolución local de nombres : modifica los ficheros necesarios en el servicio BIND y accede usando el nombre que has indicado :\nComo ya tenia echo el dns anteriormente he utilizado este nombre :\nConfiguración de sitios web virtuales usando Apache La primera web tendrá el directorio base será /var/www/iesgn y contendrá una página llamada index.html, donde sólo se verá una bienvenida a la página del instituto Gonzalo Nazareno .\nLa segunda web tendrá el directorio base será /var/www/departamentos. En este sitio sólo tendremos una página inicial index.html, dando la bienvenida a la página de los departamentos del instituto.\nNecesitamos tener dos ficheros para realizar la configuración de los dos sitios virtuales, para ello vamos a copiar el fichero 000-default.conf\nUna vez hayamos creado los ficheros añadiremos dentro de cada uno el siguiente contenido :\nAhora deberemos crear un enlace simbólico en el directorio /etc/apache2/sites-enabled.\nPara que se apliquen estos cambios debemos reiniciar el servicio :\nAhora deberemos de actualizar el dns :\nUna vez reiniciado el dns podremos acceder a ambos sitios desde el navegador :\nAcceso autentificado al servidor web Apache Para activar la autentificación básica debemos de añadir las siguientes lineas a nuestro archivo de configuración del sitio :\nAhora creamos el archivo de las contraseñas , con el usuario previamente creado :\nReiniciamos el servicio y nos conectamos :\nAhora vamos ha hacer que a la pagina departamentos solo acceda el director y el profesor , ademas que a dirección solo acceda el director , para eso añadimos en departamentos:\nAhora vamos a añadir los usuarios de las zonas para eso , utilizamos este comando :\nUsuario profesor a departamentos : Usuario director a departamentos : Usuario director a zona dirección : Ahora reiniciaremos el servicio y comprobaremos que podemos acceder :\nAccederemos a departamentos :\nAhora a la zona equipo directivo :\n","date":"September 8, 2023","hero":"/images/servicios/apache/portada-apache.jpg","permalink":"http://www.javiercd.es/posts/servicios/apache/apache/","summary":"Configuración Apache bajo debian Instalar un servidor web Apache para el uso en una Intranet Para instalar el servidor debemos ejecutar como root el siguiente comando:\nCrea dentro del directorio /var/www/html un fichero llamado entrada.html en el que pongáis un mensaje de bienvenida\nAhora lo meteré dentro de la ruta :\nA continuación vamos a publicar una página más completa en nuestro servidor, para ello\nutiliza tu sitio web de aplicaciones web.","tags":["Servicios","NAT","SMR","IPTABLES","SNAT","SSH","FORWARDING","APACHE"],"title":"Configuración Apache bajo debian"},{"categories":null,"contents":"Configuración servidor DHCP bajo debian En este artículo aprenderás cómo configurar el servidor DHCP isc-dhcp-server. Además, configurarás una reserva y lo configuraras para que funcione en dos ámbitos.\nInstalación del servidor isc-dhcp-server Para instalar nuestro servidor dhcp ejecutamos:\nNos dará el siguiente error ya que no esta configurado :\nConfiguración del servidor isc-dhcp-server Lo primero que tenemos que hacer es configurar el interfaz de red por el que va a trabajar el servidor dhcp, para ello editamos el siguiente fichero:\nY añadimos nuestra interfaz que repartirá direcciones :\nConfigura el servidor dhcp con las siguientes características:\nRango de direcciones a repartir: 192.168.0.100 - 192.168.0.110 Máscara de red: 255.255.255.0 Duración de la concesión: 1 hora Puerta de enlace: 192.168.0.1 Servidores DNS: 8.8.8.8 Para ello editamos el siguiente archivo :\nAhora añadimos lo siguiente :\nAquí estamos configurando nuestro ámbito conforme al enunciado .\nAhora deberemos de reiniciar el servicio con el siguiente comando :\nConfiguraciòn de los clientes para obtener un direccionamiento dinámico Editaremos la configuración de red para que use el dhcp :\nEn el debian editamos el network/interfaces:\nAhora reiniciamos la tarjeta de red :\nAhora comprobaremos si nos a asignado ip con ipconfig:\nVemos que se ha asignado correctamente . Repetiremos lo mismo con nuestro cliente windows .\nConfiguramos la tarjeta de red para que utilice el protocolo dhcp, reiniciamos la tarjeta y comprobamos la ip que nos ha asignado :\nAhora vamos a comprobar las concesiones de direcciones para ello deberemos ver el siguiente archivo . Lo abriremos con cat ya que es importante no editarlo , puede causar problemas .\nReserva de una direccion IP Para ello deberemos editar el archivo de configuración de nuestro servidor dhcp :\nUna vez aquí vamos a añadir las siguientes lineas :\nNombre de la reserva hardware Ethernet: Es la dirección MAC de la tarjeta de red del host. fixed-address: La dirección IP que le vamos a asignar. Quedaría nuestra reserva así(la pondremos fuera de la configuración de nuestro ámbito):\nAhora reiniciaremos el servicio\nVamos a comprobar que se ha realizado la concesión , para ello nos vamos a windows . Es posible que tengamos que renovar la concesión o reiniciar la tarjeta de red .\nVamos a comprobar qué ocurre con la configuración de los clientes en determinadas circunstancias, para ello vamos a poner un tiempo de concesión muy bajo . Le pondré 1 min .\n1.Los clientes toman una configuración, y a continuación apagamos el servidor dhcp. ¿Qué ocurre con el cliente windows? ¿Y con el cliente Linux?\nEn windows nos asignara una dirección de APIPA\nMientras que en Linux no me asigna ninguna dirección ip , aunque después me asigno una dirección de APIPA\n¿Que ocurre cuando modificamos la configuraciòn? Los clientes toman una configuración, y a continuación cambiamos la configuración del servidor dhcp (por ejemplo, el rango). ¿Qué ocurre con el cliente windows? ¿Y con el cliente Linux?\nModificamos el rango :\nY reiniciamos el servicio\nCon windows mantengo la dirección de la reserva :\nY con Linux nos asigna la dirección del nuevo rango :\nConfigurar dos ambitos Realizar las modificaciones necesarias en la configuración actual de nuestro servidor dhcp para que reparta direcciones ip a dos redes diferentes, la 192.168.0.0 y la 192.168.2.0.\nLo primero que haremos sera añadir una cuarta tarjeta de red y la configuraremos manualmente . Si no sabemos el nombre de la interfaz podemos verlo con ip a :\nAhora la configuraremos estática , siguiendo el enunciado y la añadimos al /etc/default/isc-dhcp-server.\nY configuramos nuestro segundo rango :\nAhora reiniciamos el servicio :\nAhora le añadiré varias tarjetas de red a mi cliente para comprobar las concesiones y configuramos las tarjetas :\nY nos habría concedido dirección ip en ambos rangos :\n","date":"September 8, 2023","hero":"/images/servicios/dhcp_v4/isc-dhcp.webp","permalink":"http://www.javiercd.es/posts/servicios/dhcp/dhcp_ipv4/","summary":"Configuración servidor DHCP bajo debian En este artículo aprenderás cómo configurar el servidor DHCP isc-dhcp-server. Además, configurarás una reserva y lo configuraras para que funcione en dos ámbitos.\nInstalación del servidor isc-dhcp-server Para instalar nuestro servidor dhcp ejecutamos:\nNos dará el siguiente error ya que no esta configurado :\nConfiguración del servidor isc-dhcp-server Lo primero que tenemos que hacer es configurar el interfaz de red por el que va a trabajar el servidor dhcp, para ello editamos el siguiente fichero:","tags":["Servicios","NAT","SMR","DHCP","SNAT"],"title":"Configuración servidor DHCP bajo debian"},{"categories":null,"contents":"Configuración servidor DNS en Debian Dnsmasq El paquete dnsmasq permite poner en marcha un servidor DNS de una forma muy sencilla. Simplemente instalando y arrancando el servicio dnsmasq, sin realizar ningún tipo de configuración adicional, nuestro PC se convertirá en un servidor caché DNS y además, resolverá los nombres que tengamos configurados en el archivo /etc/hosts de nuestro servidor. La resolución funcionará tanto en sentido directo como en sentido inverso, es decir, resolverá la IP dado un nombre de PC y el nombre del PC dada la IP.\nInstalación Para instalarlo solo sera necesario introducir el siguiente comando :\nConfiguración A continuación, editamos el fichero /etc/dnsmasq.conf y modificamos las siguientes líneas:\n1.Descomentamos strict-order para que se realicen las peticiones DNS a los servidores que aparecen en el fichero /etc/resolv.conf en el orden en él aparecen.\n2.Incluimos las interfaces de red que deben aceptar peticiones DNS, descomentar la línea interface por ejemplo: interface=eth0\nAhora crearemos nuestro archivo de configuración :\n3.Creamos el fichero de configuración de nuestra zona :\n4.El dominio que hemos elegido es iesgn.org\n5.Suponemos que el nombre del servidor es miservidor.\n6.Vamos a suponer que tenemos un servidor ftp que se llame ftp.iesgn.org y que está en 192.168.1.201 (esto es ficticio) y que tenemos dos sitios webs: www.iesgn.org y departamentos.iesgn.org.\n7.Además queremos nombrar al cliente que tenía asignada una reserva: lisa.\n8.Reiniciamos el servicio\nModificacion en el servidor DHCP Configura los clientes e indica que su DNS es nuestro servidor. Si tienes un servidor DHCP modificarlo para que envíe el nuevo DNS a los clientes.\nEditamos el fichero :\nY reiniciamos el servicio :\nAhora comprobaremos si el cliente nos ha cambiado el dns mirando el siguiente archivo :\nSe nos ha cambiado satisfactoriamente .\nComandos para comprobar funcionamiento dns Comprueba el funcionamiento usando el comando dig/nslookup desde los clientes preguntando por los distintos nombres. Comprueba que el servidor DNS hace de forwarder preguntando con dig/nslookup la dirección ip de www.josedomingo.org.\nPara la pagina de Jose domingo la respuesta es no autorizada porque nuestro servidor no tiene la resolución en su fichero y tiene que utilizar un forwarder\nComo ves arriba yo he creado mi propia zona y a pesar de haber seguido los pasos de esta pagina de Jose domingo , no he conseguido que las respuestas estén autorizadas .\nHe creado el archivo dns.conf .\nY he creado mi zona :\nTambién he probado mas cosas sin embargo la única forma que he conseguido que me de respuesta autorizada es teniendo solo las resoluciones en el fichero host del servidor , sin crear mi zona .\nDNS BIND 9 Instalación Lo primero que haremos sera desinstalar dnsmasq ya que ambos no son compatibles :\nAdemas podemos ver que nos dice que el directorio /etc/dnsmasq.d/ al no estar vació no se ha borrado seria bueno que lo borrásemos manualmente para eliminar todo rastro de anteriores configuraciones :\nAhora vamos a instalarlos bind:\nConfiguración Ahora vamos a editar el fichero /etc/bind/named.conf.local donde crearemos las zonas (directas e inversas). En el caso de la práctica nos piden una directa (isgn.com) y otra inversa (red 192.168.1).\nAñadiremos las siguientes líneas a dicho fichero :\nEn el directorio / etc/bind están los ficheros db.empty y db.127 (ficheros de configuración de la zona directa e inversa respectivamente). Los copiamos al directorio / var/cache/bind para empezar a añadir los registros\nModificamos el fichero / var/cache/bind/db.isgn e incluimos las siguientes líneas para la resolución directa :\n*javiercruces es el nombre de mi maquina lo he cambiado para facilitar las cosas\nAhora haremos lo mismo para la resolución inversa :\nAhora reiniciaremos el servicio para que se apliquen los cambios :\nAdemas para asegurarnos de que hemos realizado bien la configuración vamos a mirar el estado del servicio para ver si nuestras zonas están funcionando :\nEste paso es opcional , pero gracias a revisar esto he descubierto porque no me hacia la resolución inversa y gracias a ver las zonas que estaban cargadas me di cuenta de que el error estaba en el fichero de configuración /etc/bind/named.conf.local y pude solucionarlo .\nReenviador Hasta ahora, sólo nos resolvería los nombres e ip de nuestra red local. Si queremos configurar un reenviador al que preguntar en caso de que el DNS local no pueda darnos la respuesta, debemos editar el fichero nano / etc/bind/named.conf.options y añadir lo siguiente:\nAntes de hacer este apartado aclarar que como en el apartado de dnsmasq ya comentamos el fichero host y modificamos la configuración del dhcp para que asigne el dns automáticamente , lo omitiré de esta parte.\nComandos para comprobar el funcionamiento del servicio Comprueba el funcionamiento usando el comando dig/nslookup desde los clientes preguntando por los distintos nombres. Comprueba que el servidor DNS hace de forwarder preguntando con dig/nslookup la dirección ip de www.josedomingo.org .\nVemos aquí que las respuestas son correctas , las que están en nuestro servidor estas autorizadas mientras que la pagina de Jose domingo nos la ha echo un forwarder .\nAhora haré las mismas peticiones pero inversas :\nCon esto hemos comprobado que el servidor dns funciona correctamente .\n","date":"September 8, 2023","hero":"/images/servicios/dns/portada-dns.jpg","permalink":"http://www.javiercd.es/posts/servicios/dns/dns/","summary":"Configuración servidor DNS en Debian Dnsmasq El paquete dnsmasq permite poner en marcha un servidor DNS de una forma muy sencilla. Simplemente instalando y arrancando el servicio dnsmasq, sin realizar ningún tipo de configuración adicional, nuestro PC se convertirá en un servidor caché DNS y además, resolverá los nombres que tengamos configurados en el archivo /etc/hosts de nuestro servidor. La resolución funcionará tanto en sentido directo como en sentido inverso, es decir, resolverá la IP dado un nombre de PC y el nombre del PC dada la IP.","tags":["Servicios","NAT","SMR","DHCP","SNAT","DNS","BIND9","DNSMASQ"],"title":"Configuración servidor DNS en Debian"},{"categories":null,"contents":"Servidor FTP bajo debian Instalación y configuración del servidor proFTPd autentificado 1.Primero nos crearemos un grupo que se llame ftpgroup : 2.Crea dos usuarios locales que pertenezcan al grupo ftp que hemos creado: Jose y Maria\n3.Nos instalamos el servicio ftp :\n4.Configuración básica del fichero proftpd.conf:\nTodos los usuarios accedan solo a su directorio :\nAhora podemos acceder desde el navegador con los usuarios Jose y Maria :\nCada uno de estos he creado una carpeta con su nombre dentro de sus directorios personales para poder identificarlos .\nPara que cada usuario pueda conectarse realmente al servidor FTP en Debian y le sea posible subir y descargar los datos en su propio directorio, debes introducir su directorio de entrada en proftpd.conf :\nPodemos transferir archivos correctamente :\nConfiguración de proFTPd para crear ftp anónimo Lo primero que tenemos que hacer es crear el directorio y darle el propietario adecuado:\nAhora cambiaremos esta regla y permitiremos que todos puedan unirse :\nAdemas añadimos las siguientes lineas e indicaremos la ruta a la que accederán los anónimos :\nPor lo que cuando reiniciemos podrán conectarse los usuarios anónimos :\nPero no con los usuarios que hemos creado anteriormente :\nPara permitir que nuestros usuarios se puedan conectar ademas de los anónimos:\nAhora aplicamos estos cambios y probamos a conectarnos . Vemos que con anónimos no podemos copiar nada al servidor pero si podemos descargar.\nAhora con un usuario del grupo , podremos copiar archivos :\n","date":"September 8, 2023","hero":"/images/servicios/ftp/portada-ftp.png","permalink":"http://www.javiercd.es/posts/servicios/ftp/ftp/","summary":"Servidor FTP bajo debian Instalación y configuración del servidor proFTPd autentificado 1.Primero nos crearemos un grupo que se llame ftpgroup : 2.Crea dos usuarios locales que pertenezcan al grupo ftp que hemos creado: Jose y Maria\n3.Nos instalamos el servicio ftp :\n4.Configuración básica del fichero proftpd.conf:\nTodos los usuarios accedan solo a su directorio :\nAhora podemos acceder desde el navegador con los usuarios Jose y Maria :\nCada uno de estos he creado una carpeta con su nombre dentro de sus directorios personales para poder identificarlos .","tags":["Servicios","NAT","SMR","IPTABLES","SNAT","SSH","FORWARDING","APACHE","FTP"],"title":"FTP bajo debian "},{"categories":null,"contents":"Instalacion GNS3 y Wireshark en Debian 1. Introducción Wireshark es un analizador de protocolos utilizado para realizar análisis y solucionar problemas en redes de comunicaciones, para análisis de datos y protocolos, y como una herramienta didáctica.\nAñade una interfaz gráfica y muchas opciones de organización y filtrado de información. Así, permite ver todo el tráfico que pasa a través de una red estableciendo la configuración en modo promiscuo de nuestra tarjeta de red . También incluye una versión basada en texto llamada tshark.\nPermite examinar datos o de un archivo de captura salvado en disco. Se puede analizar la información capturada, a través de los detalles y sumarios por cada paquete. Wireshark incluye un completo lenguaje para filtrar lo que queremos ver y la habilidad de mostrar el flujo reconstruido de una sesión de TCP.\nWireshark es software libre, y se ejecuta sobre la mayoría de sistemas operativos Unix y compatibles.\nLos requisitos mínimos para utilizar este software son :\nCualquier procesador moderno AMD64/x86-64 de 64 bits o x86 de 32 bits. 500 MB de RAM disponibles. Los archivos de captura más grandes requieren más RAM. 500 MB de espacio disponible en disco. Los archivos de captura requieren espacio en disco adicional. Cualquier pantalla moderna. Se recomienda una resolución de 1280 × 1024 o superior. Wireshark utilizará resoluciones HiDPI o Retina si están disponibles. Los usuarios avanzados encontrarán útiles varios monitores. Una tarjeta de red compatible para capturar 1.1 Descarga del paquete en debían Para descargar el paquete en nuestro equipo deberemos de mirar en la pagina oficial de descargas si incluye soporte para nuestro sistema operativo .\nVemos que no aparece en la lista ningún sistema operativo GNU/Linux , esto es porque Wireshark está disponible a través del sistema de empaquetado predeterminado en la mayoría de estas plataformas . Es decir esta presente en los repositorios de nuestra distribución , en el caso de que no estuviese tenemos el código fuente al ser un software libre y podríamos compilarlo .\nPodemos comprobar si esta disponible en nuestro sistema operativo visitando la pagina oficial :\nVemos que Debian aparece en la lista esto quiere decir que el paquete esta en los repositorios oficiales de debían.\nEn Debian contamos con el gestor de paquetes apt , así que podemos comprobar la versión del paquete disponible para la instalación y comprobar desde que repositorios se nos descargara con el siguiente comando :\nPara realizar la instalación de wireshark introduciremos el siguiente comando :\nA continuación para hacer capturas de red en el equipo necesitaremos permisos para nuestro usuario para ello , utilizaremos el siguiente comando :\n1.2 Comprobación de funcionamiento Ahora abriremos el programa para comprobar que todo funciona correctamente :\nAhora iniciaremos una captura de paquetes para ello si queremos hacerla sobre un interfaz en concreta pulsamos sobre ella , en mi caso usare la tarjeta de red inalámbrica wlo1 y haré una petición web a la pagina jagger.es .\nAquí te muestro la petición DNS que ha viajado desde mi portátil hasta el router .\n1.3 Componentes de wireshark generales Wireshark hace uso de unos determinados paquetes : Wireshark : el analizador de protocolos de red que todos conocemos . TShark : un analizador de protocolo de red de línea de comandos. Complementos y extensiones : extras para los motores de disección Wireshark y TShark Complementos Dissector : complementos con algunas disecciones extendidas. Complementos de estadísticas de árbol -:Estadísticas extendidas. Mate: motor de seguimiento y meta análisis : extensiones configurables por el usuario del motor de filtro de pantalla; consulte el Capítulo 12, MATE para obtener más detalles. MIB de SNMP: MIB de SNMP para una disección de SNMP más detallada. Herramientas : herramientas de línea de comandos adicionales para trabajar con archivos de captura Editcap : lee un archivo de captura y escribe algunos o todos los paquetes en otro archivo de captura. Text2Pcap : lee un volcado hexadecimal ASCII y escribe los datos en un archivo de captura pcap. Reordercap : reordena un archivo de captura por marca de tiempo. Mergecap : combina varios archivos de captura guardados en un único archivo de salida. Capinfos : proporciona información sobre los archivos de captura. Rawshark : filtro de paquetes sin procesar. Guía del usuario : instalación local de la Guía del usuario. Los botones de Ayuda en la mayoría de los cuadros de diálogo requerirán una conexión a Internet para mostrar las páginas de ayuda si la Guía del usuario no está instalada localmente. 2 Instalación de GNS3 en Debian 11 2.1 Introducción GNS3 es un simulador gráfico de red lanzado en 2008, que te permite diseñar topologías de red complejas y poner en marcha simulaciones sobre ellos,permitiendo la combinación de dispositivos tanto reales como virtuales.\nPara permitir completar simulaciones, GNS3 está estrechamente vinculada con:\nDynamips: un emulador de IOS que permite a los usuarios ejecutar imágenes de IOS . Dynagen: un front-end basado en texto para Dynamips . Qemu y VirtualBox: para permitir utilizar máquinas virtuales como un firewall PIX o estaciones de trabajo . VPCS: un emulador de PC con funciones básicas de networking . IOU: (IOS en Unix), compilaciones especiales de IOS provistas por Cisco para correr directamente en sistemas UNIX y derivados . Los requisitos mínimos para hacer uso de esta herramienta son :\nProcesador : 2 o más núcleos lógicos Virtualización: Se requieren extensiones de virtualización. Es posible que deba habilitar esto a través del BIOS de su computadora. Memoria RAM: 4 GB de RAM Almacenamiento : 1 GB de espacio disponible (la instalación de Windows es \u0026lt; 200 MB). Notas adicionales : Es posible que necesite almacenamiento adicional para su sistema operativo y las imágenes del dispositivo. 2.2 Instalación Lo primero que haremos antes de instalar sera comprobar que nuestro sistema este actualizado , para ello haremos un apt update y si tenemos paquetes desactualizados haremos un apt upgrade .\nA continuación instalaremos todas las dependencias que necesita GNS3 :\nAhora te describiré la función de los paquetes que vamos a instalar :\nPaquete Descripción python3-pip El módulo pip es el instalador de paquetes de Python. python3-pyqt5 El módulo PyQt5 expone la API de Qt5 a Python 3 . python3-pyqt5.qtsvg El módulo SVG de PyQt5 proporciona clases para mostrar el contenido de los archivos SVG. python3-pyqt5.qtwebsockets El módulo WebSockets de PyQt5 proporciona enlaces de Python 3 para la especificación WebSockets (tanto cliente como servidor). qemu Software de Virtualización , actualmente se encuentra dividido en varios paquetes . qemu-kvm Binarios de emulación de sistema completo QEMU . qemu-utils Binario de utilidades de emulación de QEMU . libvirt-clients Libvirt es un conjunto de herramientas en C para interactuar con las capacidades de virtualización de versiones recientes de Linux . libvirt-daemon-system Este paquete contiene los archivos de configuración para ejecutar el demonio libvirt como un servicio del sistema. Virtinst Este paquete contiene algunas utilidades de línea de comandos para crear y editar máquinas virtuales . wireshark Es un analizador de red que captura paquetes para su posterior análisis . xtightvncviewer Sistema de visualización remota que le permite ver un entorno de \u0026rsquo;escritorio\u0026rsquo; no solo en la máquina donde se está ejecutando, sino desde cualquier lugar en Internet . apt-transport-https Este es un paquete de transición ficticio: la compatibilidad con https . ca-certificates Contiene los certificados de las autoridades certificadoras que se incluyen en el navegador de Mozilla para permitir que las aplicaciones basadas en SSL . curl curl es una herramienta de línea de comandos para transferir datos con sintaxis URL . gnupg2 Se puede utilizar para cifrar datos y crear firmas digitales. Incluye una función avanzada de administración de claves y cumple con el estándar de Internet OpenPGP propuesto. software-properties-common Le permite administrar fácilmente su distribución y las fuentes de software de proveedores de software independientes. Una vez instalados estos paquetes , nos descargaremos GNS3 utilizando pip3 :\nAdemás nos fijaremos en la salida del comando para comprobar si hay algún error :\nLo siguiente sera instalar docker , el cual nos permitirá crear contenedores . Para ello importaremos su clave GPG para que nuestro sistema confié en el :\nLo siguiente sera añadir el repositorio a nuestro sistema para ello utilizaremos el siguiente comando:\nActualizaremos los repositorios que utiliza apt haciendo un apt update :\nY finalmente podremos instalar docker :\nAgregue las siguientes líneas a su /etc/apt/sources.list , para que podamos instalar dynamips y ubridge:\nPara poder instalar los paquetes necesarios de estos repositorios , añadiremos las claves gpg del mismo :\nActualizaremos los repositorios que utiliza apt haciendo un apt update :\nNos instalaremos los paquetes Dynamips y ubridge :\nSaldrá un recuadro como este , para indicar si los usuarios que no son superusuarios pueden capturar paquetes , le diremos que si en nuestro caso :\nPara evitar la instalación accidental de cualquier otra cosa de ese repositorio (por ahora), elimine o comente esas dos líneas en su archivo /etc/apt/sources.list y haga un apt update:\nTambién podemos eliminar la clave GPG de estos repositorios si lo deseamos :\nAñadiremos a los usuarios que vayan a utilizar la herramienta a los siguientes grupos :\nReinicie su sesión de usuario cerrando sesión y volviendo a iniciarla, o reiniciando el sistema para que se apliquen estos cambios .\n2.3 Nuestra primera topología en GNS3 Una vez reiniciado el sistema iniciaremos la aplicación , y nos saldrá un recuadro como este :\nAquí indicaremos que voy a correr las aplicaciones localmente en mi maquina .A continuación seleccionaremos la ruta del servidor , el nombre de host y el puerto asociado :\nSi todo ha sido correcto , nos dirá que se ha realizado correctamente :\nCuando abramos el programa , nos dará opción a crear un proyecto o podemos crear uno nuevo , en mi caso creare uno :\nSi nos fijamos en la parte izquierda del programa veremos los siguientes símbolos que sirven para lo siguiente :\nAñadiremos arrastrando 2 VPCS :\nLe añadiremos un Ethernet swicht :\nHaremos clic en el botón Agregar un enlace para dejar de agregar enlaces , nos quedaría así el escenario :\nPodemos hacer visible la interfaz a la cual los hemos conectado pulsando en el siguiente botón :\nEl botón verde \u0026ldquo;Reproducir\u0026rdquo; en la barra de herramientas GNS3 encenderá todos los dispositivos en la topología, mientras que el botón amarillo \u0026ldquo;Pausa\u0026rdquo; los suspenderá y el botón rojo \u0026ldquo;Detener\u0026rdquo; apagará todo en la topología:\nNos saldrá una advertencia , para que confirmemos si queremos añadir todos los dispositivos , le daremos a si :\nVeremos que tanto a la izquierda en el resumen de dispositivos como en las conexiones salientes de los dispositivos su “luz” de estado a cambiado de rojo a verde , puestos que estos ahora están encendidos :\nAhora abriremos una terminal en todos nuestros VPCS , con el siguiente botón :\nA través de estas terminales le asignaremos direcciones ips a nuestros dispositivos con el siguiente comando :\nUna vez configurada las tarjetas de red , comprobaremos si hay conectividad entre ellos haciendo un ping :\nAñadiremos un tercer VPCS a nuestro esquema :\nLo encenderemos y abriremos una terminal para configurarlo al igual que hemos hecho con los anteriores :\nY comprobare que esta nueva maquina tiene conectividad con las anteriores :\nSi queremos que se guarden las configuraciones de nuestros equipos introduciremos el comando save :\n2.4 Acceso a internet a través de NAT en GNS3 La manera mas fácil de conseguir acceso a internet es a través de la nube NAT .\nEsta cuenta con acceso a internet , así como un servicio DHCP corriendo con IPV4 .Para hacer uso de ella , la pondremos en nuestro escenario y la conectaremos en un swicht .\nA continuación si queremos salir a internet , tendremos que configurar nuestros clientes para que estos obtengan la configuración de red adecuada . Aprovecharemos que tenemos un servidor DHCP .\nPara que los clientes se configuren a través de este servicio introduciremos el comando dhcp :\nProbaremos a hacer un ping a google.es para comprobar la conectividad :\n3 Problemas comunes en la instalación 3.1 Error VPCS executable version must be \u0026gt;=0.6.1 but not 0.8 Este error viene al hacer la instalación de los VPCS , se descarga de los repositorios una versión que no admite actualmente el programa .\nPor suerte es muy fácil de solucionar , accederemos al repositorio del desarrollador en github y nos descargaremos el siguiente paquete :\nUna vez descargado lo descomprimiremos usando el siguiente comando :\nDonde hagamos este comando nos creara un directorio en el cual accederemos para compilar el programa :\nEjecutaremos el siguiente script :\nNos creara en esta ruta el directorio vpcs , este tendremos que añadirlo en gns3 :\nAccederemos a gns3 , pulsaremos CTRL + SHIFT + P para acceder al panel de preferencias . Una vez aquí nos desplazamos al apartado de las vpcs y seleccionamos la ruta del directorio que acabamos de generar :\nAplicamos los cambios y ya podríamos utilizar las vpcs .\n3.2 Xterm no instalado Este error aparece cuando queremos acceder a una consola de un dispositivo de nuestra tipología de red .Para solucionar este problema lo primero es cerrar GNS3 y a continuación dirigirnos a una terminal para descargarlo, utilizaremos el siguiente comando :\nVolveremos a abrir el programa y podremos acceder a las consolas de nuestras maquinas .\n4 Instalar imágenes IOS Si queremos añadir a nuestro sistema hardware real como puede ser un router cisco por ejemplo deberemos de acceder a la pagina oficial de GNS3 y descargar concretamente el que deseemos añadir en mi caso añadiré un cisco 3725 .\nSi pulsamos sobre el botón de descarga nos descargara un archivo con extensión , el cual es una plantilla .\nSi nos fijamos en este caso no tenemos la posibilidad de descargar la imagen desde este repositorio , nos dice que no hay link disponible . Para estos casos existe un repositorio de cisco el cual tiene todas las imágenes de sus productos –\u0026gt; tfr.org/cisco-ios\nPara saber cual nos tenemos que traer de aquí , abriremos gns3 y a través del menú superior izquierdo pulsaremos sobre el apartado file \u0026gt; import appilance , seleccionaremos la plantilla que vamos a importar . Le daremos a instalar en nuestro ordenador local :\nUna vez aquí nos , veremos el nombre del archivo y lo buscaremos en el repositorio externo , ya que podemos observar que no se encuentra el archivo\nEn este caso descargare , esta version que coincide con la plantilla que he descargado :\nCuando hayamos hecho esto tendremos el siguiente problema , las firmas de las imágenes no coincidirán para paliar ese paso marcaremos la opción allow custom files en la parte inferior y importaremos el binario que acabamos de descargar :\nNos informara que para la plantilla seleccionada , el archivo que hemos descargado del repositorio no coinciden los hashes . En nuestro caso es normal ya que la imagen no es la misma que tendría que venir con la plantilla , así que aceptaremos los riesgos .\nVeremos que cambiara el estado a listo para instalar , así que le daremos a siguiente en la parte inferior .\nNos pedirá confirmación para añadir nuestro dispositivo , confirmaremos la acción :\nNos informara de que nuestro dispositivo se ha añadido en las plantillas de los router , para este caso .\nAdemás nos informara del nombre que se le ha asignado .\nComo nos indico , lo encontraremos en la sección de routers :\nAhora haremos una pequeña prueba de funcionamiento , lo añadiremos a nuestro escenario y comprobaremos que podemos arrancarlo y conectarnos a la consola :\nVeremos la conexión a la consola es correcta :\n5 Instalación en Windows de GNS3 5.1 Paquetes necesarios para Windows Aunque tengamos instalado el software de GNS3 este hará uso de paquetes adicionales para realizar algunas funciones o incluso añadir nuevas funcionalidades como emular enrutadores de determinados fabricantes .\nArtículo Requerido Descripción WinPCAP Requerido Requerido para conectar GNS3 a su red informática. Utilizado por los nodos Cloud y NAT para permitir que sus proyectos se comuniquen con el mundo exterior. Npcap Opcional El reemplazo moderno de WinPCAP sabe solucionar problemas pero está menos probado que WinPCAP.Instale Npcap con la opción \u0026ldquo;Modo compatible con la API de WinPcap\u0026rdquo; seleccionada, si se usa sin WinPcap.Npcap puede coexistir con WinPcap, si esa opción no está seleccionada. Wireshark Recomendado Le permite capturar y ver el tráfico de red enviado entre nodos. Dynamips Requerido Requerido para ejecutar una instalación local de GNS3 con enrutadores Cisco. QEMU 3.1.0 y 0.11.0 Opcional Un software de virtualización .La versión anterior de Qemu 0.11.0 está instalada para admitir dispositivos ASA antiguos. Se recomienda utilizar la vm GNS3 en su lugar.\nVPCS Recomendado Un emulador de PC muy ligero que admite comandos básicos como ping y traceroute Cpulimit Opcional Se usa para evitar que QEMU use el 100% de su CPU (cuando se está ejecutando) en algunos casos, como con los dispositivos ASA antiguos GNS3 Requerido El software principal de GNS3.Esto siempre es obligatorio. Visor TightVNC Recomendado Un cliente VNC utilizado para conectarse a las interfaces gráficas de usuario del dispositivo. Solar-Putty Recomendado La nueva aplicación de consola predeterminada. Virt-viewer Recomendado Visualizador alternativo de máquinas virtuales de escritorio Qemu que tienen qemu-spice preinstalado. Intel Hardware Acceleration Manager (HAXM) Opcional Solo disponible en sistemas con CPU Intel (y VT-X habilitado), que no usan Hyper-V. Se utiliza para la aceleración de hardware de la emulación de Android, así como para QEMU. 5.2. Requisitos mínimos Para entornos pequeños en Windows los desarrolladores exigen tener como mínimo las siguientes características :\nCaracterísticas Requisitos Sistema operativo Windows 7 (64 bits) o posterior Procesador 2 o más núcleos lógicos Virtualización Se requieren extensiones de virtualización. Es posible que deba habilitar esto a través del BIOS de su ordenador . Memoria 4 GB de RAM Almacenamiento 1 GB de espacio disponible (la instalación de Windows es \u0026lt; 200 MB). 5.3 Instalación GNS3 Lo primero que tendremos que sera descargarnos el ejecutable oficial de su pagina web , para ello tendremos que estar registrados previamente .\nLanzaremos el ejecutable y nos pedirá permisos de administrados , se los concedemos :\nSaldrá una pantalla informándonos sobre el producto , le damos a next .\nA continuación deberemos de aceptar los términos y licencias de uso :\nNos preguntara donde queremos crear los atajos del programa , lo dejare por defecto ya que asi los añadirá al escritorio :\nA continuación debemos de prestar atención ya que debemos de seleccionar instalación local y todos los paquetes que vayamos a hacer uso , si hubiésemos instalado antes alguno de ellos los desmarcamos (Los mencionados en el punto 5.1) :\nSeleccionaremos la ruta donde se instalara el programa , yo dejare la predeterminada . También nos informa el espacio que necesitara la instalación :\nEsperaremos a que se realice la instalación :\nInstalación WinCap\nRequerido para conectar GNS3 a su red informática. Utilizado por los nodos Cloud y NAT para permitir que sus proyectos se comuniquen con el mundo exterior.\nMientras se realiza la instalación de GNS3 comenzara la instalación de todos los programas que hemos marcado anteriormente .\nNos mostrara información sobre el programa esta primera ventana así que le damos a siguiente :\nAceptamos la licencia de términos y uso :\nMarcamos la opción para que arranque automáticamente el driver y le damos a instalar\nNos informa de que la instalación a sido correcta y cerramos la ventana :\nInstalación Ncap\nEl reemplazo moderno de WinPCAP sabe solucionar problemas pero está menos probado que WinPCAP.Instale Npcap con la opción \u0026ldquo;Modo compatible con la API de WinPcap\u0026rdquo; seleccionada, si se usa sin WinPcap.Npcap puede coexistir con WinPcap, si esa opción no está seleccionada.\nOtra vez el mismo proceso , aceptamos los términos y licencias de uso .\nDejamos la opción marcada por defecto y le damos a install\nCuando finalice la instalación le damos a siguiente :\nY cerramos el instalador :\nVolvemos a GNS3 ya que el proceso de instalación ha quedado detenido mientras hemos instalado los componentes que va a hacer uso , esta se reanuda automáticamente :\nUna vez finalice la instalación , le damos a siguiente\nGNS3 nos ofrece una licencia gratuita de Solarwinds , le daremos a si :\nHabremos finalizado correctamente la instalación de GNS3\nAbriremos el programa y seleccionaremos correr los dispositivos en nuestra maquina local :\nAquí configuraremos nuestro servidor local de GNS3\nAnteriormente lo deje por defecto , si nuestra configuración es correcta nos dirá que la conexión se ha realizado satisfactoriamente :\nNos mostrara un resumen de la configuración dada anteriormente :\n5.4 Prueba de funcionamiento Montaremos el mismo escenario que en debian para comprobar su funcionamiento , el proceso es el mismo .\nConfiguraremos las direcciones ips de las maquinas y comprobamos que tengan conectividad a través de solarputty .\nPC1 :\nPC2:\nPodemos observar que ambos equipos tienen conectividad a través del escenario .\n6 Instalación Wireshark en Windows 6.1 Instalación La instalación de este producto es muy sencilla , si hemos instalado GNS3 anteriormente y hemos marcado la casilla de este , se nos habrá instalado automáticamente .\nPor el contrario si partimos desde cero podemos hacer su instalación , bajandonoslo de su sitio web oficial :\nCuando abramos el instalador nos pedirá permisos de administrador , se lo concedemos :\nSi al igual que yo lo has instalado con GNS3 nos detectara que ya existe una instalaron , así que yo la cancelare .\nSi no lo tuviésemos la instalación es idéntica a cualquier programa que hemos instalado en la practica . Aquí te lo muestro , lo primero que veras sera una pantalla informativa del ejecutable :\nAl igual que todos los programas te pedirá que aceptes los términos y condiciones de uso :\nSeleccionaremos los productos que deseemos instalar en mi caso todos :\nAdemás nos preguntara que accesos directos y donde los queremos crear\nSeleccionaremos la ruta donde queremos que se instale :\nSeleccionaremos si nos interesa el paquete Ncap .(Lo hemos instalado con GNS3)\nA continuación nos preguntara para instalar la extensión que nos permite analizar trafico USB , en mi caso la desmarcare ya que no me interesa .\nEsperaremos a que finalice la instalación y le daremos a siguiente :\nNos informara de que la instalación ha sido realizada correctamente :\n6.2 Prueba de funcionamiento He realizado una petición DNS a www.sevillafc.es y aquí podemos ver la consulta DNS :\n7 GNS VM Si queremos desplegar maquinas virtuales en una instancia virtual desplegaremos la maquina virtual que nos da GNS3 para que este lleve la carga de la Virtualización .\nNos descargaremos la OVA desde la pagina web oficial\nUna vez descargada la importaremos en Vmware y le daremos las características hardware que consideremos oportuno :\nUna vez echo esto abriremos GNS3 y editaremos las preferencias de GNS VM y seleccionaremos la maquina virtual que acabamos de importar :\nSe nos iniciara la maquina virtual y podremos ver los datos de la misma en la pestaña info :\nLanzaremos el set-up wizard desde la pestaña help de GNS3 y seleccionaremos la opción de ejecutar las apilances en una maquina virtual :\nSeleccionaremos la configuración de nuestra maquina virtual :\nSeleccionaremos de nuevo nuestra maquina virtual y las características hardware que deseemos :\nSolo nos quedara importar los dispositivos en la maquina virtual , esto se hace igual que hemos echo anteriormente cambiando el sitio donde lo importamos :\nSi queremos ver donde se ejecutara un dispositivo podemos verlo a través de preferencias :\nAdemás podemos ver en apartado servers sumarry el consumo de recursos de nuestras maquinas :\n8 Conclusión Podemos ver que la instalación es infinitamente mas cómoda en Windows ya que automáticamente te instala las dependencias, siendo la típica instalación de “siguiente a siguiente ” .\nAdemás en Windows al acabar la instalación el producto estaba listo para usarse y no he sufrido ningún error al iniciar el programa ni al usar sus características como si me ha pasado en Debian .\n9 Bibliografía Documentacion oficial wireshark\nPaquete wireshark en debian\nRequisitos mínimos wireshark\nError “VPCS executable version must be \u0026gt;=0.6.1 but not 0.8” Descarga VPCS\n","date":"September 8, 2023","hero":"/images/redes/instalacion_wireshark_gns3/portada_instalacion_wireshark_gns3.jpeg","permalink":"http://www.javiercd.es/posts/redes/instalacion_wireshark_gns3/instalacion-gns3-y-wireshark/","summary":"Instalacion GNS3 y Wireshark en Debian 1. Introducción Wireshark es un analizador de protocolos utilizado para realizar análisis y solucionar problemas en redes de comunicaciones, para análisis de datos y protocolos, y como una herramienta didáctica.\nAñade una interfaz gráfica y muchas opciones de organización y filtrado de información. Así, permite ver todo el tráfico que pasa a través de una red estableciendo la configuración en modo promiscuo de nuestra tarjeta de red .","tags":["Redes","Wireshark","GNS3"],"title":"Instalacion GNS3 y Wireshark en Debian"},{"categories":null,"contents":"NAT con iptables En este artículo aprenderás a configurar un pequeño escenario en el cual podrás configurar una serie de servicios. Crearás el escenario descrito a continuacion , además, harás que a través de una red interna, usando un servidor Linux, tengas acceso a Internet configurando SNAT en el mismo haciendo uso de iptables.\nInstalación del entorno de pruebas Vamos a instalar el siguiente entorno:\nConfiguración de VirtualBox Servidor debian :\nCliente windows\nCliente debian\nConfiguración de red Lo primero que haremos sera configurar las tarjetas de red de nuestras maquinas .\nServidor debian Editamos el fichero con nano /ect/network/interfaces como superusuario y añadimos las siguientes lineas .\nLos cuadros rojos corresponden a la configuración de las tarjetas de red enp0s3(tarjeta externa) y enp0s8(red interna). El cuadro azul corresponde a las reglas iptables para permitir las peticiones al exterior y prohibir las interiores .\nCliente debian Editamos el fichero con nano /etc/network/interfaces como superusuario y añadimos las siguientes lineas .La puerta de enlace sera la dirección ip de la tarjeta del servidor interna .\nCliente Windows 10 En windows 10 configuramos manualmente accediendo a conexiones de red \u0026gt; configuracion del adaptador \u0026gt; ipv4 y le asignamos lo siguiente .Al igual que el cliente debian cambiando la dirección ip . He puesto dns de Google porque utilizo mi red movil .\nConfiguración de nat en el servidor Modificar el fichero /etc/sysctl.conf. Hay que descomentar la línea :\nComprobamos si se ha aplicado\nComprobación de internet en los clientes Windows 10 Debian 11 ","date":"September 8, 2023","hero":"/images/servicios/nat_iptables/portada_iptables.jpeg","permalink":"http://www.javiercd.es/posts/servicios/nat_iptables/nat_iptables/","summary":"NAT con iptables En este artículo aprenderás a configurar un pequeño escenario en el cual podrás configurar una serie de servicios. Crearás el escenario descrito a continuacion , además, harás que a través de una red interna, usando un servidor Linux, tengas acceso a Internet configurando SNAT en el mismo haciendo uso de iptables.\nInstalación del entorno de pruebas Vamos a instalar el siguiente entorno:\nConfiguración de VirtualBox Servidor debian :","tags":["Servicios","NAT","SMR","IPTABLES","SNAT"],"title":"NAT con iptables"},{"categories":null,"contents":"servidor SSH bajo debian Gestión remota usando SSH Lo primeros que deberemos de hacer sera instalarnos el paquete en el servidor y el cliente :\nPor seguridad se suele no permitir la conexión del root al servidor; para ello, se debe modificar el archivo /etc/ssh/sshd_config, y se pone la siguiente opción:\nY reiniciamos el servicio para que se apliquen los cambios :\nConectarse al servidor ssh Vamos a instalarnos el cliente ssh, para ello:\nPara acceder desde el cliente al servidor tecleamos:\nNos abríamos conectado remotamente\nEjecución remota de aplicaciones gráficas Mediante ssh existe la posibilidad de ejecutar aplicaciones gráficas en el servidor y manejarlas y visualizarlas en el cliente. El servidor ssh deberá tener activada la redirección del protocolo X, es decir, deberá tener el siguiente parámetro en el archivo de configuración /etc/ssh/sshd_config:\nEn mi caso ya estaba habilitado , si no lo tuviésemos lo cambiamos y reiniciamos el servicio para que se apliquen los cambios . Ahora deberemos de conectarnos con el parámetro -X :\ny posteriormente podemos ejecutar cualquier aplicación gráfica, por ejemplo, gedit:\nSe nos abrirá el programa gráficamente :\nAhora vemos en el servidor que se ha creado :\nTransferir ficheros con ssh Para copiar un fichero desde el cliente al servidor introducimos el siguiente comando :\nAhora vamos a comprobar si se ha copiado al servidor :\nAcceso remoto por cifrado asimetricó Configuracion del acceso por claves Vamos a generar nuestras claves desde nuestro cliente :\nAhora vamos a añadirla a nuestro servidor :\nUna vez echo esto deshabilitamos el acceso con contraseña en el servidor editando el archivo /etc/ssh/sshd_config :\nA continuación solo debemos reiniciar el servicio y al volver a registrarnos, ya estaremos utilizando clave publica :\nSi nos intentamos registrar con usuario el cual no tenemos la clave publica nos dirá lo siguiente :\nCambio de puerto Ahora vamos a editar el fichero de configuración para indicar el puerto :\nY reiniciaremos el servicio :\nAhora si nos intentamos conectar como lo hemos hecho anterior mente , nos dara el siguiente error :\nPara conectarnos deberemos de especificar el puerto por el cual nos conectamos con -p :\nConectarnos con un cliente de acceso remoto usando túneles Usaremos kitty , cuando lo abramos en la primera pantalla introducimos la ip del servidor y el puerto que haya configurado en el servidor para el ssh en mi caso 2222\nAhora añadimos el puerto por el cual nos conectaremos usando el túnel y después la ip seguida de dos puntos y el mismo puerto .\nAhora introducimos nuestro usuario y contraseña y nos habremos conectado :\nSi queremos hacer lo mismo pero usando una clave publica desde windows , pulsamos windows +r y escribimos lo siguiente :\nY generamos las claves publicas :\nAhora vamos a la ruta que lo hemos guardado copiamos la clave publica y la introducimos en el servidor , por comodidad la he copiado desde el cliente usando ssh.\nUna vez añadida guardamos el archivo :\nVamos a desactivar la autenticación por contraseña y reiniciamos el servicio\nAhora desde el kitty deberemos de irnos al apartado ssh\u0026gt;auth , le damos a browse y seleccionamos nuestra clave privada , que deberá tener la extension .ppk . Yo la copie en otro directorio por comodidad para las pruebas .\nY nos conectamos :\nAquí hemos combinado conectarnos con kitty usando un túnel + otro puerto + clave publica .\nVNCserver Lo instalamos con el siguiente comando :\nA continuación configuramos las credenciales de configuración para administradores y usuarios de acceso con el siguiente comando :\nAhora vamos al cliente y introducimos la ip seguida del puerto por dos puntos, si no lo sabemos lo podemos mirar con :\nNos saldrá una advertencia al no estar cifrada la comunicación , le damos a continuar y introducimos la contraseña de acceso , que hayamos puesto anteriormente :\nComo no tenemos entrono grafico en el servidor no nos mostrara imagen pero podemos ver que hemos establecido conexión tanto en windows como en Linux :\nGestión de páginas web mediante ssh 1.Una vez creado los dos sitio virtuales deseamos establecer una conexión segura a cada uno de nuestros sitios, para ello debemos establecer un túnel ssh de la misma manera que lo hemos establecido para establecer una conexión remota por vnc .\n2.Crear un túnel desde el cliente ssh para que el acceso a la sección privada de la web de departamentos se establezca por el puerto 9999\n3.Con ambos túneles establecidos comprobar que el acceso a la web iesgn.org se puede realizar sin problemas por el puerto 80\nSolo he conseguido hacer a mi pagina por defecto , para eso hacemos un túnel con kitty por ejemplo:\nAhora añadimos los puertos origen y destino del puerto :\nAhora nos registramos con nuestro usuario :\nUna vez establecido el túnel introducimos en el navegador localhost:8888 :\nY así hemos establecido una conexión segura web .\nSi cerramos el túnel perderemos la conexión :\n","date":"September 8, 2023","hero":"/images/servicios/ssh/portada-ssh.png","permalink":"http://www.javiercd.es/posts/servicios/ssh/ssh/","summary":"servidor SSH bajo debian Gestión remota usando SSH Lo primeros que deberemos de hacer sera instalarnos el paquete en el servidor y el cliente :\nPor seguridad se suele no permitir la conexión del root al servidor; para ello, se debe modificar el archivo /etc/ssh/sshd_config, y se pone la siguiente opción:\nY reiniciamos el servicio para que se apliquen los cambios :\nConectarse al servidor ssh Vamos a instalarnos el cliente ssh, para ello:","tags":["Servicios","NAT","SMR","IPTABLES","SNAT","SSH","FORWARDING"],"title":"SSH bajo debian "},{"categories":null,"contents":"Underworld enroutamiento básico en cisco y ACLS Practica basica de enroutamiento en cisco y configuracion de ACLS , tenemos 4 reinos en los cuales en primer lugar queremos lograr que se comuniquen , posteriormente iremos poniendo una serie de reglas para restringir esto.\nIntroducción Vives en UNDERWORLD. En tu mundo, se presentan diferentes tipos de especies con un único fin, “cruzarse” entre sí. Estas criaturas son:\nVAMPIROS\nLICÁNTROPOS: hombres lobo con la capacidad de regresar a su estado humano.\nHOMBRES LOBO: hombres lobo que tras su primera conversión a lobo, no pudieron regresar a su estado humano.\nHUMANOS: unos mierdecillas.\nTÚ: un guerrero informático con superpoderes como darse la vuelta a un juego que todavía no ha salido al mercado o poseer la facultad de volverse invisible cuando sale de fiesta y trata de cortejar a una fémina diciéndole frases del tipo: ¿quieres que te compile el kernel nena?\nEl aspecto de UNDERWORLD es el siguiente:\n1.Enturar el escenario Tablas de enroutamiento a “papel” ROUTER HUMANO 192.168.1.0/24 0.0.0.0 F0/0 192.168.2.0/24 0.0.0.0 F1/0 192.168.3.0/24 192.168.2.2 F1/0 192.168.4.0/24 192.168.2.2 F1/0 192.168.5.0/24 192.168.2.2 F1/0 192.168.6.0/24 192.168.2.2 F1/0 192.168.7.0/24 192.168.2.2 F1/0 0.0.0.0/0 192.168.2.2 F1/0 ROUTER VAMPIROS 192.168.1.0/24 192.168.2.1 F1/0 192.168.2.0/24 0.0.0.0 F1/0 192.168.3.0/24 0.0.0.0 F0/0 192.168.4.0/24 0.0.0.0 F2/0 192.168.5.0/24 192.168.4.2 F2/0 192.168.6.0/24 192.168.4.2 F2/0 192.168.7.0/24 192.168.4.2 F2/0 0.0.0.0/0 192.168.4.2 F2/0 ROUTER LICÁNTROPOS 192.168.1.0/24 192.168.4.1 F2/0 192.168.2.0/24 192.168.4.1 F2/0 192.168.3.0/24 192.168.4.1 F2/0 192.168.4.0/24 0.0.0.0 F2/0 192.168.5.0/24 0.0.0.0 F0/0 192.168.6.0/24 0.0.0.0 F1/0 192.168.7.0/24 192.168.6.2 F1/0 0.0.0.0/0 192.168.4.1 F1/0 ROUTER HOMBRE LOBO 192.168.1.0/24 192.168.6.1 F1/0 192.168.2.0/24 192.168.6.1 F1/0 192.168.3.0/24 192.168.6.1 F1/0 192.168.4.0/24 192.168.6.1 F1/0 192.168.5.0/24 192.168.6.1 F1/0 192.168.6.0/24 0.0.0.0 F1/0 192.168.7.0/24 0.0.0.0 F0/0 0.0.0.0/0 192.168.6.1 F1/0 2.Configuración direcciones Ips interfaces Router humanos Guardamos la configuración :\nRouter vampiros Guardamos la configuración :\nRouter licántropos Guardamos la configuración :\nRouter vampiros Guardamos la configuración :\n3. Añadiendo la tabla de enroutamiento a los routers Router humanos Nos creara por defecto las rutas a las redes que estamos conectados solo necesitaremos añadir la ruta por defecto :\nNos quedaría la tabla de enroutamiento :\nGuardamos la configuración :\nRouter vampiros Añadiremos las siguientes rutas :\nAsí quedaría la tabla de enroutamiento :\nGuardamos la configuración :\nRouter licántropos Añadimos las siguientes rutas :\nAsí quedaría nuestra tabla de enroutamiento :\nGuardamos la configuración :\nRouter hombres lobo Añadimos las siguientes rutas :\nAsí quedaría nuestra tabla de enroutamiento :\nGuardamos la configuración :\n4.Prueba de enroutamiento Para no hacer muy extenso este apartado comprobare que desde PC1 llego a todos los PCs:\n5.Configuración ACLs Todo el mundo utiliza la red para mandarse mensajitos y ligar (por lo que deberás configurar la red para que esto sea posible en un principio, es decir, que todos los equipos tengan conexión entre sí). Tú, que ya estás hasta la *#%?! de tanto bicho raro como consecuencia de los cruces que se producen cuando un vampiro se cruza por ejemplo con un licántropo y el hijo de éstos con un hombre lobo y así sucesivamente, decides ponerle fin a la historia haciendo lo siguiente, metiéndole unas cuantas ACLs a los routers que los comunican:\nLos VAMPIROS no podrán comunicarse con el resto de especies. Creamos la regla para denegar el trafico de la red 192.168.3.0:\nLa aplicamos a la interfaz FastEthernet 0/0(192.168.3.1) y la aplicamos a la salida de esta :\nComprobaremos que los PCs de la red de Vampiros no pueden comunicarse con el resto , nos dice que hay una ACL cortándonos el paso :\nSi desde cualquier otro reino nos comunicamos con ellos los mensajes serán capaces de llegar a ellos sin embargo la respuesta no llegaran ya que la ACL lo impide , la respuesta es cortada ya que sale de la red de los vampiros :\nLos HOMBRES LOBO y los LICÁNTROPOS, dado que no son tan repulsivos cuando se cruzan, podrán comunicarse entre sí. Con el resto de especies no tendrán comunicación. Este apartado podemos darle diferentes soluciones , yo he optado por poner una ACL , en la interfaz F2/0 del router de licántropos .\nCreamos la ACL :\nY la aplicamos de salida de la interfaz F2/0 de salida :\nComprobaremos que la ACL funciona , haciendo pings entre las maquinas.\nDesde PC7 vemos que no nos permite salir del router de licántropos , este nos corta la comunicación pero sin embargo podemos llegar a las demás redes :\nDesde PC5 podemos observar el mismo resultado :\nDesde PC1 vemos que no obtenemos respuesta ya que solo estamos cortando el trafico de salida impidiendo que las maquinas de “dentro” se comuniquen con las de fuera .\nHUMANOS tampoco podrán comunicarse con el resto de especies\nCon el esquema actual de ACLs no seria necesario implementar una nueva regla en ya que con el esquema actual no es posible la comunicación con ellos . Aunque los mensajes que PC1 realice lleguen a su destino este no recibirá ninguna respuesta .\nPero si aun así queremos impedir que los humanos puedan enviar mensajes a los demás desde su red implementaremos la siguiente regla en su router :\nAhora estamos cortando los mensajes de los humanos desde el Router 1:\n6.Servidor DHCP Al final decides hacer negocio con las especies raras porque no tienen ni pajolera idea de informática y eres contratado por estos entes malignos para que lleves a cabo las siguientes tareas:\nHombres lobo\nLos hombres lobo que son bastante burros metiendo direcciones IP a sus máquinas, te piden que les configures el servicio DHCP para que todas sus máquinas reciban automáticamente una IP libre:\nTendremos que hacer los siguientes pasos :\nEl comando ip dhcp excluded-address 192.168.7.1 –\u0026gt; Señalamos las direcciones que no queremos que se repartan por DHCP , es decir las exclusiones . El comando ip dhcp pool HOMBRES_LOBO nombramos al rango de direcciones que estamos repartiendo Nos meterá a la configuración del rango, ahora le decimos la red que queremos que reparta las direcciones network 192.168.7.0 255.255.255.0 Ahora le indicaremos que puerta de enlace queremos que asigne default-router 192.168.7.1 Si quisiéramos configurar un servidor DNS , por ejemplo el de google seria así dns-server 8.8.8.8 Podemos ver que el servidor DHCP esta funcionando correctamente con los parámetros que le hemos indicado anteriormente :\nLicántropos\nLos licántropos por su parte, te contratan para que les asignes también por DHCP sus IPs, pero te indican que no pueden recibir las primeras 10 direcciones de su rango (sin contar la de red ni la de la puerta de enlace), ya que éstas, están reservadas para los jefes de su clan que están de viaje y volverán en unos días.\nDeclaramos las ips que vamos a excluir :\nNombramos al rango de direcciones que estamos repartiendo para así poder configurarlo:\nLe decimos la red que queremos que reparta las direcciones :\nAhora le indicaremos que puerta de enlace queremos que asigne :\nComprobaremos que el servidor dhcp esta funcionando :\n7.Modificación ACLs Permitir ligar con las vampiros\nDe tanto hacer negocio con los vampiros, te fijas en un par de vampiritas que están de muy buen ver y te gustaría poder enviarles mensajitos desde el chalet que te acabas de comprar en HUMANLAND con el pastizal que les estás sacando a las pobres “criaturicas”. Tu IP es la 192.168.1.4 y la de SELENE y SONJA son la 192.168.3.4 y 192.168.3.5 respectivamente. Añade una máquina a HUMANLAND para tu equipo denominado IT KNIGHT y 2 máquinas denominadas SELENE y SONJA con las mencionadas IPs en TRANSILVANIA.\nSi queremos realizar esto deberemos de configurar ACLs avanzadas para poder controlar el origen y el destino de los paquetes.\nLa sintaxis es bastante sencilla en este caso :\npermit ip IP_ORIGEN WILDCARD IP_DESTINO WILDCARD Crearemos la ACL para los humanos :\nTambién crearemos la ACL para los vampiros :\nLa aplicaremos a la interfaz de entrada en cada red , ambas son la FastEthernet 0/0 :\n*****Deberemos de haber quitado anteriormente las lista asignada a la interfaz si no dará un error , para quitarla es el mismo comando que para ponerla poniendo un no delante .\nAhora comprobaremos la efectividad de estas reglas que hemos implementado :\nIT KNIGHT –\u0026gt; SELENE y SONJA\nVemos que solo nos permite el trafico hacia estos dos host específicos tal y como hemos indicado en nuestras ACLs\nSELENE –\u0026gt; IT KNIGHT\nVemos que solo nos permite el trafico hacia estos dos host específicos tal y como hemos indicado en nuestras ACLs , si intentamos comunicarnos con otro host cortara el trafico la ACL:\nSONJA–\u0026gt; IT KNIGHT\nVemos que solo nos permite el trafico hacia estos dos host específicos tal y como hemos indicado en nuestras ACLs , si intentamos comunicarnos con otro host cortara el trafico la ACL:\nTambién podemos ver las estadísticas de la ACL en el router fijándonos en los hits de la regla para ver si están funcionando :\nAunque en ninguna de las listas hemos especificado en deny any , no seria necesario ya que esta implícito , es decir por defecto al no cumplirse ninguna regla desechara el trafico .\n8. Servidor web Desde que no se puede ligar en UNDERWORLD, están todos más aburridos que un ajo, así que decides ponerles un servidor WEB interno a UNDERWORLD. Añade al router PUENTE 1, un servidor denominado FICHEROS que tendrá la IP 192.168.8.2/24, creando las ACLs necesarias para que la comunidad entera de UNDERWORLD, pueda entretenerse viendo algunas web chulas.\nLo primero sera configurar la nueva interfaz del router de los HUMANOS:\nLo siguiente sera configurar para nuestro esquema actual en el router de VAMPIROS la ruta a la nueva red para que se route el escenario correctamente :\nYa por ultimo configuraremos la ip de nuestro debian de forma estática con la direccion 192.168.8.2:\nAdemás le instalaremos apache (deberemos hacerlo previamente conectado a la nube NAT ) :\nUna vez ya tenemos el servidor web preparado y enrutado en nuestro escenario , vamos a modificar las distintas ACLs para que solo puedan llegar al servidor web por el puerto 80 .\nEn el router de los humanos añadimos la siguiente regla , la cual permite todo el trafico hacia el host 192.168.8.2 que vaya al puerto 80:\nPara refrescar la lista y que se apliquen los cambios deberemos de volver a asignársela al router :\nAhora haremos lo mismo con el router de los vampiros ya que tiene configuradas ACLs extendidas al igual que los humanos :\nAhora vamos a configurar una ACL avanzada para los licántropos y los hombres lobo :\nVamos a comprobar que NO podemos hacerle ping al servidor desde los VPCs:\nEn resumen hemos mantenido las reglas anteriores pero hemos permitido el trafico al servidor web siempre y cuando venga por el puerto 80 , por eso no podemos hacerle ping .\nVamos a comprobar que podemos acceder al servidor web desde las redes : –\u0026gt;HUMANOS :\n–\u0026gt;VAMPIROS:\n–\u0026gt;LICÁNTROPOS:\n–\u0026gt; HOMBRES LOBO :\n","date":"September 8, 2023","hero":"/images/redes/underworld/portada_underwolrd.webp","permalink":"http://www.javiercd.es/posts/redes/underworld/underworld/","summary":"Underworld enroutamiento básico en cisco y ACLS Practica basica de enroutamiento en cisco y configuracion de ACLS , tenemos 4 reinos en los cuales en primer lugar queremos lograr que se comuniquen , posteriormente iremos poniendo una serie de reglas para restringir esto.\nIntroducción Vives en UNDERWORLD. En tu mundo, se presentan diferentes tipos de especies con un único fin, “cruzarse” entre sí. Estas criaturas son:\nVAMPIROS\nLICÁNTROPOS: hombres lobo con la capacidad de regresar a su estado humano.","tags":["Redes","Wireshark","GNS3","Cisco","Enroutamiento","ACLS"],"title":"Underworld"}]