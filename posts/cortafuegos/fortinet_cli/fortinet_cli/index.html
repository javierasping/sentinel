<!doctype html><html lang=es><head><title>Fortinet CLI</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.1513a7a3d4fef5560fac4fdb0099e7e2185a964b2f733af377e81e845185e655.css integrity="sha256-FROno9T+9VYPrE/bAJnn4hhalksvczrzd+gehFGF5lU="><link rel=icon type=image/png href=/images/site/avatar_hu11723030549170604370.jpg><meta property="og:url" content="https://www.javiercd.es/posts/cortafuegos/fortinet_cli/fortinet_cli/"><meta property="og:site_name" content="Atlas"><meta property="og:title" content="Fortinet CLI"><meta property="og:description" content="Fortinet CLI"><meta property="og:locale" content="es"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-28T10:00:00+00:00"><meta property="article:modified_time" content="2024-03-28T10:00:00+00:00"><meta property="article:tag" content="FIREWALL"><meta property="article:tag" content="FORTINET"><meta name=twitter:card content="summary"><meta name=twitter:title content="Fortinet CLI"><meta name=twitter:description content="Fortinet CLI"><meta name=description content="Fortinet CLI"><script async src="https://www.googletagmanager.com/gtag/js?id=G-GVDYVWJLRH"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GVDYVWJLRH")}</script><script>theme=localStorage.getItem("darkmode:color-scheme")||"system",theme=="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/><img src=/images/site/masthead_hu12155983672104127805.png id=logo alt=Logo>
Atlas</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Inicio</a></li><li class=nav-item><a class=nav-link href=/#about>Sobre mi</a></li><li class=nav-item><a class=nav-link href=/#skills>Competencias</a></li><li class=nav-item><a class=nav-link href=/#education>Educación</a></li><li class=nav-item><a class=nav-link href=/#recent-posts>Últimas publicaciones</a></li><li class=nav-item><a class=nav-link href=/#accomplishments>Certificaciones</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/site/masthead_hu12155983672104127805.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/masthead_hu12155983672104127805.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Búsqueda data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree><li><i data-feather=plus-circle></i><a class=list-link href=/posts/iaw/> Aplicaciones webs</a><ul><li><a class=list-link href=/posts/iaw/lamp/ title="Instalación pila LAMP">Instalación pila LAMP</a></li><li><a class=list-link href=/posts/iaw/lemp/ title="Instalación pila LEMP">Instalación pila LEMP</a></li><li><a class=list-link href=/posts/iaw/wordpress/ title="Wordpress LAMP">Wordpress LAMP</a></li><li><a class=list-link href=/posts/iaw/wordpress_lemp/ title="Wordpress LEMP">Wordpress LEMP</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/base_de_datos/> Base de datos</a><ul><li><a class=list-link href=/posts/base_de_datos/acceso_remoto_mariadb/ title="Acceso remoto en MariaDB">Acceso remoto en MariaDB</a></li><li><a class=list-link href=/posts/base_de_datos/oracle_acceso_remoto/ title="Configuración de acceso remoto en Oracle">Configuración de acceso remoto en Oracle</a></li><li><a class=list-link href=/posts/base_de_datos/instalacion_oracle_19c_debian12/ title="Instalación de Oracle 19c bajo Debian 12">Instalación de Oracle 19c bajo Debian 12</a></li><li><a class=list-link href=/posts/base_de_datos/instalar_postgresql/ title="Instalación de PostgreSQL en Debian 12">Instalación de PostgreSQL en Debian 12</a></li><li><a class=list-link href=/posts/base_de_datos/instalar_mariadb/ title="Instalar MariaDB en Debian">Instalar MariaDB en Debian</a></li><li><a class=list-link href=/posts/base_de_datos/interconexion_de_servidores/ title="Interconexión de servidores de bases de datos">Interconexión de servidores de bases de datos</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/ci_cd/> CI/CD Jenkins</a><ul><li><a class=list-link href=/posts/ci_cd/practica_jenkins/ title="Práctica CI/CD con Jenkins">Práctica CI/CD con Jenkins</a></li><li><a class=list-link href=/posts/ci_cd/taller1_jenkins/ title="Taller 1 Corrector ortográfico de documentos markdown (test)">Taller 1 Corrector ortográfico de documentos markdown (test)</a></li><li><a class=list-link href=/posts/ci_cd/taller2_jenkins/ title="Taller 2 Comprobación de HTML5 válido y despliegue en surge.sh (test y deploy)">Taller 2 Comprobación de HTML5 válido y despliegue en surge.sh (test y deploy)</a></li><li><a class=list-link href=/posts/ci_cd/taller3_jenkins/ title="Taller 3 Integración continua de aplicación django (Test)">Taller 3 Integración continua de aplicación django (Test)</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/cortafuegos/> Cortafuegos</a><ul class=active><li><a class="active list-link" href=/posts/cortafuegos/fortinet_cli/ title="Fortinet CLI">Fortinet CLI</a></li><li><a class=list-link href=/posts/cortafuegos/fortinet_uno/ title="Perimetral con Fortinet I">Perimetral con Fortinet I</a></li><li><a class=list-link href=/posts/cortafuegos/fortinet_dos/ title="Perimetral con Fortinet II">Perimetral con Fortinet II</a></li><li><a class=list-link href=/posts/cortafuegos/nftables_uno/ title="Perimetral con Nftables I">Perimetral con Nftables I</a></li><li><a class=list-link href=/posts/cortafuegos/nftables_dos/ title="Perimetral con Nftables II">Perimetral con Nftables II</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/docker/> Docker</a><ul><li><a class=list-link href=/posts/docker/taller1/ title="Taller 1 Almacenamiento y redes en Docker">Taller 1 Almacenamiento y redes en Docker</a></li><li><a class=list-link href=/posts/docker/taller2/ title="Taller 2 Escenarios multicontenedor en Docker">Taller 2 Escenarios multicontenedor en Docker</a></li><li><a class=list-link href=/posts/docker/taller3/ title="Taller 3 Creación de imágenes Docker">Taller 3 Creación de imágenes Docker</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/drivers/> Drivers Linux</a><ul><li><a class=list-link href=/posts/drivers/nvidia_optimus/ title="Como elegir que gráfica usar en mi portátil con Linux">Como elegir que gráfica usar en mi portátil con Linux</a></li><li><a class=list-link href=/posts/drivers/nvidia_driver/ title="Drivers Nvidia">Drivers Nvidia</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/redes/> Redes</a><ul><li><a class=list-link href=/posts/redes/android_gns3/ title="Android GNS3-KVM">Android GNS3-KVM</a></li><li><a class=list-link href=/posts/redes/comandos_de_supervision_de_redes/ title="Comandos de supervisión de redes">Comandos de supervisión de redes</a></li><li><a class=list-link href=/posts/redes/switches_gns3/ title="Configuración de switches en GNS3">Configuración de switches en GNS3</a></li><li><a class=list-link href=/posts/redes/enroutamiento_openstack/ title="Enrutamiento en OpenStack">Enrutamiento en OpenStack</a></li><li><a class=list-link href=/posts/redes/escenario_ipv6_basico/ title="Escenario IPv6 Básico">Escenario IPv6 Básico</a></li><li><a class=list-link href=/posts/redes/instalar_gns3_debian12/ title="Instalacion GNS3 en Debian 12">Instalacion GNS3 en Debian 12</a></li><li><a class=list-link href=/posts/redes/instalacion_wireshark_gns3/ title="Instalacion GNS3 y Wireshark">Instalacion GNS3 y Wireshark</a></li><li><a class=list-link href=/posts/redes/configuracion_de_nat/ title="NAT en Cisco y Linux">NAT en Cisco y Linux</a></li><li><a class=list-link href=/posts/redes/arp/ title="Protocolo ARP">Protocolo ARP</a></li><li><a class=list-link href=/posts/redes/tuneles_ipv6/ title="Túneles IPV6">Túneles IPV6</a></li><li><a class=list-link href=/posts/redes/underworld/ title=Underworld>Underworld</a></li><li><a class=list-link href=/posts/redes/underworld_evolution/ title="Underworld evolution">Underworld evolution</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/seguridad/> Seguridad</a><ul><li><a class=list-link href=/posts/seguridad/https_autofirmado/ title=HTTPS>HTTPS</a></li><li><a class=list-link href=/posts/seguridad/forense/ title="Informática forense">Informática forense</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/servicios/> Servicios</a><ul><li><a class=list-link href=/posts/servicios/apache/ title=Apache>Apache</a></li><li><a class=list-link href=/posts/servicios/dhcp/ title=DHCP>DHCP</a></li><li><a class=list-link href=/posts/servicios/dns/ title=DNS>DNS</a></li><li><a class=list-link href=/posts/servicios/ftp/ title=FTP>FTP</a></li><li><a class=list-link href=/posts/servicios/nat_iptables/ title="NAT con iptables">NAT con iptables</a></li><li><a class=list-link href=/posts/servicios/ssh/ title=SSH>SSH</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/sistemas/> Sistemas</a><ul><li><a class=list-link href=/posts/sistemas/ad_ubuntu/ title="Active Directory en Ubuntu">Active Directory en Ubuntu</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/sistemas/comandos_linux/> Comandos en Linux</a><ul><li><a class=list-link href=/posts/sistemas/comandos_linux/ejercicios_de_manejo_de_modulos/ title="Ejercicios de manejo de módulos">Ejercicios de manejo de módulos</a></li><li><a class=list-link href=/posts/sistemas/comandos_linux/ejercicios_de_modificacion_de_parametros_del_kernel/ title="Ejercicios de modificación de parámetros del kernel">Ejercicios de modificación de parámetros del kernel</a></li><li><a class=list-link href=/posts/sistemas/comandos_linux/ejercicios_gestion_de_paqueteria/ title="Ejercicios gestión de paquetería">Ejercicios gestión de paquetería</a></li><li><a class=list-link href=/posts/sistemas/comandos_linux/empaquetadores_compresores/ title="Empaquetadores y compresores">Empaquetadores y compresores</a></li><li><a class=list-link href=/posts/sistemas/comandos_linux/gestion_de_paquetes/ title="Gestión de paquetes">Gestión de paquetes</a></li><li><a class=list-link href=/posts/sistemas/comandos_linux/comandos_procesos/ title="Procesos en Linux">Procesos en Linux</a></li><li><a class=list-link href=/posts/sistemas/comandos_linux/programacion_tareas/ title="Programación de tareas">Programación de tareas</a></li></ul></li><li><a class=list-link href=/posts/sistemas/comparticion_de_directorios_en_windows/ title="Compartir recursos en Windows">Compartir recursos en Windows</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/sistemas/compilaciones_linux/> Compilaciones en Linnux</a><ul><li><a class=list-link href=/posts/sistemas/compilaciones_linux/compilacion_de_un_kernel/ title="Compilación de un kernel">Compilación de un kernel</a></li><li><a class=list-link href=/posts/sistemas/compilaciones_linux/compilacion_de_un_programa_en_c_utilizando_un_makefile/ title="Compilación de un programa en C utilizando un Makefile">Compilación de un programa en C utilizando un Makefile</a></li></ul></li><li><a class=list-link href=/posts/sistemas/activacion_selinux/ title="Configuración activación de SELinux">Configuración activación de SELinux</a></li><li><a class=list-link href=/posts/sistemas/creacion_de_un_sistema_automatizado_de_instalaci%C3%B3n/ title="Creación de un sistema automatizado de instalación">Creación de un sistema automatizado de instalación</a></li><li><a class=list-link href=/posts/sistemas/samba_debian/ title="Instalar y configurar samba en Debian">Instalar y configurar samba en Debian</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/sistemas/migraciones/> Migraciones en Linnux</a><ul><li><a class=list-link href=/posts/sistemas/migraciones/eliminacion_systemd/ title="Eliminación de systemd">Eliminación de systemd</a></li><li><a class=list-link href=/posts/sistemas/migraciones/paso_de_centos_stream_8_a_centos_stream_9/ title="Paso de CentOS stream 8 a CentOS stream 9">Paso de CentOS stream 8 a CentOS stream 9</a></li><li><a class=list-link href=/posts/sistemas/migraciones/migracion_sistema_de_ficheros/ title="Sistema de ficheros">Sistema de ficheros</a></li><li><a class=list-link href=/posts/sistemas/migraciones/transformaci%C3%B3n_instancia_cloud/ title="Transformación instancia cloud">Transformación instancia cloud</a></li></ul></li><li><a class=list-link href=/posts/sistemas/nfs_debian/ title="NFS en Debian">NFS en Debian</a></li><li><a class=list-link href=/posts/sistemas/recoleccion_logs_journald/ title="Recolección centralizada de logs journald">Recolección centralizada de logs journald</a></li><li><a class=list-link href=/posts/sistemas/ssh_windows/ title="Servicio ssh en Windows">Servicio ssh en Windows</a></li><li><a class=list-link href=/posts/sistemas/almacenamiento_servidor_independiente/ title="Storage Spaces en Windows Server">Storage Spaces en Windows Server</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/vpn/> VPN</a><ul><li><a class=list-link href=/posts/vpn/acceso_remoto_strongswang/ title="Acceso remoto Ipsec StrongSwan">Acceso remoto Ipsec StrongSwan</a></li><li><a class=list-link href=/posts/vpn/acceso_remoto_openvpn/ title="Acceso remoto OpenVPN">Acceso remoto OpenVPN</a></li><li><a class=list-link href=/posts/vpn/acceso_remoto_wireguard/ title="Acceso remoto Wireguard">Acceso remoto Wireguard</a></li><li><a class=list-link href=/posts/vpn/comparativa_ovpn_wire/ title="Comparativa OpenVPN y Wireguard">Comparativa OpenVPN y Wireguard</a></li><li><a class=list-link href=/posts/vpn/ipsec_cisco/ title="Site-to-Site IPsec Cisco">Site-to-Site IPsec Cisco</a></li><li><a class=list-link href=/posts/vpn/site_to_site_fortinet/ title="Site-to-Site IPsec Fortinet">Site-to-Site IPsec Fortinet</a></li><li><a class=list-link href=/posts/vpn/site_to_site_openvpn/ title="Site-to-Site OpenVPN">Site-to-Site OpenVPN</a></li><li><a class=list-link href=/posts/vpn/site_to_site_wireguard/ title="Site-to-Site Wireguard">Site-to-Site Wireguard</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/cortafuegos/fortinet_cli.png)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author/john_hu4933709943860921887.png alt="Author Image"><h5 class=author-name>Francisco Javier Cruces Doval</h5><p class=text-muted>jueves, 28 de marzo de 2024 | 9 minutos</p></div><div class=title><h1>Fortinet CLI</h1></div><div class=tags><ul style=padding-left:0><li class=rounded><a href=/tags/firewall/ class="btn btn-sm btn-info">FIREWALL</a></li><li class=rounded><a href=/tags/fortinet/ class="btn btn-sm btn-info">FORTINET</a></li></ul></div><div class=post-content id=post-content><h2 id=equivalencia-de-gui-a-cli>Equivalencia de GUI a CLI</h2><p>Inicialmente, empecé la práctica utilizando la línea de comandos (CLI) sin embargo, encontré que resulta más cómodo realizarla desde la interfaz gráfica. Por eso, decidí establecer una equivalencia entre las diferentes acciones que he llevado a cabo durante la práctica y compararlas con su contraparte en la terminal.</p><blockquote><p>[!NOTE]<br>En este post hago un pequeño resumen de las equivalencias entre la GUI y la CLI de Fortinet que he utilizado en los 2 post de cortafuegos Fortinet.</p></blockquote><h3 id=configurar-una-interfaz>Configurar una interfaz</h3><p>Como ya tenemos el cortafuegos configurado tenemos 2 opciones a la hora de ver la configuración de una determinada interfaz .</p><p>Ver la configuración de todas las interfaces :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>show system interface
</span></span></code></pre></div><p>O especificar una en concreto :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>show system interface port1
</span></span></code></pre></div><p>Si observamos la configuración de las tres interfaces que he establecido durante la práctica, podemos notar que la sintaxis es muy sencilla. Prácticamente, incluso sin tener conocimientos previos sobre el tema, es fácil de comprender.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show system interface </span>
</span></span><span style=display:flex><span>config system interface
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>        set vdom <span style=color:#e6db74>&#34;root&#34;</span>
</span></span><span style=display:flex><span>        set ip 192.168.122.77 255.255.255.0
</span></span><span style=display:flex><span>        set allowaccess https http fgfm
</span></span><span style=display:flex><span>        set type physical
</span></span><span style=display:flex><span>        set alias <span style=color:#e6db74>&#34;WAN&#34;</span>
</span></span><span style=display:flex><span>        set lldp-reception enable
</span></span><span style=display:flex><span>        set role wan
</span></span><span style=display:flex><span>        set snmp-index <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;port2&#34;</span>
</span></span><span style=display:flex><span>        set vdom <span style=color:#e6db74>&#34;root&#34;</span>
</span></span><span style=display:flex><span>        set ip 192.168.100.1 255.255.255.0
</span></span><span style=display:flex><span>        set allowaccess ping https ssh http fgfm
</span></span><span style=display:flex><span>        set type physical
</span></span><span style=display:flex><span>        set alias <span style=color:#e6db74>&#34;LAN&#34;</span>
</span></span><span style=display:flex><span>        set device-identification enable
</span></span><span style=display:flex><span>        set lldp-transmission enable
</span></span><span style=display:flex><span>        set monitor-bandwidth enable
</span></span><span style=display:flex><span>        set role lan
</span></span><span style=display:flex><span>        set snmp-index <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;port3&#34;</span>
</span></span><span style=display:flex><span>        set vdom <span style=color:#e6db74>&#34;root&#34;</span>
</span></span><span style=display:flex><span>        set ip 192.168.200.1 255.255.255.0
</span></span><span style=display:flex><span>        set type physical
</span></span><span style=display:flex><span>        set alias <span style=color:#e6db74>&#34;DMZ&#34;</span>
</span></span><span style=display:flex><span>        set device-identification enable
</span></span><span style=display:flex><span>        set lldp-transmission enable
</span></span><span style=display:flex><span>        set role lan
</span></span><span style=display:flex><span>        set snmp-index <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    next 
</span></span></code></pre></div><p>Como puedes ver en la interfaz puerto 1 que es la que corresponde a la WAN , anteriormente desactive el acceso para configurarlo desde esta interfaz , pero por comodidad lo he dejado activado para usar el navegador de mi portátil .</p><p>Una configuración que nos puede interesar es configurar una interfaz por DHCP , en mi caso lo haré en el puerto 4 :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Accedemos al modo de configuración</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config system interface</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Seleccionamos la interfaz 4</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>interface<span style=color:#f92672>)</span> <span style=color:#75715e># edit &#34;port4&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># La ponemos en modo DHCP</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>port4<span style=color:#f92672>)</span> <span style=color:#75715e># set mode dhcp</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Salimos del modo de configuración</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>port4<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>Ahora si listamos la configurar de la interfaz se habrá aplicado el cambio :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show system interface port4</span>
</span></span><span style=display:flex><span>config system interface
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;port4&#34;</span>
</span></span><span style=display:flex><span>        set vdom <span style=color:#e6db74>&#34;root&#34;</span>
</span></span><span style=display:flex><span>        set mode dhcp
</span></span><span style=display:flex><span>        set type physical
</span></span><span style=display:flex><span>        set snmp-index <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>end
</span></span></code></pre></div><p>En este punto, observamos que los comandos que hemos utilizado coinciden con los que el sistema muestra al listar la configuración.</p><p>Ahora, lo que nos interesa es conocer la dirección IP de nuestra interfaz. Si deseamos listar todas las direcciones IP asignadas, simplemente no especificamos el nombre de la interfaz. En mi caso, me interesa saber la dirección IP de la interfaz del puerto 4:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># get system interface physical port4</span>
</span></span><span style=display:flex><span><span style=color:#f92672>==</span> <span style=color:#f92672>[</span>onboard<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>==[</span>port4<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>		mode: dhcp
</span></span><span style=display:flex><span>		ip: 192.168.122.121 255.255.255.0
</span></span><span style=display:flex><span>		ipv6: ::/0
</span></span><span style=display:flex><span>		status: up
</span></span><span style=display:flex><span>		speed: 1000Mbps <span style=color:#f92672>(</span>Duplex: full<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>		FEC: none
</span></span><span style=display:flex><span>		FEC_cap: none
</span></span></code></pre></div><p>Esto es lo básico que necesitamos para comenzar a configurar las interfaces . Te dejo un <a href=https://docs.fortinet.com/document/fortigate/7.0.0/cli-reference/10620/config-system-interface target=_blank rel=noopener>enlace</a> a la documentación oficial donde explica todos los detalles .</p><h3 id=políticas>Políticas</h3><p>Lo siguiente que hemos realizado en la practica es crear reglas desde la CLI , así que comenzare listando las reglas existentes , recuerda que en la versión de prueba tenemos un limite de 10 reglas simultaneas así que he eliminado algunas reglas durante la realización de la misma .</p><p>Para hacer la salida mas legible vamos a ver una regla &ldquo;normal&rdquo; y otra de DNAT para compararlas :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show firewall policy</span>
</span></span><span style=display:flex><span>config firewall policy
</span></span><span style=display:flex><span>    edit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        set name <span style=color:#e6db74>&#34;LAN_WAN_SSH&#34;</span>
</span></span><span style=display:flex><span>        set uuid 57bba290-e881-51ee-3bbe-3ba5903773ed
</span></span><span style=display:flex><span>        set srcintf <span style=color:#e6db74>&#34;port2&#34;</span>
</span></span><span style=display:flex><span>        set dstintf <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>        set action accept
</span></span><span style=display:flex><span>        set srcaddr <span style=color:#e6db74>&#34;all&#34;</span>
</span></span><span style=display:flex><span>        set dstaddr <span style=color:#e6db74>&#34;all&#34;</span>
</span></span><span style=display:flex><span>        set schedule <span style=color:#e6db74>&#34;always&#34;</span>
</span></span><span style=display:flex><span>        set service <span style=color:#e6db74>&#34;SSH&#34;</span>
</span></span><span style=display:flex><span>        set nat enable
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>    edit <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>        set name <span style=color:#e6db74>&#34;WAN_LAN_DNAT_SSH&#34;</span>
</span></span><span style=display:flex><span>        set uuid bdd84292-e884-51ee-a5d3-20eabb2fd433
</span></span><span style=display:flex><span>        set srcintf <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>        set dstintf <span style=color:#e6db74>&#34;port2&#34;</span>
</span></span><span style=display:flex><span>        set action accept
</span></span><span style=display:flex><span>        set srcaddr <span style=color:#e6db74>&#34;all&#34;</span>
</span></span><span style=display:flex><span>        set dstaddr <span style=color:#e6db74>&#34;DNAT_SSH&#34;</span>
</span></span><span style=display:flex><span>        set schedule <span style=color:#e6db74>&#34;always&#34;</span>
</span></span><span style=display:flex><span>        set service <span style=color:#e6db74>&#34;SSH&#34;</span>
</span></span><span style=display:flex><span>        set utm-status enable
</span></span><span style=display:flex><span>        set ssl-ssh-profile <span style=color:#e6db74>&#34;certificate-inspection&#34;</span>
</span></span><span style=display:flex><span>        set ips-sensor <span style=color:#e6db74>&#34;block_xmas&#34;</span>
</span></span><span style=display:flex><span>        set nat enable
</span></span><span style=display:flex><span>    next 
</span></span></code></pre></div><p>Vemos que la salida es bastante clara , si nos paramos a ver los parámetros comunes :</p><ul><li>name: Nombre que le queremos dar a la regla .</li><li>UUID: Un identificador único que le asigna automáticamente el FW a cada regla .</li><li>srcintf: Interfaz de origen (Por donde entra el trafico)</li><li>dstintf: Interfaz de origen (Por donde entra el trafico)</li><li>action: Que acción queremos que haga la regla accept | deny .</li><li>srcaddr: Dirección de origen</li><li>dstaddr: Dirección de destino</li><li>schedule: Programación de la regla , por si es una regla temporal esta solo estará activa durante cierto tiempo .</li><li>service: Nombre del servicio (Va asignado a un numero de puerto)</li><li>nat: Si queremos que la regla haga SNAT .</li></ul><p>Esto seria la sintaxis básica de cada regla como ves entre una regla &ldquo;normal&rdquo; y una de DNAT lo único que cambia es la dirección del trafico y la IP de destino que en este dispositivo es una IP virtual .</p><p>Si queremos borrar una regla , haremos lo siguiente :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Accedemos al modo de configuracion de las politicas de seguridad</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config firewall policy</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Borraremos la regla segun el id de la misma</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>policy<span style=color:#f92672>)</span> <span style=color:#75715e># delete 2</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Salimos de la configuracion</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>policy<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>Para añadir una nueva regla, la sintaxis es similar a cuando listamos las reglas, pero necesitamos especificar un número de identificación (ID) al crearla. Es recomendable que sepas el número de la última regla que añadiste. Si no indicas un número, no se creará una nueva regla.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG#config firewall policy
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>policy<span style=color:#f92672>)</span> <span style=color:#75715e># edit 12</span>
</span></span><span style=display:flex><span>new entry <span style=color:#e6db74>&#39;12&#39;</span> added
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set name &#34;LAN_WAN_DNS&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set srcintf &#34;port2&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set dstintf &#34;port1&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set action accept</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set srcaddr &#34;all&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set dstaddr &#34;Google_DNS&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set schedule &#34;always&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set service &#34;DNS&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set nat enable</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e># next</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>policy<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>Hay muchísimas mas opciones que ignoro que no ha sido necesarias utilizarlas en la practica , te dejo un <a href=https://docs.fortinet.com/document/fortigate/7.0.0/cli-reference/323620/config-firewall-policy target=_blank rel=noopener>enlace</a> a la documentación oficial donde detalla todas las distintas opciones .</p><h3 id=servicios>Servicios</h3><p>Los servicios son unos objetos los cuales almacenan un numero o conjunto de puertos los cuales posteriormente utilizaras al crear reglas .Aunque estos dispositivos vienen con los servicios mas comunes de fabrica , muchas veces es necesario que creemos uno nuevo acorde a nuestras necesidades .</p><p>Al igual que con los comandos anteriores de listar , podemos listar todos los servicios o uno en concreto :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show firewall service custom</span>
</span></span><span style=display:flex><span>config firewall service custom
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;DNS&#34;</span>
</span></span><span style=display:flex><span>        set category <span style=color:#e6db74>&#34;Network Services&#34;</span>
</span></span><span style=display:flex><span>        set tcp-portrange <span style=color:#ae81ff>53</span>
</span></span><span style=display:flex><span>        set udp-portrange <span style=color:#ae81ff>53</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>   edit <span style=color:#e6db74>&#34;HTTP&#34;</span>
</span></span><span style=display:flex><span>        set category <span style=color:#e6db74>&#34;Web Access&#34;</span>
</span></span><span style=display:flex><span>        set tcp-portrange <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;HTTPS&#34;</span>
</span></span><span style=display:flex><span>        set category <span style=color:#e6db74>&#34;Web Access&#34;</span>
</span></span><span style=display:flex><span>        set tcp-portrange <span style=color:#ae81ff>443</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># show firewall service custom SSH_2222 </span>
</span></span><span style=display:flex><span>config firewall service custom
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;SSH_2222&#34;</span>
</span></span><span style=display:flex><span>        set category <span style=color:#e6db74>&#34;Remote Access&#34;</span>
</span></span><span style=display:flex><span>        set tcp-portrange <span style=color:#ae81ff>2222</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>end
</span></span></code></pre></div><p>Para borrar un servicio , seguiremos los siguientes pasos :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Accedemos a la configuración de los servicios</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config firewall service custom</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Borramos el servicio indicando el nombre</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>custom<span style=color:#f92672>)</span> <span style=color:#75715e># delete SSH_2222</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Salimos del modo de configuración</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>custom<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>Si queremos crearlo seguiremos los siguientes pasos :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Accedemos a la configuración de los servicios</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config firewall service custom</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Le asignamos un nombre</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>custom<span style=color:#f92672>)</span> <span style=color:#75715e># edit SSH_2222</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Opcionalmente lo añadimos a una categoria</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>SSH_2222<span style=color:#f92672>)</span> <span style=color:#75715e># set category &#34;Remote Access&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Indicamos los puertos que hace referencia al mismo</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>SSH_2222<span style=color:#f92672>)</span> <span style=color:#75715e># set tcp-portrange 2222</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Guardamos y salimos del modo de confuguración</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>SSH_2222<span style=color:#f92672>)</span> <span style=color:#75715e># next</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>custom<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>Te dejo un <a href=https://docs.fortinet.com/document/fortigate/7.0.0/ngfw-deployment/546227/creating-service-objects target=_blank rel=noopener>enlace</a> a la documentación oficial referente a los servicios donde explica con detalle todas las opciones de los mismos .</p><h3 id=ips-virtuales>IPs Virtuales</h3><p>Las IP Virtuales Estáticas (VIP) se utilizan para mapear direcciones IP externas a direcciones IP internas. Esto también se llama DNAT, donde el destino de un paquete se está enviando a una dirección diferente.</p><p>Las VIP estáticas se utilizan comúnmente para mapear direcciones IP públicas a recursos detrás del FortiGate que utilizan direcciones IP privadas. Una VIP estática uno a uno es cuando se mapea todo el rango de puertos. Una VIP de reenvío de puertos es cuando el mapeo se configura en un puerto específico o rango de puertos.</p><p>Si queremos listar las diferentes IPs virtuales que tenemos usaremos el siguiente comando , si solo queremos listar una en concreta indicaremos su nombre :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show firewall vip</span>
</span></span><span style=display:flex><span>config firewall vip
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;DNAT_POSTFIX&#34;</span>
</span></span><span style=display:flex><span>        set uuid a343ec4a-e881-51ee-0ec1-ad73db3ff299
</span></span><span style=display:flex><span>        set service <span style=color:#e6db74>&#34;SMTP&#34;</span>
</span></span><span style=display:flex><span>        set extip 192.168.100.1
</span></span><span style=display:flex><span>        set mappedip <span style=color:#e6db74>&#34;192.168.200.2&#34;</span>
</span></span><span style=display:flex><span>        set extintf <span style=color:#e6db74>&#34;port2&#34;</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;DNAT_SSH&#34;</span>
</span></span><span style=display:flex><span>        set uuid a2b62344-e884-51ee-1a11-8946fda2bd91
</span></span><span style=display:flex><span>        set service <span style=color:#e6db74>&#34;SSH_2222&#34;</span>
</span></span><span style=display:flex><span>        set extip 192.168.122.77
</span></span><span style=display:flex><span>        set mappedip <span style=color:#e6db74>&#34;192.168.100.2&#34;</span>
</span></span><span style=display:flex><span>        set extintf <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>        set portforward enable
</span></span><span style=display:flex><span>        set mappedport <span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># show firewall vip DNAT_HELA_WEB</span>
</span></span><span style=display:flex><span>config firewall vip
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;DNAT_HELA_WEB&#34;</span>
</span></span><span style=display:flex><span>        set uuid a417a8f8-edf6-51ee-f601-43829c174966
</span></span><span style=display:flex><span>        set service <span style=color:#e6db74>&#34;HTTP&#34;</span>
</span></span><span style=display:flex><span>        set extip 192.168.122.77
</span></span><span style=display:flex><span>        set mappedip <span style=color:#e6db74>&#34;192.168.200.2&#34;</span>
</span></span><span style=display:flex><span>        set extintf <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>end
</span></span></code></pre></div><p>En el caso de que queramos eliminar una de estas IPs virtuales , seguiremos los siguientes pasos :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Accedemos al modo de configuración</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config firewall vip</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Borramos la IP virtual indicando su nombre</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>vip<span style=color:#f92672>)</span> <span style=color:#75715e># delete DNAT_HELA_WEB</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Salimos del modo de configuración</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>vip<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>Por otro lado para crear una de estas , como hemos realizado desde la GUI seguiremos los siguientes pasos :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Accedemos al modo de configuración</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config firewall vip</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Le asignamos el nombre que deseemos</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>vip<span style=color:#f92672>)</span> <span style=color:#75715e># edit DNAT_HELA_WEB</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Indicamos opcionalmente sobre el servicio que sera usado esta IP virtual</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>DNAT_HELA_WEB<span style=color:#f92672>)</span> <span style=color:#75715e># set service &#34;HTTP&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Indicamos la Ip externa</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>DNAT_HELA_WEB<span style=color:#f92672>)</span> <span style=color:#75715e># set extip 192.168.122.77</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Indicamos la Ip interna</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>DNAT_HELA_WEB<span style=color:#f92672>)</span> <span style=color:#75715e># set mappedip &#34;192.168.200.2&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Indicamos la interfaz externa</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>DNAT_HELA_WEB<span style=color:#f92672>)</span> <span style=color:#75715e># set extintf &#34;port1&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Guardamos y salimos</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>DNAT_HELA_WEB<span style=color:#f92672>)</span> <span style=color:#75715e># next</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>vip<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>Las IP virtuales tienen mas parámetros de configuración que no he utilizado en la practica , te dejo un <a href=https://docs.fortinet.com/document/fortigate/7.0.9/administration-guide/510402/static-virtual-ips target=_blank rel=noopener>enlace</a> a la documentación oficial donde detalla toda la configuración que podemos acceder con las mismas .</p><h3 id=rutas-estáticas>Rutas estáticas</h3><p>Nuestro dispositivo necesita conocer hacia donde enviar el trafico , para esto existen las rutas estáticas .</p><p>Para listar las rutas que tiene configurado nuestro cortafuegos , usaremos el siguiente comando :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show router static</span>
</span></span><span style=display:flex><span>config router static
</span></span><span style=display:flex><span>    edit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        set gateway 192.168.122.1
</span></span><span style=display:flex><span>        set device <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>end
</span></span></code></pre></div><p>Al igual que hemos hecho anteriormente , si queremos eliminar esta ruta por defecto seguiremos los siguientes pasos :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># config router static</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>static<span style=color:#f92672>)</span> <span style=color:#75715e># delete 1</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>static<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>Si queremos añadir una ruta , puedes utilizar este ejemplo :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># config router static</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>static<span style=color:#f92672>)</span> <span style=color:#75715e># edit 1</span>
</span></span><span style=display:flex><span><span style=color:#75715e># El siguiete salto o puerta de enlace </span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> <span style=color:#75715e># set gateway 192.168.122.1</span>
</span></span><span style=display:flex><span><span style=color:#75715e># La interfaz por donde saldra el trafico</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> <span style=color:#75715e># set device &#34;port1&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> <span style=color:#75715e># next</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>static<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"><strong>Compartir en:</strong>
<a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.javiercd.es%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f" target=_blank><i class="fab fa-facebook"></i>
</a><a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=https%3a%2f%2fwww.javiercd.es%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f&text=Fortinet%20CLI&via=Atlas" target=_blank><i class="fab fa-twitter"></i>
</a><a class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.javiercd.es%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f&title=Fortinet%20CLI" target=_blank><i class="fab fa-reddit"></i>
</a><a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.javiercd.es%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f&title=Fortinet%20CLI" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=Fortinet%20CLI https%3a%2f%2fwww.javiercd.es%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f" target=_blank><i class="fab fa-whatsapp"></i>
</a><a class="btn icon-button" href="mailto:?subject=Fortinet%20CLI&body=https%3a%2f%2fwww.javiercd.es%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/javierasping/sentinel/edit/main/content/posts/cortafuegos/fortinet_cli/fortinet_cli.md title="Mejorar esta página" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Mejorar esta página</a></div></div><hr><div class="row next-prev-navigator"></div><hr></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Contenido</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#equivalencia-de-gui-a-cli>Equivalencia de GUI a CLI</a><ul><li><a href=#configurar-una-interfaz>Configurar una interfaz</a></li><li><a href=#políticas>Políticas</a></li><li><a href=#servicios>Servicios</a></li><li><a href=#ips-virtuales>IPs Virtuales</a></li><li><a href=#rutas-estáticas>Rutas estáticas</a></li></ul></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navegación</h5><ul><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/#about>Sobre mi</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/#skills>Competencias</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/#education>Educación</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/#recent-posts>Últimas publicaciones</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/#accomplishments>Certificaciones</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contacto</h5><ul><li><a href=mailto:contacto@javiercd.es target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>contacto@javiercd.es</span></a></li><li><a href=https://github.com/javierasping target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>javierasping</span></a></li><li><a href=https://www.linkedin.com/in/javiercd target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Francisco Javier Cruces Doval</span></a></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>Aviso de responsabilidad:</strong> This theme is under MIT license. So, you can use it for non-commercial, commercial, or private uses. You can modify or distribute the theme without requiring any permission from the theme author. However, the theme author does not provide any warranty or takes any liability for any issue with the theme.</p></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu16779671404603505019.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2023 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Funcionando con
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.001908df9e89878a34ea5cb7c8dd038cc5f63dc112eae2ce4bc1f6ff7b226797.js integrity="sha256-ABkI356Jh4o06ly3yN0DjMX2PcES6uLOS8H2/3siZ5c=" defer></script></body></html>