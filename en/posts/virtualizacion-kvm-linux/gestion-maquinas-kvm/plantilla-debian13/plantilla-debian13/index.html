<!doctype html><html lang=en><head><title>How to create a Debian 13 virtual machine template</title><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.ddf4c4775d35e5bc3dd64c797b179f99eaf85cf9811e64bd08f8c44a68d0b229.css integrity="sha256-3fTEd1015bw91kx5exefmer4XPmBHmS9CPjESmjQsik="><link rel=icon type=image/png href=/images/site/avatar_hu_f10227dc088ad43a.jpg><meta property="og:title" content="Atlas"><meta property="og:type" content="website"><meta property="og:description" content="Portfolio and personal blog of Francisco Javier Cruces Doval"><meta property="og:image" content="/images/author/john.png"><meta property="og:url" content="https://www.javiercd.es"><meta name=description content="Step-by-step guide to create a Debian 13 golden image with KVM/libvirt: preparation, generalization with virt-sysprep, compaction with virt-sparsify, read-only marking and cloning best practices."><script async src="https://www.googletagmanager.com/gtag/js?id=G-GVDYVWJLRH"></script><script>var dnt,doNotTrack=!1;if(null&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GVDYVWJLRH")}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-GVDYVWJLRH"></script><script>var dnt,doNotTrack=!1;if(null&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GVDYVWJLRH")}</script><script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">let theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light";theme==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/en><img src=/images/site/masthead_hu_f10227dc088ad43a.png id=logo alt=Logo>
Atlas</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/en#home>Home</a></li><li class=nav-item><a class=nav-link href=/en#about>About Me</a></li><li class=nav-item><a class=nav-link href=/en#skills>Skills</a></li><li class=nav-item><a class=nav-link href=/en#education>Education</a></li><li class=nav-item><a class=nav-link href=/en#recent-posts>Recent Posts</a></li><li class=nav-item><a class=nav-link href=/en#accomplishments>Certifications</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/en/posts>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=languageSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><span class="fi fi-gb"></span>
English</a><div class=dropdown-menu aria-labelledby=languageSelector><a class="dropdown-item nav-link languages-item" href=/posts/virtualizacion-kvm-linux/gestion-maquinas-kvm/plantilla-debian13/plantilla-debian13><span class="fi fi-es"></span>
Español
</a><a class="dropdown-item nav-link languages-item" href=/en/posts/virtualizacion-kvm-linux/gestion-maquinas-kvm/plantilla-debian13/plantilla-debian13><span class="fi fi-gb"></span>
English</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/site/masthead_hu_f10227dc088ad43a.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/masthead_hu_f10227dc088ad43a.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/en/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/en/posts/ data-filter=all>Posts</a></li><div class=subtree><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/ci_cd/> CI / CD Jenkins</a><ul><li><a class=list-link href=/en/posts/ci_cd/practica_jenkins/ title="CI / CD practice with Jenkins">CI / CD practice with Jenkins</a></li><li><a class=list-link href=/en/posts/ci_cd/taller1_jenkins/ title="Workshop 1 Ortho-rector of markdown documents (test)">Workshop 1 Ortho-rector of markdown documents (test)</a></li><li><a class=list-link href=/en/posts/ci_cd/taller2_jenkins/ title="Workshop 2 Valid HTML5 check and surge.sh deployment (test and deploy)">Workshop 2 Valid HTML5 check and surge.sh deployment (test and deploy)</a></li><li><a class=list-link href=/en/posts/ci_cd/taller3_jenkins/ title="Workshop 3 Continuous integration of django application (Test)">Workshop 3 Continuous integration of django application (Test)</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/base_de_datos/> Database</a><ul><li><a class=list-link href=/en/posts/base_de_datos/instalar_mariadb/ title="Install MariaDB in Debian">Install MariaDB in Debian</a></li><li><a class=list-link href=/en/posts/base_de_datos/interconexion_de_servidores/ title="Interconnection of database servers">Interconnection of database servers</a></li><li><a class=list-link href=/en/posts/base_de_datos/instalacion_oracle_19c_debian12/ title="Oracle 19c installation under Debian 12">Oracle 19c installation under Debian 12</a></li><li><a class=list-link href=/en/posts/base_de_datos/instalar_postgresql/ title="PostgreSQL installation in Debian 12">PostgreSQL installation in Debian 12</a></li><li><a class=list-link href=/en/posts/base_de_datos/oracle_acceso_remoto/ title="Remote access configuration in Oracle">Remote access configuration in Oracle</a></li><li><a class=list-link href=/en/posts/base_de_datos/acceso_remoto_mariadb/ title="Remote access in MariaDB">Remote access in MariaDB</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/docker/> Docker</a><ul><li><a class=list-link href=/en/posts/docker/instalar_docker_compose/ title="Docker Compose Installation on Ubuntu 24">Docker Compose Installation on Ubuntu 24</a></li><li><a class=list-link href=/en/posts/docker/instalar_docker_ubuntu24/ title="Docker Installation on Ubuntu 24">Docker Installation on Ubuntu 24</a></li><li><a class=list-link href=/en/posts/docker/taller1/ title="Workshop 1 Storage and networks in Docker">Workshop 1 Storage and networks in Docker</a></li><li><a class=list-link href=/en/posts/docker/taller2/ title="Workshop 2 Multicontainer Scenarios in Docker">Workshop 2 Multicontainer Scenarios in Docker</a></li><li><a class=list-link href=/en/posts/docker/taller3/ title="Workshop 3 Image creation Docker">Workshop 3 Image creation Docker</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/cortafuegos/> Firewall</a><ul><li><a class=list-link href=/en/posts/cortafuegos/fortinet_cli/ title="Fortinet CLI">Fortinet CLI</a></li><li><a class=list-link href=/en/posts/cortafuegos/fortinet_uno/ title="Perimetral with Fortinet I">Perimetral with Fortinet I</a></li><li><a class=list-link href=/en/posts/cortafuegos/fortinet_dos/ title="Perimetral with Fortinet II">Perimetral with Fortinet II</a></li><li><a class=list-link href=/en/posts/cortafuegos/nftables_uno/ title="Perimetral with Nftables I">Perimetral with Nftables I</a></li><li><a class=list-link href=/en/posts/cortafuegos/nftables_dos/ title="Perimetral with Nftables II">Perimetral with Nftables II</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/drivers/> Linux Drivers</a><ul><li><a class=list-link href=/en/posts/drivers/nvidia_driver/ title="Drivers Nvidia">Drivers Nvidia</a></li><li><a class=list-link href=/en/posts/drivers/nvidia_optimus/ title="How to choose which graph to use on my laptop with Linux">How to choose which graph to use on my laptop with Linux</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/redes/> Networks</a><ul><li><a class=list-link href=/en/posts/redes/android_gns3/ title="Android GNS3-KVM">Android GNS3-KVM</a></li><li><a class=list-link href=/en/posts/redes/escenario_ipv6_basico/ title="Basic IPv6 scenario">Basic IPv6 scenario</a></li><li><a class=list-link href=/en/posts/redes/instalacion_wireshark_gns3/ title="GNS3 and Wireshark installation">GNS3 and Wireshark installation</a></li><li><a class=list-link href=/en/posts/redes/instalar_gns3_debian12/ title="GNS3 installation in Debian 12">GNS3 installation in Debian 12</a></li><li><a class=list-link href=/en/posts/redes/switches_gns3/ title="GNS3 switch configuration">GNS3 switch configuration</a></li><li><a class=list-link href=/en/posts/redes/tuneles_ipv6/ title="IPV6 Tunnels">IPV6 Tunnels</a></li><li><a class=list-link href=/en/posts/redes/configuracion_de_nat/ title="NAT in Cisco and Linux">NAT in Cisco and Linux</a></li><li><a class=list-link href=/en/posts/redes/comandos_de_supervision_de_redes/ title="Network monitoring commands">Network monitoring commands</a></li><li><a class=list-link href=/en/posts/redes/enroutamiento_openstack/ title="OpenStack routing">OpenStack routing</a></li><li><a class=list-link href=/en/posts/redes/arp/ title="Protocol ARP">Protocol ARP</a></li><li><a class=list-link href=/en/posts/redes/underworld/ title=Underworld>Underworld</a></li><li><a class=list-link href=/en/posts/redes/underworld_evolution/ title="Underworld evolution">Underworld evolution</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/observabilidad/> Observability</a><ul><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/observabilidad/metricas/> Metrics</a><ul><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/observabilidad/metricas/prometheus/> Prometheus</a><ul><li><a class=list-link href=/en/posts/observabilidad/metricas/prometheus/instalacion_basica_docker_compose/ title="Installation of Prometheus with Docker Compose and Node Exporter on Debian 12">Installation of Prometheus with Docker Compose and Node Exporter on Debian 12</a></li></ul></li></ul></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/seguridad/> Security</a><ul><li><a class=list-link href=/en/posts/seguridad/forense/ title="Forensic computer">Forensic computer</a></li><li><a class=list-link href=/en/posts/seguridad/https_autofirmado/ title=HTTPS>HTTPS</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/> Services</a><ul><li><a class=list-link href=/en/posts/servicios/apache/ title=Apache>Apache</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dhcp/> DHCP</a><ul><li><a class=list-link href=/en/posts/servicios/dhcp/instalacion_y_configuracion_de_un_servidor_dhcp_en_linux/ title="Installation and Configuration of a DHCP Server on Linux">Installation and Configuration of a DHCP Server on Linux</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dns/> DNS</a><ul><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dns/bind9/> BIND9</a><ul><li><a class=list-link href=/en/posts/servicios/dns/bind9/dns_esclavo/ title="Configuring a Slave DNS Server with BIND9">Configuring a Slave DNS Server with BIND9</a></li><li><a class=list-link href=/en/posts/servicios/dns/bind9/instalacion_basica/ title="Installation and Configuration of BIND9 on Linux">Installation and Configuration of BIND9 on Linux</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dns/dnsmasq/> DNSMASQ</a><ul><li><a class=list-link href=/en/posts/servicios/dns/dnsmasq/instalacion_basica/ title="Local Server with DNSMasq">Local Server with DNSMasq</a></li></ul></li></ul></li><li><a class=list-link href=/en/posts/servicios/ftp/ title=FTP>FTP</a></li><li><a class=list-link href=/en/posts/servicios/nat_iptables/ title="NAT with iptables">NAT with iptables</a></li><li><a class=list-link href=/en/posts/servicios/ssh/ title=SSH>SSH</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/sistemas/> Systems</a><ul><li><a class=list-link href=/en/posts/sistemas/ad_ubuntu/ title="Active Directory in Ubuntu">Active Directory in Ubuntu</a></li><li><a class=list-link href=/en/posts/sistemas/recoleccion_logs_journald/ title="Centralized collection of logs journald">Centralized collection of logs journald</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/sistemas/compilaciones_linux/> Compilations in LINUX</a><ul><li><a class=list-link href=/en/posts/sistemas/compilaciones_linux/compilacion_de_un_programa_en_c_utilizando_un_makefile/ title="Compilation of a C-program using a Makefile">Compilation of a C-program using a Makefile</a></li><li><a class=list-link href=/en/posts/sistemas/compilaciones_linux/compilacion_de_un_kernel/ title="Compilation of a kernel">Compilation of a kernel</a></li></ul></li><li><a class=list-link href=/en/posts/sistemas/creacion_de_un_sistema_automatizado_de_instalacion/ title="Creation of an automated installation system">Creation of an automated installation system</a></li><li><a class=list-link href=/en/posts/sistemas/samba_debian/ title="Install and configure samba in Debian">Install and configure samba in Debian</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/sistemas/comandos_linux/> Linux Command</a><ul><li><a class=list-link href=/en/posts/sistemas/comandos_linux/ejercicios_de_modificacion_de_parametros_del_kernel/ title="Kernel parameter modification exercises">Kernel parameter modification exercises</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/comandos_procesos/ title="Linux processes">Linux processes</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/ejercicios_de_manejo_de_modulos/ title="Module management exercises">Module management exercises</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/gestion_de_paquetes/ title="Package management">Package management</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/empaquetadores_compresores/ title="Packaging and compressors">Packaging and compressors</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/ejercicios_gestion_de_paqueteria/ title="Paid management exercises">Paid management exercises</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/programacion_tareas/ title="Task programming">Task programming</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/sistemas/migraciones/> Migration in Linnux</a><ul><li><a class=list-link href=/en/posts/sistemas/migraciones/migracion_sistema_de_ficheros/ title="File system">File system</a></li><li><a class=list-link href=/en/posts/sistemas/migraciones/paso_de_centos_stream_8_a_centos_stream_9/ title="Migtation from CentOS stream 8 to CentOS stream 9">Migtation from CentOS stream 8 to CentOS stream 9</a></li><li><a class=list-link href=/en/posts/sistemas/migraciones/eliminacion_systemd/ title="Systemd elimination">Systemd elimination</a></li><li><a class=list-link href=/en/posts/sistemas/migraciones/transformacion_instancia_cloud/ title="Transformation instance cloud">Transformation instance cloud</a></li></ul></li><li><a class=list-link href=/en/posts/sistemas/nfs_debian/ title="NFS in Debian">NFS in Debian</a></li><li><a class=list-link href=/en/posts/sistemas/activacion_selinux/ title="SELinux activation configuration">SELinux activation configuration</a></li><li><a class=list-link href=/en/posts/sistemas/comparticion_de_directorios_en_windows/ title="Share resources in Windows">Share resources in Windows</a></li><li><a class=list-link href=/en/posts/sistemas/ssh_windows/ title="Ssh service in Windows">Ssh service in Windows</a></li><li><a class=list-link href=/en/posts/sistemas/almacenamiento_servidor_independiente/ title="Storage Spaces in Windows Server">Storage Spaces in Windows Server</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/en/posts/virtualizacion-kvm-linux/> Virtualization (KVM on Linux)</a><ul class=active><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/virtualizacion-kvm-linux/introduccion-kvm/> Introduction to virtualization with KVM</a><ul><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/introduccion-kvm/conceptos-virtualizacion/ title="Virtualization basics in Linux">Virtualization basics in Linux</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/introduccion-kvm/tipo-hipervisores/ title="Types of hypervisors">Types of hypervisors</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/introduccion-kvm/arquitectura-kvm/ title="KVM architecture and operation">KVM architecture and operation</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/virtualizacion-kvm-linux/instalacion-kvm/> Installation and configuration</a><ul><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/instalacion-kvm/instalar-kvm-libvirt/ title="Install KVM and libvirt">Install KVM and libvirt</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/instalacion-kvm/validar-host-kvm/ title="Validate KVM host">Validate KVM host</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/en/posts/virtualizacion-kvm-linux/gestion-maquinas-kvm/> Virtual machine management</a><ul class=active><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/gestion-maquinas-kvm/crear-vm-virtinstall/ title="Create VM with virt-install">Create VM with virt-install</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/gestion-maquinas-kvm/componentes-vm/ title="VM components">VM components</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/gestion-maquinas-kvm/administrar-virsh/ title="Manage with virsh">Manage with virsh</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/gestion-maquinas-kvm/clonar-y-renombrar-vm/ title="Clone and rename VMs">Clone and rename VMs</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/gestion-maquinas-kvm/ampliar-recursos-vm/ title="Expand VM resources">Expand VM resources</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/gestion-maquinas-kvm/snapshots-kvm/ title="Snapshots in KVM">Snapshots in KVM</a></li><li><a class="active list-link" href=/en/posts/virtualizacion-kvm-linux/gestion-maquinas-kvm/plantilla-debian13/ title="Virtual machine templates">Virtual machine templates</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/virtualizacion-kvm-linux/redes-kvm/> Networking in KVM</a><ul><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/redes-kvm/tipos-redes-kvm/ title="Network types in KVM">Network types in KVM</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/redes-kvm/crear-redes-virtuales-privadas-kvm/ title="Create and configure private virtual networks">Create and configure private virtual networks</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/redes-kvm/crear-interfaz-puente/ title="Create bridge interface">Create bridge interface</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/virtualizacion-kvm-linux/almacenamiento-kvm/> Storage in KVM</a><ul><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/almacenamiento-kvm/introduccion-almacenamiento-kvm/ title="Introduction to storage">Introduction to storage</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/almacenamiento-kvm/gestion-pools-almacenamiento/ title="Managing pools">Managing pools</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/almacenamiento-kvm/gestion-volumenes-virsh/ title="Volumes (virsh)">Volumes (virsh)</a></li><li><a class=list-link href=/en/posts/virtualizacion-kvm-linux/almacenamiento-kvm/redimension-discos-vms/ title="Resizing disks (VMs)">Resizing disks (VMs)</a></li></ul></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/vpn/> VPN</a><ul><li><a class=list-link href=/en/posts/vpn/comparativa_ovpn_wire/ title="OpenVPN and Wireguard Comparative">OpenVPN and Wireguard Comparative</a></li><li><a class=list-link href=/en/posts/vpn/acceso_remoto_openvpn/ title="OpenVPN remote access">OpenVPN remote access</a></li><li><a class=list-link href=/en/posts/vpn/acceso_remoto_strongswang/ title="Remote access Ipsec StrongSwan">Remote access Ipsec StrongSwan</a></li><li><a class=list-link href=/en/posts/vpn/ipsec_cisco/ title="Site-to-Site IPsec Cisco">Site-to-Site IPsec Cisco</a></li><li><a class=list-link href=/en/posts/vpn/site_to_site_fortinet/ title="Site-to-Site IPsec Fortinet">Site-to-Site IPsec Fortinet</a></li><li><a class=list-link href=/en/posts/vpn/site_to_site_openvpn/ title="Site-to-Site OpenVPN">Site-to-Site OpenVPN</a></li><li><a class=list-link href=/en/posts/vpn/site_to_site_wireguard/ title="Site-to-Site Wireguard">Site-to-Site Wireguard</a></li><li><a class=list-link href=/en/posts/vpn/acceso_remoto_wireguard/ title="Wireguard remote access">Wireguard remote access</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/iaw/> Web applications</a><ul><li><a class=list-link href=/en/posts/iaw/lamp/ title="LAMP stack installation">LAMP stack installation</a></li><li><a class=list-link href=/en/posts/iaw/lemp/ title="LEMP stack installation">LEMP stack installation</a></li><li><a class=list-link href=/en/posts/iaw/wordpress/ title="WordPress LAMP">WordPress LAMP</a></li><li><a class=list-link href=/en/posts/iaw/wordpress_lemp/ title="WordPress LEMP">WordPress LEMP</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/virtualizacion-kvm-linux/gestion-vm/plantillas.png)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author/john_hu_2aff0fda0501496d.png alt="Author Image"><h5 class=author-name>Francisco Javier Cruces Doval</h5><p class=text-muted>Saturday, October 18, 2025 | 6 minutes</p></div><div class=title><h1>How to create a Debian 13 virtual machine template</h1></div><div class=tags><ul style=padding-left:0><li class=rounded><a href=/en/tags/kvm/ class="btn btn-sm btn-info">KVM</a></li><li class=rounded><a href=/en/tags/virtualization/ class="btn btn-sm btn-info">Virtualization</a></li><li class=rounded><a href=/en/tags/libvirt/ class="btn btn-sm btn-info">Libvirt</a></li><li class=rounded><a href=/en/tags/linux/ class="btn btn-sm btn-info">Linux</a></li><li class=rounded><a href=/en/tags/vm/ class="btn btn-sm btn-info">VM</a></li><li class=rounded><a href=/en/tags/templates/ class="btn btn-sm btn-info">Templates</a></li><li class=rounded><a href=/en/tags/debian13/ class="btn btn-sm btn-info">Debian13</a></li></ul></div><div class=post-content id=post-content><p>A virtual machine template is a preconfigured OS image that we use to quickly deploy new VMs, avoiding repetitions and errors. Here we&rsquo;ll see how to create a Debian 13 master template ready for cloning.</p><hr><h2 id=1-create-and-install-the-base-vm>1 Create and install the base VM</h2><p>Create a clean Debian 13 VM, apply all updates and add the common software you want on all clones (guest agent, utilities, etc.). Minimal example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create the base VM (adjust CPU, RAM, disk, ISO and network to your environment)</span>
</span></span><span style=display:flex><span>virt-install <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name debian13-base <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --memory <span style=color:#ae81ff>4096</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --vcpus <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --disk path<span style=color:#f92672>=</span>/var/lib/libvirt/images/debian13-base.qcow2,size<span style=color:#f92672>=</span>20,format<span style=color:#f92672>=</span>qcow2 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --cdrom /var/lib/libvirt/images/debian-13.1.0-amd64-netinst.iso <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --os-variant debian12 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --network network<span style=color:#f92672>=</span>default,model<span style=color:#f92672>=</span>virtio <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --noautoconsole
</span></span></code></pre></div><p>Once the VM is created, install all the components you want this template to have: users, packages, etc.</p><p>To do this, I&rsquo;ll check that it&rsquo;s running and start with the installation:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ virsh list 
</span></span><span style=display:flex><span> Id   Name            State
</span></span><span style=display:flex><span>-------------------------------
</span></span><span style=display:flex><span> <span style=color:#ae81ff>1</span>    debian13-base   running
</span></span></code></pre></div><p>I&rsquo;ll connect via SSH to the machine:</p><p>I&rsquo;ll connect via SSH to the machine:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>javiercruces@FJCD-PC:~/Documentos/sentinel <span style=color:#f92672>(</span>feature/kvm<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>prd-eu-central|<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>$ virsh domifaddr debian13-base
</span></span><span style=display:flex><span> Name       MAC address          Protocol     Address
</span></span><span style=display:flex><span>-------------------------------------------------------------------------------
</span></span><span style=display:flex><span> vnet8      52:54:00:62:d5:6a    ipv4         192.168.122.202/24
</span></span><span style=display:flex><span> -          -                    ipv4         192.168.122.201/24
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>javiercruces@FJCD-PC:~/Documentos/sentinel <span style=color:#f92672>(</span>feature/kvm<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>prd-eu-central|<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>$ ssh 192.168.122.202
</span></span><span style=display:flex><span>The authenticity of host <span style=color:#e6db74>&#39;192.168.122.202 (192.168.122.202)&#39;</span> can<span style=color:#e6db74>&#39;t be established.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ED25519 key fingerprint is SHA256:RvOdKE4i1eQNHJ8bdK6RoYl9GckeGN2xY6X/IsPvMHI.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>This key is not known by any other names.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Warning: Permanently added &#39;</span>192.168.122.202<span style=color:#e6db74>&#39; (ED25519) to the list of known hosts.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>javiercruces@192.168.122.202&#39;</span>s password: 
</span></span><span style=display:flex><span>Linux debian13-base 6.12.48+deb13-amd64 <span style=color:#75715e>#1 SMP PREEMPT_DYNAMIC Debian 6.12.48-1 (2025-09-20) x86_64</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The programs included with the Debian GNU/Linux system are free software;
</span></span><span style=display:flex><span>the exact distribution terms <span style=color:#66d9ef>for</span> each program are described in the
</span></span><span style=display:flex><span>individual files in /usr/share/doc/*/copyright.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
</span></span><span style=display:flex><span>permitted by applicable law.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>javiercruces@debian13-base:~$ 
</span></span></code></pre></div><p>In my case, I&rsquo;ll update it to the latest version and install qemu-utils. Also, since I&rsquo;ll only use this machine for testing, I&rsquo;ll configure my SSH key so I can connect to it without needing to enter my password.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Inside the VM I ran the following commands:</span>
</span></span><span style=display:flex><span>sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt -y full-upgrade
</span></span><span style=display:flex><span>sudo apt install -y qemu-guest-agent cloud-guest-utils
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Inside our user we generate the following files and assign permissions:</span>
</span></span><span style=display:flex><span>javiercruces@debian13-base:~$ mkdir -p ~/.ssh
</span></span><span style=display:flex><span>javiercruces@debian13-base:~$ touch ~/.ssh/authorized_keys
</span></span><span style=display:flex><span>javiercruces@debian13-base:~$ chmod <span style=color:#ae81ff>700</span> ~/.ssh
</span></span><span style=display:flex><span>javiercruces@debian13-base:~$ chmod <span style=color:#ae81ff>600</span> ~/.ssh/authorized_keys
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># With this command we add the public key we want to use on the VM</span>
</span></span><span style=display:flex><span>javiercruces@FJCD-PC:~$ ssh-copy-id -i ~/.ssh/jcruces.pub javiercruces@192.168.122.202   
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Finally, I verify I can connect using the SSH key. Remember to disable password authentication in the SSH service.</span>
</span></span><span style=display:flex><span>javiercruces@FJCD-PC:~ <span style=color:#f92672>[</span>prd-eu-central|<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>$ ssh javiercruces@192.168.122.202
</span></span><span style=display:flex><span>Linux debian13-base 6.12.48+deb13-amd64 <span style=color:#75715e>#1 SMP PREEMPT_DYNAMIC Debian 6.12.48-1 (2025-09-20) x86_64</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The programs included with the Debian GNU/Linux system are free software;
</span></span><span style=display:flex><span>the exact distribution terms <span style=color:#66d9ef>for</span> each program are described in the
</span></span><span style=display:flex><span>individual files in /usr/share/doc/*/copyright.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
</span></span><span style=display:flex><span>permitted by applicable law.
</span></span><span style=display:flex><span>Last login: Sat Oct <span style=color:#ae81ff>18</span> 16:35:26 <span style=color:#ae81ff>2025</span> from 192.168.122.1
</span></span></code></pre></div><p>Shut down the base VM when done:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>javiercruces@FJCD-PC:~$ virsh shutdown debian13-base
</span></span><span style=display:flex><span>Domain <span style=color:#e6db74>&#39;debian13-base&#39;</span> is being shutdown
</span></span></code></pre></div><hr><h2 id=2-generalize-the-image-with-virt-sysprep>2 Generalize the image with virt-sysprep</h2><p>Generalization removes and regenerates elements that must be unique in each clone (machine-id, host SSH keys, hostname, logs, caches, etc.). For Linux we&rsquo;ll use <code>virt-sysprep</code> (package <code>libguestfs-tools</code>).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Generalize by specifying the domain (VM must be powered off)</span>
</span></span><span style=display:flex><span>virt-sysprep -d debian13-base <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --hostname plantilla-debian13 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --firstboot-command <span style=color:#e6db74>&#34;dpkg-reconfigure openssh-server&#34;</span>
</span></span></code></pre></div><p>Notes:</p><ul><li><code>--hostname</code> sets the template hostname.</li><li><code>--firstboot-command</code> executes the command on the first boot of the clone to regenerate host SSH keys.</li><li>You can add/remove operations with <code>--enable/--operations</code> (see <code>virt-sysprep --list-operations</code>).</li></ul><hr><h2 id=3-compact-the-image-with-virt-sparsify>3 Compact the image with virt-sparsify</h2><p>To save space, compact the image (removes empty blocks) and optionally compress it.</p><p>With the base installation, in my case the image occupies around 2 GB real space.
Be careful, because if you try to check its size with ls, you&rsquo;ll see the total logical size the image can reach, not the space it&rsquo;s really using:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># This way you&#39;d see the total logical size the VM disk can occupy</span>
</span></span><span style=display:flex><span>javiercruces@FJCD-PC:~ <span style=color:#f92672>[</span>prd-eu-central|<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>$ sudo ls -lh /var/lib/libvirt/images/ | grep debian13-base
</span></span><span style=display:flex><span>-rw------- <span style=color:#ae81ff>1</span> root         root  21G oct <span style=color:#ae81ff>18</span> 16:47 debian13-base.qcow2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># This way you&#39;d see the real size the disk occupies</span>
</span></span><span style=display:flex><span>javiercruces@FJCD-PC:~ <span style=color:#f92672>[</span>prd-eu-central|<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>$ sudo du -h --max-depth<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> /var/lib/libvirt/images/debian13-base.qcow2
</span></span><span style=display:flex><span>2,0G	/var/lib/libvirt/images/debian13-base.qcow2
</span></span></code></pre></div><p>Now we&rsquo;ll compress the base image to make it occupy less:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo virt-sparsify --compress <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  /var/lib/libvirt/images/debian13-base.qcow2 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  /var/lib/libvirt/images/plantilla-debian13-comprimida.qcow2
</span></span></code></pre></div><p>Keep in mind that before replacing the real image with the compressed one, you should test that a machine can boot using this new disk.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Replace the image with the compacted one</span>
</span></span><span style=display:flex><span>sudo mv /var/lib/libvirt/images/plantilla-debian13-comprimida.qcow2 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  /var/lib/libvirt/images/debian13-base.qcow2
</span></span></code></pre></div><p>Now, if we check the image size again, we&rsquo;ll see it went from occupying 2GB to 586MB:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>javiercruces@FJCD-PC:~$ sudo du -h --max-depth<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> /var/lib/libvirt/images/debian13-base.qcow2
</span></span><span style=display:flex><span>586M	/var/lib/libvirt/images/debian13-base.qcow2
</span></span></code></pre></div><hr><h2 id=4-mark-the-image-as-read-only-avoid-booting-the-template>4 Mark the image as read-only (avoid booting the template)</h2><p>To avoid losing the template, mark the image as read-only. If someone tries to boot it by mistake, it will fail.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo chmod <span style=color:#ae81ff>444</span> /var/lib/libvirt/images/debian13-base.qcow2
</span></span></code></pre></div><p>Also, if you want, rename the domain to identify it&rsquo;s a template. In my case I won&rsquo;t:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>virsh domrename debian13-base plantilla-debian13
</span></span></code></pre></div><hr><h2 id=5-create-clones-from-the-template>5 Create clones from the template</h2><p>You have two main ways:</p><ul><li>Full clone: independent image; takes as much space as the original.</li><li>Linked clone: creates an overlay layer on top of the template (read-only); takes less space, depends on the base.</li></ul><h3 id=51-full-clone>5.1 Full clone</h3><p>This way we&rsquo;ll create a full clone using the template disk that will occupy as much as the original:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo virt-clone --original debian13-base --name debian13-clonacion-completa <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --file /var/lib/libvirt/images/debian13-clonacion-completa.qcow2
</span></span></code></pre></div><p>With this command we&rsquo;ll have a new virtual machine with the same components as the template.</p><p>Before starting the full clone as a non-root user, make sure to set the correct owner and permissions on the newly created disk file. On many distributions the QEMU/libvirt process runs as <code>libvirt-qemu:libvirt-qemu</code> or <code>qemu:qemu</code>; if permissions are not corrected, starting the VM as a non-root user may fail.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>javiercruces@FJCD-PC:~$ sudo chown libvirt-qemu:libvirt-qemu /var/lib/libvirt/images/debian13-clonacion-completa.qcow2
</span></span><span style=display:flex><span>javiercruces@FJCD-PC:~$ sudo chmod <span style=color:#ae81ff>660</span> /var/lib/libvirt/images/debian13-clonacion-completa.qcow2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>javiercruces@FJCD-PC:~$ sudo virsh start debian13-clonacion-completa
</span></span><span style=display:flex><span>Domain <span style=color:#e6db74>&#39;debian13-clonacion-completa&#39;</span> started
</span></span></code></pre></div><p>If your distribution uses a different user/group for the qemu process (for example <code>qemu:qemu</code>), replace <code>libvirt-qemu:libvirt-qemu</code> accordingly. Also check SELinux/AppArmor policies if permission issues persist.</p><h3 id=52-linked-clone>5.2 Linked clone</h3><p>We can do this in two different ways.</p><p>The first is to generate the disk as a backing file to the template (read-only) using qemu-img:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo qemu-img create -f qcow2 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -F qcow2 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -b /var/lib/libvirt/images/debian13-base.qcow2 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  /var/lib/libvirt/images/debian13-clonacion-enlazada.qcow2
</span></span></code></pre></div><p>After generating the disk, we create the virtual machine using it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo virt-install <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name debian13-clonacion-enlazada <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --memory <span style=color:#ae81ff>4096</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --vcpus <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --disk path<span style=color:#f92672>=</span>/var/lib/libvirt/images/debian13-clonacion-enlazada.qcow2,format<span style=color:#f92672>=</span>qcow2 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --os-variant debian12 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --network network<span style=color:#f92672>=</span>default,model<span style=color:#f92672>=</span>virtio <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --import <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --noautoconsole
</span></span></code></pre></div><p>Before starting the cloned VM, make sure to set the correct owner and permissions on the newly created disk file to avoid access errors when the hypervisor process (qemu/libvirt) runs as a non-root user. On many systems the process runs as <code>libvirt-qemu:libvirt-qemu</code> or <code>qemu:qemu</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>javiercruces@FJCD-PC:~$ sudo chown libvirt-qemu:libvirt-qemu /var/lib/libvirt/images/debian13-clonacion-enlazada.qcow2
</span></span><span style=display:flex><span>javiercruces@FJCD-PC:~$ sudo chmod <span style=color:#ae81ff>660</span> /var/lib/libvirt/images/debian13-clonacion-enlazada.qcow2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>javiercruces@FJCD-PC:~$ sudo virsh start debian13-clonacion-enlazada
</span></span><span style=display:flex><span>Domain <span style=color:#e6db74>&#39;debian13-clonacion-enlazada&#39;</span> started
</span></span></code></pre></div><p>If your distribution uses a different user/group for qemu (for example <code>qemu:qemu</code>), replace <code>libvirt-qemu:libvirt-qemu</code> accordingly. Also check SELinux/AppArmor policies if you still encounter permission issues.</p><hr><h2 id=references>References</h2><ul><li><p><a href=https://github.com/josedom24/curso_virtualizacion_linux target=_blank rel=noopener>curso_virtualizacion_linux — GitHub</a></p></li><li><p><a href=https://libguestfs.org/virt-sysprep.1.html target=_blank rel=noopener>virt-sysprep (libguestfs)</a></p></li><li><p><a href=https://libguestfs.org/virt-sparsify.1.html target=_blank rel=noopener>virt-sparsify (libguestfs)</a></p></li><li><p><a href=https://libvirt.org/manpages/virt-clone.html target=_blank rel=noopener>virt-clone (libvirt)</a></p></li><li><p><a href=https://libguestfs.org/virt-customize.1.html target=_blank rel=noopener>virt-customize (libguestfs)</a></p></li><li><p><a href=https://www.qemu.org/docs/master/tools/qemu-img.html target=_blank rel=noopener>qemu-img (resize/create/backing)</a></p></li></ul></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fvirtualizacion-kvm-linux%2fgestion-maquinas-kvm%2fplantilla-debian13%2fplantilla-debian13%2f" target=_blank><i class="fab fa-facebook"></i>
</a><a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fvirtualizacion-kvm-linux%2fgestion-maquinas-kvm%2fplantilla-debian13%2fplantilla-debian13%2f&text=How%20to%20create%20a%20Debian%2013%20virtual%20machine%20template&via=Atlas" target=_blank><i class="fab fa-twitter"></i>
</a><a class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fvirtualizacion-kvm-linux%2fgestion-maquinas-kvm%2fplantilla-debian13%2fplantilla-debian13%2f&title=How%20to%20create%20a%20Debian%2013%20virtual%20machine%20template" target=_blank><i class="fab fa-reddit"></i>
</a><a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fvirtualizacion-kvm-linux%2fgestion-maquinas-kvm%2fplantilla-debian13%2fplantilla-debian13%2f&title=How%20to%20create%20a%20Debian%2013%20virtual%20machine%20template" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=How%20to%20create%20a%20Debian%2013%20virtual%20machine%20template https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fvirtualizacion-kvm-linux%2fgestion-maquinas-kvm%2fplantilla-debian13%2fplantilla-debian13%2f" target=_blank><i class="fab fa-whatsapp"></i>
</a><a class="btn icon-button" href="mailto:?subject=How%20to%20create%20a%20Debian%2013%20virtual%20machine%20template&body=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fvirtualizacion-kvm-linux%2fgestion-maquinas-kvm%2fplantilla-debian13%2fplantilla-debian13%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/javierasping/sentinel/edit/main/content/posts/virtualizacion-kvm-linux/gestion-maquinas-kvm/plantilla-debian13/plantilla-debian13.en.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"></div><hr></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#1-create-and-install-the-base-vm>1 Create and install the base VM</a></li><li><a href=#2-generalize-the-image-with-virt-sysprep>2 Generalize the image with virt-sysprep</a></li><li><a href=#3-compact-the-image-with-virt-sparsify>3 Compact the image with virt-sparsify</a></li><li><a href=#4-mark-the-image-as-read-only-avoid-booting-the-template>4 Mark the image as read-only (avoid booting the template)</a></li><li><a href=#5-create-clones-from-the-template>5 Create clones from the template</a><ul><li><a href=#51-full-clone>5.1 Full clone</a></li><li><a href=#52-linked-clone>5.2 Linked clone</a></li></ul></li><li><a href=#references>References</a></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#about>About Me</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#accomplishments>Certifications</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:contacto@javiercd.es target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>contacto@javiercd.es</span></a></li><li><a href=https://github.com/javierasping target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>javierasping</span></a></li><li><a href=https://www.linkedin.com/in/javiercd target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Francisco Javier Cruces Doval</span></a></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>Liability Notice:</strong> This theme is under MIT license. So, you can use it for non-commercial, commercial, or private uses. You can modify or distribute the theme without requiring any permission from the theme author. However, the theme author does not provide any warranty or takes any liability for any issue with the theme.</p></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu_b3360284c55cf72d.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2023 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.88e12b83fd69c92e719c3aa554a42e6d0f20fb72d76bd329f31250ef3bd11899.js integrity="sha256-iOErg/1pyS5xnDqlVKQubQ8g+3LXa9Mp8xJQ7zvRGJk=" defer></script></body></html>