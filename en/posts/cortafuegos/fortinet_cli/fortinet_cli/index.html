<!doctype html><html lang=en><head><title>Fortinet CLI</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.ddf4c4775d35e5bc3dd64c797b179f99eaf85cf9811e64bd08f8c44a68d0b229.css integrity="sha256-3fTEd1015bw91kx5exefmer4XPmBHmS9CPjESmjQsik="><link rel=icon type=image/png href=/images/site/avatar_hu_f10227dc088ad43a.jpg><meta property="og:title" content="Atlas"><meta property="og:type" content="website"><meta property="og:description" content="Portfolio and personal blog of Francisco Javier Cruces Doval"><meta property="og:image" content="/images/author/john.png"><meta property="og:url" content="https://www.javiercd.es"><meta name=description content="Fortinet CLI"><script async src="https://www.googletagmanager.com/gtag/js?id=G-GVDYVWJLRH"></script><script>var dnt,doNotTrack=!1;if(null&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GVDYVWJLRH")}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-GVDYVWJLRH"></script><script>var dnt,doNotTrack=!1;if(null&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GVDYVWJLRH")}</script><script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">let theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light";theme==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/en><img src=/images/site/masthead_hu_f10227dc088ad43a.png id=logo alt=Logo>
Atlas</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/en#home>Home</a></li><li class=nav-item><a class=nav-link href=/en#about>About Me</a></li><li class=nav-item><a class=nav-link href=/en#skills>Skills</a></li><li class=nav-item><a class=nav-link href=/en#education>Education</a></li><li class=nav-item><a class=nav-link href=/en#recent-posts>Recent Posts</a></li><li class=nav-item><a class=nav-link href=/en#accomplishments>Certifications</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/en/posts>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=languageSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><span class="fi fi-gb"></span>
English</a><div class=dropdown-menu aria-labelledby=languageSelector><a class="dropdown-item nav-link languages-item" href=/posts/cortafuegos/fortinet_cli/fortinet_cli><span class="fi fi-es"></span>
Espa√±ol
</a><a class="dropdown-item nav-link languages-item" href=/en/posts/cortafuegos/fortinet_cli/fortinet_cli><span class="fi fi-gb"></span>
English</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/site/masthead_hu_f10227dc088ad43a.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/masthead_hu_f10227dc088ad43a.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/en/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/en/posts/ data-filter=all>Posts</a></li><div class=subtree><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/ci_cd/> CI / CD Jenkins</a><ul><li><a class=list-link href=/en/posts/ci_cd/practica_jenkins/ title="CI / CD practice with Jenkins">CI / CD practice with Jenkins</a></li><li><a class=list-link href=/en/posts/ci_cd/taller1_jenkins/ title="Workshop 1 Ortho-rector of markdown documents (test)">Workshop 1 Ortho-rector of markdown documents (test)</a></li><li><a class=list-link href=/en/posts/ci_cd/taller2_jenkins/ title="Workshop 2 Valid HTML5 check and surge.sh deployment (test and deploy)">Workshop 2 Valid HTML5 check and surge.sh deployment (test and deploy)</a></li><li><a class=list-link href=/en/posts/ci_cd/taller3_jenkins/ title="Workshop 3 Continuous integration of django application (Test)">Workshop 3 Continuous integration of django application (Test)</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/base_de_datos/> Database</a><ul><li><a class=list-link href=/en/posts/base_de_datos/instalar_mariadb/ title="Install MariaDB in Debian">Install MariaDB in Debian</a></li><li><a class=list-link href=/en/posts/base_de_datos/interconexion_de_servidores/ title="Interconnection of database servers">Interconnection of database servers</a></li><li><a class=list-link href=/en/posts/base_de_datos/instalacion_oracle_19c_debian12/ title="Oracle 19c installation under Debian 12">Oracle 19c installation under Debian 12</a></li><li><a class=list-link href=/en/posts/base_de_datos/instalar_postgresql/ title="PostgreSQL installation in Debian 12">PostgreSQL installation in Debian 12</a></li><li><a class=list-link href=/en/posts/base_de_datos/oracle_acceso_remoto/ title="Remote access configuration in Oracle">Remote access configuration in Oracle</a></li><li><a class=list-link href=/en/posts/base_de_datos/acceso_remoto_mariadb/ title="Remote access in MariaDB">Remote access in MariaDB</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/docker/> Docker</a><ul><li><a class=list-link href=/en/posts/docker/instalar_docker_compose/ title="Docker Compose Installation on Ubuntu 24">Docker Compose Installation on Ubuntu 24</a></li><li><a class=list-link href=/en/posts/docker/instalar_docker_ubuntu24/ title="Docker Installation on Ubuntu 24">Docker Installation on Ubuntu 24</a></li><li><a class=list-link href=/en/posts/docker/taller1/ title="Workshop 1 Storage and networks in Docker">Workshop 1 Storage and networks in Docker</a></li><li><a class=list-link href=/en/posts/docker/taller2/ title="Workshop 2 Multicontainer Scenarios in Docker">Workshop 2 Multicontainer Scenarios in Docker</a></li><li><a class=list-link href=/en/posts/docker/taller3/ title="Workshop 3 Image creation Docker">Workshop 3 Image creation Docker</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/en/posts/cortafuegos/> Firewall</a><ul class=active><li><a class="active list-link" href=/en/posts/cortafuegos/fortinet_cli/ title="Fortinet CLI">Fortinet CLI</a></li><li><a class=list-link href=/en/posts/cortafuegos/fortinet_uno/ title="Perimetral with Fortinet I">Perimetral with Fortinet I</a></li><li><a class=list-link href=/en/posts/cortafuegos/fortinet_dos/ title="Perimetral with Fortinet II">Perimetral with Fortinet II</a></li><li><a class=list-link href=/en/posts/cortafuegos/nftables_uno/ title="Perimetral with Nftables I">Perimetral with Nftables I</a></li><li><a class=list-link href=/en/posts/cortafuegos/nftables_dos/ title="Perimetral with Nftables II">Perimetral with Nftables II</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/drivers/> Linux Drivers</a><ul><li><a class=list-link href=/en/posts/drivers/nvidia_driver/ title="Drivers Nvidia">Drivers Nvidia</a></li><li><a class=list-link href=/en/posts/drivers/nvidia_optimus/ title="How to choose which graph to use on my laptop with Linux">How to choose which graph to use on my laptop with Linux</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/redes/> Networks</a><ul><li><a class=list-link href=/en/posts/redes/android_gns3/ title="Android GNS3-KVM">Android GNS3-KVM</a></li><li><a class=list-link href=/en/posts/redes/escenario_ipv6_basico/ title="Basic IPv6 scenario">Basic IPv6 scenario</a></li><li><a class=list-link href=/en/posts/redes/instalacion_wireshark_gns3/ title="GNS3 and Wireshark installation">GNS3 and Wireshark installation</a></li><li><a class=list-link href=/en/posts/redes/instalar_gns3_debian12/ title="GNS3 installation in Debian 12">GNS3 installation in Debian 12</a></li><li><a class=list-link href=/en/posts/redes/switches_gns3/ title="GNS3 switch configuration">GNS3 switch configuration</a></li><li><a class=list-link href=/en/posts/redes/tuneles_ipv6/ title="IPV6 Tunnels">IPV6 Tunnels</a></li><li><a class=list-link href=/en/posts/redes/configuracion_de_nat/ title="NAT in Cisco and Linux">NAT in Cisco and Linux</a></li><li><a class=list-link href=/en/posts/redes/comandos_de_supervision_de_redes/ title="Network monitoring commands">Network monitoring commands</a></li><li><a class=list-link href=/en/posts/redes/enroutamiento_openstack/ title="OpenStack routing">OpenStack routing</a></li><li><a class=list-link href=/en/posts/redes/arp/ title="Protocol ARP">Protocol ARP</a></li><li><a class=list-link href=/en/posts/redes/underworld/ title=Underworld>Underworld</a></li><li><a class=list-link href=/en/posts/redes/underworld_evolution/ title="Underworld evolution">Underworld evolution</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/observabilidad/> Observability</a><ul><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/observabilidad/metricas/> Metrics</a><ul><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/observabilidad/metricas/prometheus/> Prometheus</a><ul><li><a class=list-link href=/en/posts/observabilidad/metricas/prometheus/instalacion_basica_docker_compose/ title="Installation of Prometheus with Docker Compose and Node Exporter on Debian 12">Installation of Prometheus with Docker Compose and Node Exporter on Debian 12</a></li></ul></li></ul></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/seguridad/> Security</a><ul><li><a class=list-link href=/en/posts/seguridad/forense/ title="Forensic computer">Forensic computer</a></li><li><a class=list-link href=/en/posts/seguridad/https_autofirmado/ title=HTTPS>HTTPS</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/> Services</a><ul><li><a class=list-link href=/en/posts/servicios/apache/ title=Apache>Apache</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dhcp/> DHCP</a><ul><li><a class=list-link href=/en/posts/servicios/dhcp/instalacion_y_configuracion_de_un_servidor_dhcp_en_linux/ title="Installation and Configuration of a DHCP Server on Linux">Installation and Configuration of a DHCP Server on Linux</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dns/> DNS</a><ul><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dns/bind9/> BIND9</a><ul><li><a class=list-link href=/en/posts/servicios/dns/bind9/dns_esclavo/ title="Configuring a Slave DNS Server with BIND9">Configuring a Slave DNS Server with BIND9</a></li><li><a class=list-link href=/en/posts/servicios/dns/bind9/instalacion_basica/ title="Installation and Configuration of BIND9 on Linux">Installation and Configuration of BIND9 on Linux</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dns/dnsmasq/> DNSMASQ</a><ul><li><a class=list-link href=/en/posts/servicios/dns/dnsmasq/instalacion_basica/ title="Local Server with DNSMasq">Local Server with DNSMasq</a></li></ul></li></ul></li><li><a class=list-link href=/en/posts/servicios/ftp/ title=FTP>FTP</a></li><li><a class=list-link href=/en/posts/servicios/nat_iptables/ title="NAT with iptables">NAT with iptables</a></li><li><a class=list-link href=/en/posts/servicios/ssh/ title=SSH>SSH</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/sistemas/> Systems</a><ul><li><a class=list-link href=/en/posts/sistemas/ad_ubuntu/ title="Active Directory in Ubuntu">Active Directory in Ubuntu</a></li><li><a class=list-link href=/en/posts/sistemas/recoleccion_logs_journald/ title="Centralized collection of logs journald">Centralized collection of logs journald</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/sistemas/compilaciones_linux/> Compilations in LINUX</a><ul><li><a class=list-link href=/en/posts/sistemas/compilaciones_linux/compilacion_de_un_programa_en_c_utilizando_un_makefile/ title="Compilation of a C-program using a Makefile">Compilation of a C-program using a Makefile</a></li><li><a class=list-link href=/en/posts/sistemas/compilaciones_linux/compilacion_de_un_kernel/ title="Compilation of a kernel">Compilation of a kernel</a></li></ul></li><li><a class=list-link href=/en/posts/sistemas/creacion_de_un_sistema_automatizado_de_instalacion/ title="Creation of an automated installation system">Creation of an automated installation system</a></li><li><a class=list-link href=/en/posts/sistemas/samba_debian/ title="Install and configure samba in Debian">Install and configure samba in Debian</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/sistemas/comandos_linux/> Linux Command</a><ul><li><a class=list-link href=/en/posts/sistemas/comandos_linux/ejercicios_de_modificacion_de_parametros_del_kernel/ title="Kernel parameter modification exercises">Kernel parameter modification exercises</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/comandos_procesos/ title="Linux processes">Linux processes</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/ejercicios_de_manejo_de_modulos/ title="Module management exercises">Module management exercises</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/gestion_de_paquetes/ title="Package management">Package management</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/empaquetadores_compresores/ title="Packaging and compressors">Packaging and compressors</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/ejercicios_gestion_de_paqueteria/ title="Paid management exercises">Paid management exercises</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/programacion_tareas/ title="Task programming">Task programming</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/sistemas/migraciones/> Migration in Linnux</a><ul><li><a class=list-link href=/en/posts/sistemas/migraciones/migracion_sistema_de_ficheros/ title="File system">File system</a></li><li><a class=list-link href=/en/posts/sistemas/migraciones/paso_de_centos_stream_8_a_centos_stream_9/ title="Migtation from CentOS stream 8 to CentOS stream 9">Migtation from CentOS stream 8 to CentOS stream 9</a></li><li><a class=list-link href=/en/posts/sistemas/migraciones/eliminacion_systemd/ title="Systemd elimination">Systemd elimination</a></li><li><a class=list-link href=/en/posts/sistemas/migraciones/transformacion_instancia_cloud/ title="Transformation instance cloud">Transformation instance cloud</a></li></ul></li><li><a class=list-link href=/en/posts/sistemas/nfs_debian/ title="NFS in Debian">NFS in Debian</a></li><li><a class=list-link href=/en/posts/sistemas/activacion_selinux/ title="SELinux activation configuration">SELinux activation configuration</a></li><li><a class=list-link href=/en/posts/sistemas/comparticion_de_directorios_en_windows/ title="Share resources in Windows">Share resources in Windows</a></li><li><a class=list-link href=/en/posts/sistemas/ssh_windows/ title="Ssh service in Windows">Ssh service in Windows</a></li><li><a class=list-link href=/en/posts/sistemas/almacenamiento_servidor_independiente/ title="Storage Spaces in Windows Server">Storage Spaces in Windows Server</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/vpn/> VPN</a><ul><li><a class=list-link href=/en/posts/vpn/comparativa_ovpn_wire/ title="OpenVPN and Wireguard Comparative">OpenVPN and Wireguard Comparative</a></li><li><a class=list-link href=/en/posts/vpn/acceso_remoto_openvpn/ title="OpenVPN remote access">OpenVPN remote access</a></li><li><a class=list-link href=/en/posts/vpn/acceso_remoto_strongswang/ title="Remote access Ipsec StrongSwan">Remote access Ipsec StrongSwan</a></li><li><a class=list-link href=/en/posts/vpn/ipsec_cisco/ title="Site-to-Site IPsec Cisco">Site-to-Site IPsec Cisco</a></li><li><a class=list-link href=/en/posts/vpn/site_to_site_fortinet/ title="Site-to-Site IPsec Fortinet">Site-to-Site IPsec Fortinet</a></li><li><a class=list-link href=/en/posts/vpn/site_to_site_openvpn/ title="Site-to-Site OpenVPN">Site-to-Site OpenVPN</a></li><li><a class=list-link href=/en/posts/vpn/site_to_site_wireguard/ title="Site-to-Site Wireguard">Site-to-Site Wireguard</a></li><li><a class=list-link href=/en/posts/vpn/acceso_remoto_wireguard/ title="Wireguard remote access">Wireguard remote access</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/iaw/> Web applications</a><ul><li><a class=list-link href=/en/posts/iaw/lamp/ title="LAMP stack installation">LAMP stack installation</a></li><li><a class=list-link href=/en/posts/iaw/lemp/ title="LEMP stack installation">LEMP stack installation</a></li><li><a class=list-link href=/en/posts/iaw/wordpress/ title="WordPress LAMP">WordPress LAMP</a></li><li><a class=list-link href=/en/posts/iaw/wordpress_lemp/ title="WordPress LEMP">WordPress LEMP</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/cortafuegos/fortinet_cli.png)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author/john_hu_2aff0fda0501496d.png alt="Author Image"><h5 class=author-name>Francisco Javier Cruces Doval</h5><p class=text-muted>Thursday, March 28, 2024 | 9 minutes</p></div><div class=title><h1>Fortinet CLI</h1></div><div class=tags><ul style=padding-left:0><li class=rounded><a href=/en/tags/firewall/ class="btn btn-sm btn-info">FIREWALL</a></li><li class=rounded><a href=/en/tags/fortinet/ class="btn btn-sm btn-info">FORTINET</a></li></ul></div><div class=post-content id=post-content><h2 id=equivalence-from-gui-to-cli>Equivalence from GUI to CLI</h2><p>Initially, I started the practice using the command line (CLI), however, I found it more comfortable to do it from the graphic interface. Therefore, I decided to establish an equivalence between the different actions I have carried out during practice and to compare them with their counterpart in the terminal.</p><blockquote><p>[NOTE]
In this post I do a small summary of the equivalencies between the GUI and the CLI of Fortinet that I have used in the 2 Fortinet firewall posts.</p></blockquote><h3 id=configure-an-interface>Configure an interface</h3><p>As we already have the set-up firewall we have 2 options when viewing the configuration of a particular interface.</p><p>See the configuration of all interfaces:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>show system interface
</span></span></code></pre></div><p>Or specify a particular one:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>show system interface port1
</span></span></code></pre></div><p>If we look at the configuration of the three interfaces I have established during practice, we can note that the syntax is very simple. Virtually, even without prior knowledge of the subject, it is easy to understand.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show system interface </span>
</span></span><span style=display:flex><span>config system interface
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>        set vdom <span style=color:#e6db74>&#34;root&#34;</span>
</span></span><span style=display:flex><span>        set ip 192.168.122.77 255.255.255.0
</span></span><span style=display:flex><span>        set allowaccess https http fgfm
</span></span><span style=display:flex><span>        set type physical
</span></span><span style=display:flex><span>        set alias <span style=color:#e6db74>&#34;WAN&#34;</span>
</span></span><span style=display:flex><span>        set lldp-reception enable
</span></span><span style=display:flex><span>        set role wan
</span></span><span style=display:flex><span>        set snmp-index <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;port2&#34;</span>
</span></span><span style=display:flex><span>        set vdom <span style=color:#e6db74>&#34;root&#34;</span>
</span></span><span style=display:flex><span>        set ip 192.168.100.1 255.255.255.0
</span></span><span style=display:flex><span>        set allowaccess ping https ssh http fgfm
</span></span><span style=display:flex><span>        set type physical
</span></span><span style=display:flex><span>        set alias <span style=color:#e6db74>&#34;LAN&#34;</span>
</span></span><span style=display:flex><span>        set device-identification enable
</span></span><span style=display:flex><span>        set lldp-transmission enable
</span></span><span style=display:flex><span>        set monitor-bandwidth enable
</span></span><span style=display:flex><span>        set role lan
</span></span><span style=display:flex><span>        set snmp-index <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;port3&#34;</span>
</span></span><span style=display:flex><span>        set vdom <span style=color:#e6db74>&#34;root&#34;</span>
</span></span><span style=display:flex><span>        set ip 192.168.200.1 255.255.255.0
</span></span><span style=display:flex><span>        set type physical
</span></span><span style=display:flex><span>        set alias <span style=color:#e6db74>&#34;DMZ&#34;</span>
</span></span><span style=display:flex><span>        set device-identification enable
</span></span><span style=display:flex><span>        set lldp-transmission enable
</span></span><span style=display:flex><span>        set role lan
</span></span><span style=display:flex><span>        set snmp-index <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    next 
</span></span></code></pre></div><p>As you can see in the port 1 interface that corresponds to the WAN, previously disable the access to configure it from this interface, but for comfort I have left it enabled to use my laptop&rsquo;s browser.</p><p>A configuration that may interest us is to set up a DHCP interface, in my case I will do it in port 4:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#Accedemos al modo de configuraci√≥n</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config system interface</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Seleccionamos la interfaz 4</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>interface<span style=color:#f92672>)</span> <span style=color:#75715e># edit &#34;port4&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#La ponemos en modo DHCP</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>port4<span style=color:#f92672>)</span> <span style=color:#75715e># set mode dhcp</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Salimos del modo de configuraci√≥n</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>port4<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>Now if we list the interface configuration, the change will have been applied:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show system interface port4</span>
</span></span><span style=display:flex><span>config system interface
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;port4&#34;</span>
</span></span><span style=display:flex><span>        set vdom <span style=color:#e6db74>&#34;root&#34;</span>
</span></span><span style=display:flex><span>        set mode dhcp
</span></span><span style=display:flex><span>        set type physical
</span></span><span style=display:flex><span>        set snmp-index <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>end
</span></span></code></pre></div><p>At this point, we note that the commands we have used match those that the system shows when listing the configuration.</p><p>Now, what we&rsquo;re interested in is knowing the IP address of our interface. If we want to list all the assigned IP addresses, we simply do not specify the interface name. In my case, I am interested to know the IP address of the port interface 4:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># get system interface physical port4</span>
</span></span><span style=display:flex><span><span style=color:#f92672>==</span> <span style=color:#f92672>[</span>onboard<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>==[</span>port4<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>		mode: dhcp
</span></span><span style=display:flex><span>		ip: 192.168.122.121 255.255.255.0
</span></span><span style=display:flex><span>		ipv6: ::/0
</span></span><span style=display:flex><span>		status: up
</span></span><span style=display:flex><span>		speed: 1000Mbps <span style=color:#f92672>(</span>Duplex: full<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>		FEC: none
</span></span><span style=display:flex><span>		FEC_cap: none
</span></span></code></pre></div><p>This is the basic thing we need to start setting up the interfaces. I leave you a [link] (https: / / docs.fortinet.com / document / fortigate / 7.0.0 / cli-reference / 10620 / config-system-interface) to the official documentation where it explains all the details.</p><h3 id=policies>Policies</h3><p>The next thing we have done in practice is to create rules from the CLI, so I will start by listing the existing rules, remember that in the test version we have a limit of 10 simultaneous rules so I have removed some rules during the performance of it.</p><p>To make the output more legible we will see a &ldquo;normal&rdquo; rule and a DNAT rule to compare them:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show firewall policy</span>
</span></span><span style=display:flex><span>config firewall policy
</span></span><span style=display:flex><span>    edit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        set name <span style=color:#e6db74>&#34;LAN_WAN_SSH&#34;</span>
</span></span><span style=display:flex><span>        set uuid 57bba290-e881-51ee-3bbe-3ba5903773ed
</span></span><span style=display:flex><span>        set srcintf <span style=color:#e6db74>&#34;port2&#34;</span>
</span></span><span style=display:flex><span>        set dstintf <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>        set action accept
</span></span><span style=display:flex><span>        set srcaddr <span style=color:#e6db74>&#34;all&#34;</span>
</span></span><span style=display:flex><span>        set dstaddr <span style=color:#e6db74>&#34;all&#34;</span>
</span></span><span style=display:flex><span>        set schedule <span style=color:#e6db74>&#34;always&#34;</span>
</span></span><span style=display:flex><span>        set service <span style=color:#e6db74>&#34;SSH&#34;</span>
</span></span><span style=display:flex><span>        set nat enable
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>    edit <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>        set name <span style=color:#e6db74>&#34;WAN_LAN_DNAT_SSH&#34;</span>
</span></span><span style=display:flex><span>        set uuid bdd84292-e884-51ee-a5d3-20eabb2fd433
</span></span><span style=display:flex><span>        set srcintf <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>        set dstintf <span style=color:#e6db74>&#34;port2&#34;</span>
</span></span><span style=display:flex><span>        set action accept
</span></span><span style=display:flex><span>        set srcaddr <span style=color:#e6db74>&#34;all&#34;</span>
</span></span><span style=display:flex><span>        set dstaddr <span style=color:#e6db74>&#34;DNAT_SSH&#34;</span>
</span></span><span style=display:flex><span>        set schedule <span style=color:#e6db74>&#34;always&#34;</span>
</span></span><span style=display:flex><span>        set service <span style=color:#e6db74>&#34;SSH&#34;</span>
</span></span><span style=display:flex><span>        set utm-status enable
</span></span><span style=display:flex><span>        set ssl-ssh-profile <span style=color:#e6db74>&#34;certificate-inspection&#34;</span>
</span></span><span style=display:flex><span>        set ips-sensor <span style=color:#e6db74>&#34;block_xmas&#34;</span>
</span></span><span style=display:flex><span>        set nat enable
</span></span><span style=display:flex><span>    next 
</span></span></code></pre></div><p>We see that the output is quite clear, if we stop to see the common parameters:</p><ul><li>name: Name we want to give to the rule.</li><li>UUID: A unique identifier that automatically assigns the FW to each rule.</li><li>srcintf: Home interface (The way the traffic enters)</li><li>dstantf: Home interface (From where the traffic enters)</li><li>action: What action we want you to make the rule accept - 124; deny.</li><li>srcaddr: address of origin</li><li>dstaddr: Address of destination</li><li>schedule: Regulation programming, in case it is a temporary rule this will only be active for a certain time.</li><li>service: Service name (assigned to a port number)</li><li>nat: If we want the rule to make SNAT.</li></ul><p>This would be the basic syntax of each rule as you see between a &ldquo;normal&rdquo; rule and one of DNAT the only thing that changes is the traffic address and the target IP that on this device is a virtual IP.</p><p>If we want to delete a rule, we will do the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#Accedemos al modo de configuracion de las politicas de seguridad</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config firewall policy</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Borraremos la regla segun el id de la misma</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>policy<span style=color:#f92672>)</span> <span style=color:#75715e># delete 2</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Salimos de la configuracion</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>policy<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>To add a new rule, the syntax is similar to when we list the rules, but we need to specify an ID number when creating it. You should know the number of the last rule you added. If you don&rsquo;t indicate a number, a new rule will not be created.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG#config firewall policy
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>policy<span style=color:#f92672>)</span> <span style=color:#75715e># edit 12</span>
</span></span><span style=display:flex><span>new entry <span style=color:#e6db74>&#39;12&#39;</span> added
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set name &#34;LAN_WAN_DNS&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set srcintf &#34;port2&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set dstintf &#34;port1&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set action accept</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set srcaddr &#34;all&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set dstaddr &#34;Google_DNS&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set schedule &#34;always&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set service &#34;DNS&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e>#         set nat enable</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> <span style=color:#75715e># next</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>policy<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>There are many more options that I ignore that have not been necessary to use in practice, I leave you a <a href=https://docs.fortinet.com/document/fortigate/7.0.0/cli-reference/323620/config-firewall-policy target=_blank rel=noopener>link</a> to the official documentation where details all the different options.</p><h3 id=services>Services</h3><p>Services are objects that store a number or set of ports that you will later use when creating rules. Although these devices come with the most common manufacturing services, it is often necessary that we create a new one according to our needs.</p><p>As with the previous listing commands, we can list all the services or one in particular:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show firewall service custom</span>
</span></span><span style=display:flex><span>config firewall service custom
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;DNS&#34;</span>
</span></span><span style=display:flex><span>        set category <span style=color:#e6db74>&#34;Network Services&#34;</span>
</span></span><span style=display:flex><span>        set tcp-portrange <span style=color:#ae81ff>53</span>
</span></span><span style=display:flex><span>        set udp-portrange <span style=color:#ae81ff>53</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>   edit <span style=color:#e6db74>&#34;HTTP&#34;</span>
</span></span><span style=display:flex><span>        set category <span style=color:#e6db74>&#34;Web Access&#34;</span>
</span></span><span style=display:flex><span>        set tcp-portrange <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;HTTPS&#34;</span>
</span></span><span style=display:flex><span>        set category <span style=color:#e6db74>&#34;Web Access&#34;</span>
</span></span><span style=display:flex><span>        set tcp-portrange <span style=color:#ae81ff>443</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># show firewall service custom SSH_2222 </span>
</span></span><span style=display:flex><span>config firewall service custom
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;SSH_2222&#34;</span>
</span></span><span style=display:flex><span>        set category <span style=color:#e6db74>&#34;Remote Access&#34;</span>
</span></span><span style=display:flex><span>        set tcp-portrange <span style=color:#ae81ff>2222</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>end
</span></span></code></pre></div><p>To delete a service, we will follow the following steps:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#Accedemos a la configuraci√≥n de los servicios</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config firewall service custom</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Borramos el servicio indicando el nombre</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>custom<span style=color:#f92672>)</span> <span style=color:#75715e># delete SSH_2222</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Salimos del modo de configuraci√≥n</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>custom<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>If we want to create it, we will follow the following steps:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#Accedemos a la configuraci√≥n de los servicios</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config firewall service custom</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Le asignamos un nombre</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>custom<span style=color:#f92672>)</span> <span style=color:#75715e># edit SSH_2222</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Opcionalmente lo a√±adimos a una categoria</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>SSH_2222<span style=color:#f92672>)</span> <span style=color:#75715e># set category &#34;Remote Access&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Indicamos los puertos que hace referencia al mismo</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>SSH_2222<span style=color:#f92672>)</span> <span style=color:#75715e># set tcp-portrange 2222</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Guardamos y salimos del modo de confuguraci√≥n</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>SSH_2222<span style=color:#f92672>)</span> <span style=color:#75715e># next</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>custom<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>I leave you a [link] (https: / / docs.fortinet.com / document / fortigate / 7.0.0 / ngfw-deployment / 546227 / creating-service-objects) to the official documentation concerning the services where you explain in detail all the options of the services.</p><h3 id=virtual-pis>Virtual PIs</h3><p>The VIPs are used to map external IP addresses to internal IP addresses. This is also called DNAT, where the destination of a package is being sent to a different address.</p><p>Static VIP are commonly used to map public IP addresses to resources behind the FortiGate that use private IP addresses. A static VIP one by one is when the entire range of ports is mapped. A port forwarding VIP is when the mapping is set up in a specific port or port range.</p><p>If we want to list the different virtual PIs we have we will use the following command, if we only want to list one in particular we will indicate its name:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show firewall vip</span>
</span></span><span style=display:flex><span>config firewall vip
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;DNAT_POSTFIX&#34;</span>
</span></span><span style=display:flex><span>        set uuid a343ec4a-e881-51ee-0ec1-ad73db3ff299
</span></span><span style=display:flex><span>        set service <span style=color:#e6db74>&#34;SMTP&#34;</span>
</span></span><span style=display:flex><span>        set extip 192.168.100.1
</span></span><span style=display:flex><span>        set mappedip <span style=color:#e6db74>&#34;192.168.200.2&#34;</span>
</span></span><span style=display:flex><span>        set extintf <span style=color:#e6db74>&#34;port2&#34;</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;DNAT_SSH&#34;</span>
</span></span><span style=display:flex><span>        set uuid a2b62344-e884-51ee-1a11-8946fda2bd91
</span></span><span style=display:flex><span>        set service <span style=color:#e6db74>&#34;SSH_2222&#34;</span>
</span></span><span style=display:flex><span>        set extip 192.168.122.77
</span></span><span style=display:flex><span>        set mappedip <span style=color:#e6db74>&#34;192.168.100.2&#34;</span>
</span></span><span style=display:flex><span>        set extintf <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>        set portforward enable
</span></span><span style=display:flex><span>        set mappedport <span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># show firewall vip DNAT_HELA_WEB</span>
</span></span><span style=display:flex><span>config firewall vip
</span></span><span style=display:flex><span>    edit <span style=color:#e6db74>&#34;DNAT_HELA_WEB&#34;</span>
</span></span><span style=display:flex><span>        set uuid a417a8f8-edf6-51ee-f601-43829c174966
</span></span><span style=display:flex><span>        set service <span style=color:#e6db74>&#34;HTTP&#34;</span>
</span></span><span style=display:flex><span>        set extip 192.168.122.77
</span></span><span style=display:flex><span>        set mappedip <span style=color:#e6db74>&#34;192.168.200.2&#34;</span>
</span></span><span style=display:flex><span>        set extintf <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>end
</span></span></code></pre></div><p>In case we want to remove one of these virtual PIs, we will follow the following steps:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#Accedemos al modo de configuraci√≥n</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config firewall vip</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Borramos la IP virtual indicando su nombre</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>vip<span style=color:#f92672>)</span> <span style=color:#75715e># delete DNAT_HELA_WEB</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Salimos del modo de configuraci√≥n</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>vip<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>On the other hand to create one of these, as we have done from the GUI we will follow the following steps:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#Accedemos al modo de configuraci√≥n</span>
</span></span><span style=display:flex><span>FTG <span style=color:#75715e># config firewall vip</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Le asignamos el nombre que deseemos</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>vip<span style=color:#f92672>)</span> <span style=color:#75715e># edit DNAT_HELA_WEB</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Indicamos opcionalmente sobre el servicio que sera usado esta IP virtual</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>DNAT_HELA_WEB<span style=color:#f92672>)</span> <span style=color:#75715e># set service &#34;HTTP&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Indicamos la Ip externa</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>DNAT_HELA_WEB<span style=color:#f92672>)</span> <span style=color:#75715e># set extip 192.168.122.77</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Indicamos la Ip interna</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>DNAT_HELA_WEB<span style=color:#f92672>)</span> <span style=color:#75715e># set mappedip &#34;192.168.200.2&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Indicamos la interfaz externa</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>DNAT_HELA_WEB<span style=color:#f92672>)</span> <span style=color:#75715e># set extintf &#34;port1&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Guardamos y salimos</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>DNAT_HELA_WEB<span style=color:#f92672>)</span> <span style=color:#75715e># next</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>vip<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>Virtual IP have more configuration parameters that I have not used in practice, I leave you a [link] (https: / / docs.fortinet.com / document / fortigate / 7.0.9 / administration-guide / 510402 / static-virtual-ips) to the official documentation where you detail all the settings that we can access with them.</p><h3 id=static-routes>Static routes</h3><p>Our device needs to know where to send the traffic, for this there are static routes.</p><p>To list the routes that our firewall has set up, we will use the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># show router static</span>
</span></span><span style=display:flex><span>config router static
</span></span><span style=display:flex><span>    edit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        set gateway 192.168.122.1
</span></span><span style=display:flex><span>        set device <span style=color:#e6db74>&#34;port1&#34;</span>
</span></span><span style=display:flex><span>    next
</span></span><span style=display:flex><span>end
</span></span></code></pre></div><p>As we have done before, if we want to remove this default route we will follow the following steps:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># config router static</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>static<span style=color:#f92672>)</span> <span style=color:#75715e># delete 1</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>static<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div><p>If we want to add a route, you can use this example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>FTG <span style=color:#75715e># config router static</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>static<span style=color:#f92672>)</span> <span style=color:#75715e># edit 1</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#El siguiete salto o puerta de enlace</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> <span style=color:#75715e># set gateway 192.168.122.1</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#La interfaz por donde saldra el trafico</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> <span style=color:#75715e># set device &#34;port1&#34;</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> <span style=color:#75715e># next</span>
</span></span><span style=display:flex><span>FTG <span style=color:#f92672>(</span>static<span style=color:#f92672>)</span> <span style=color:#75715e># end</span>
</span></span></code></pre></div></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f" target=_blank><i class="fab fa-facebook"></i>
</a><a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f&text=Fortinet%20CLI&via=Atlas" target=_blank><i class="fab fa-twitter"></i>
</a><a class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f&title=Fortinet%20CLI" target=_blank><i class="fab fa-reddit"></i>
</a><a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f&title=Fortinet%20CLI" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=Fortinet%20CLI https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f" target=_blank><i class="fab fa-whatsapp"></i>
</a><a class="btn icon-button" href="mailto:?subject=Fortinet%20CLI&body=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fcortafuegos%2ffortinet_cli%2ffortinet_cli%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/javierasping/sentinel/edit/main/content/posts/cortafuegos/fortinet_cli/fortinet_cli.en.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"></div><hr></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#equivalence-from-gui-to-cli>Equivalence from GUI to CLI</a><ul><li><a href=#configure-an-interface>Configure an interface</a></li><li><a href=#policies>Policies</a></li><li><a href=#services>Services</a></li><li><a href=#virtual-pis>Virtual PIs</a></li><li><a href=#static-routes>Static routes</a></li></ul></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#about>About Me</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#accomplishments>Certifications</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:contacto@javiercd.es target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>contacto@javiercd.es</span></a></li><li><a href=https://github.com/javierasping target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>javierasping</span></a></li><li><a href=https://www.linkedin.com/in/javiercd target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Francisco Javier Cruces Doval</span></a></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>Liability Notice:</strong> This theme is under MIT license. So, you can use it for non-commercial, commercial, or private uses. You can modify or distribute the theme without requiring any permission from the theme author. However, the theme author does not provide any warranty or takes any liability for any issue with the theme.</p></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu_b3360284c55cf72d.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">¬© 2023 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.29119cfdb8d2f06f4caaea7b9908096b5c109c5174eab5fca7e4e0efb0ffcaa0.js integrity="sha256-KRGc/bjS8G9Mqup7mQgJa1wQnFF06rX8p+Tg77D/yqA=" defer></script></body></html>