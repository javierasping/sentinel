<!doctype html><html lang=en><head><title>Active Directory in Ubuntu</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.ddf4c4775d35e5bc3dd64c797b179f99eaf85cf9811e64bd08f8c44a68d0b229.css integrity="sha256-3fTEd1015bw91kx5exefmer4XPmBHmS9CPjESmjQsik="><link rel=icon type=image/png href=/images/site/avatar_hu_f10227dc088ad43a.jpg><meta property="og:title" content="Atlas"><meta property="og:type" content="website"><meta property="og:description" content="Portfolio and personal blog of Francisco Javier Cruces Doval"><meta property="og:image" content="/images/author/john.png"><meta property="og:url" content="https://www.javiercd.es"><meta name=description content="Install and configure samba in Debian"><script async src="https://www.googletagmanager.com/gtag/js?id=G-GVDYVWJLRH"></script><script>var dnt,doNotTrack=!1;if(null&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GVDYVWJLRH")}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-GVDYVWJLRH"></script><script>var dnt,doNotTrack=!1;if(null&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GVDYVWJLRH")}</script><script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">let theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light";theme==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/en><img src=/images/site/masthead_hu_f10227dc088ad43a.png id=logo alt=Logo>
Atlas</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/en#home>Home</a></li><li class=nav-item><a class=nav-link href=/en#about>About Me</a></li><li class=nav-item><a class=nav-link href=/en#skills>Skills</a></li><li class=nav-item><a class=nav-link href=/en#education>Education</a></li><li class=nav-item><a class=nav-link href=/en#recent-posts>Recent Posts</a></li><li class=nav-item><a class=nav-link href=/en#accomplishments>Certifications</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/en/posts>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=languageSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><span class="fi fi-gb"></span>
English</a><div class=dropdown-menu aria-labelledby=languageSelector><a class="dropdown-item nav-link languages-item" href=/posts/sistemas/ad_ubuntu/ad_ubuntu><span class="fi fi-es"></span>
Espa√±ol
</a><a class="dropdown-item nav-link languages-item" href=/en/posts/sistemas/ad_ubuntu/ad_ubuntu><span class="fi fi-gb"></span>
English</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/site/masthead_hu_f10227dc088ad43a.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/masthead_hu_f10227dc088ad43a.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/en/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/en/posts/ data-filter=all>Posts</a></li><div class=subtree><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/ci_cd/> CI / CD Jenkins</a><ul><li><a class=list-link href=/en/posts/ci_cd/practica_jenkins/ title="CI / CD practice with Jenkins">CI / CD practice with Jenkins</a></li><li><a class=list-link href=/en/posts/ci_cd/taller1_jenkins/ title="Workshop 1 Ortho-rector of markdown documents (test)">Workshop 1 Ortho-rector of markdown documents (test)</a></li><li><a class=list-link href=/en/posts/ci_cd/taller2_jenkins/ title="Workshop 2 Valid HTML5 check and surge.sh deployment (test and deploy)">Workshop 2 Valid HTML5 check and surge.sh deployment (test and deploy)</a></li><li><a class=list-link href=/en/posts/ci_cd/taller3_jenkins/ title="Workshop 3 Continuous integration of django application (Test)">Workshop 3 Continuous integration of django application (Test)</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/base_de_datos/> Database</a><ul><li><a class=list-link href=/en/posts/base_de_datos/instalar_mariadb/ title="Install MariaDB in Debian">Install MariaDB in Debian</a></li><li><a class=list-link href=/en/posts/base_de_datos/interconexion_de_servidores/ title="Interconnection of database servers">Interconnection of database servers</a></li><li><a class=list-link href=/en/posts/base_de_datos/instalacion_oracle_19c_debian12/ title="Oracle 19c installation under Debian 12">Oracle 19c installation under Debian 12</a></li><li><a class=list-link href=/en/posts/base_de_datos/instalar_postgresql/ title="PostgreSQL installation in Debian 12">PostgreSQL installation in Debian 12</a></li><li><a class=list-link href=/en/posts/base_de_datos/oracle_acceso_remoto/ title="Remote access configuration in Oracle">Remote access configuration in Oracle</a></li><li><a class=list-link href=/en/posts/base_de_datos/acceso_remoto_mariadb/ title="Remote access in MariaDB">Remote access in MariaDB</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/docker/> Docker</a><ul><li><a class=list-link href=/en/posts/docker/instalar_docker_compose/ title="Docker Compose Installation on Ubuntu 24">Docker Compose Installation on Ubuntu 24</a></li><li><a class=list-link href=/en/posts/docker/instalar_docker_ubuntu24/ title="Docker Installation on Ubuntu 24">Docker Installation on Ubuntu 24</a></li><li><a class=list-link href=/en/posts/docker/taller1/ title="Workshop 1 Storage and networks in Docker">Workshop 1 Storage and networks in Docker</a></li><li><a class=list-link href=/en/posts/docker/taller2/ title="Workshop 2 Multicontainer Scenarios in Docker">Workshop 2 Multicontainer Scenarios in Docker</a></li><li><a class=list-link href=/en/posts/docker/taller3/ title="Workshop 3 Image creation Docker">Workshop 3 Image creation Docker</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/cortafuegos/> Firewall</a><ul><li><a class=list-link href=/en/posts/cortafuegos/fortinet_cli/ title="Fortinet CLI">Fortinet CLI</a></li><li><a class=list-link href=/en/posts/cortafuegos/fortinet_uno/ title="Perimetral with Fortinet I">Perimetral with Fortinet I</a></li><li><a class=list-link href=/en/posts/cortafuegos/fortinet_dos/ title="Perimetral with Fortinet II">Perimetral with Fortinet II</a></li><li><a class=list-link href=/en/posts/cortafuegos/nftables_uno/ title="Perimetral with Nftables I">Perimetral with Nftables I</a></li><li><a class=list-link href=/en/posts/cortafuegos/nftables_dos/ title="Perimetral with Nftables II">Perimetral with Nftables II</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/drivers/> Linux Drivers</a><ul><li><a class=list-link href=/en/posts/drivers/nvidia_driver/ title="Drivers Nvidia">Drivers Nvidia</a></li><li><a class=list-link href=/en/posts/drivers/nvidia_optimus/ title="How to choose which graph to use on my laptop with Linux">How to choose which graph to use on my laptop with Linux</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/redes/> Networks</a><ul><li><a class=list-link href=/en/posts/redes/android_gns3/ title="Android GNS3-KVM">Android GNS3-KVM</a></li><li><a class=list-link href=/en/posts/redes/escenario_ipv6_basico/ title="Basic IPv6 scenario">Basic IPv6 scenario</a></li><li><a class=list-link href=/en/posts/redes/instalacion_wireshark_gns3/ title="GNS3 and Wireshark installation">GNS3 and Wireshark installation</a></li><li><a class=list-link href=/en/posts/redes/instalar_gns3_debian12/ title="GNS3 installation in Debian 12">GNS3 installation in Debian 12</a></li><li><a class=list-link href=/en/posts/redes/switches_gns3/ title="GNS3 switch configuration">GNS3 switch configuration</a></li><li><a class=list-link href=/en/posts/redes/tuneles_ipv6/ title="IPV6 Tunnels">IPV6 Tunnels</a></li><li><a class=list-link href=/en/posts/redes/configuracion_de_nat/ title="NAT in Cisco and Linux">NAT in Cisco and Linux</a></li><li><a class=list-link href=/en/posts/redes/comandos_de_supervision_de_redes/ title="Network monitoring commands">Network monitoring commands</a></li><li><a class=list-link href=/en/posts/redes/enroutamiento_openstack/ title="OpenStack routing">OpenStack routing</a></li><li><a class=list-link href=/en/posts/redes/arp/ title="Protocol ARP">Protocol ARP</a></li><li><a class=list-link href=/en/posts/redes/underworld/ title=Underworld>Underworld</a></li><li><a class=list-link href=/en/posts/redes/underworld_evolution/ title="Underworld evolution">Underworld evolution</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/seguridad/> Security</a><ul><li><a class=list-link href=/en/posts/seguridad/forense/ title="Forensic computer">Forensic computer</a></li><li><a class=list-link href=/en/posts/seguridad/https_autofirmado/ title=HTTPS>HTTPS</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/> Services</a><ul><li><a class=list-link href=/en/posts/servicios/apache/ title=Apache>Apache</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dhcp/> DHCP</a><ul><li><a class=list-link href=/en/posts/servicios/dhcp/instalacion_y_configuracion_de_un_servidor_dhcp_en_linux/ title="Installation and Configuration of a DHCP Server on Linux">Installation and Configuration of a DHCP Server on Linux</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dns/> DNS</a><ul><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dns/bind9/> BIND9</a><ul><li><a class=list-link href=/en/posts/servicios/dns/bind9/dns_esclavo/ title="Configuring a Slave DNS Server with BIND9">Configuring a Slave DNS Server with BIND9</a></li><li><a class=list-link href=/en/posts/servicios/dns/bind9/instalacion_basica/ title="Installation and Configuration of BIND9 on Linux">Installation and Configuration of BIND9 on Linux</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/servicios/dns/dnsmasq/> DNSMASQ</a><ul><li><a class=list-link href=/en/posts/servicios/dns/dnsmasq/instalacion_basica/ title="Local Server with DNSMasq">Local Server with DNSMasq</a></li></ul></li></ul></li><li><a class=list-link href=/en/posts/servicios/ftp/ title=FTP>FTP</a></li><li><a class=list-link href=/en/posts/servicios/nat_iptables/ title="NAT with iptables">NAT with iptables</a></li><li><a class=list-link href=/en/posts/servicios/ssh/ title=SSH>SSH</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/en/posts/sistemas/> Systems</a><ul class=active><li><a class="active list-link" href=/en/posts/sistemas/ad_ubuntu/ title="Active Directory in Ubuntu">Active Directory in Ubuntu</a></li><li><a class=list-link href=/en/posts/sistemas/recoleccion_logs_journald/ title="Centralized collection of logs journald">Centralized collection of logs journald</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/sistemas/compilaciones_linux/> Compilations in LINUX</a><ul><li><a class=list-link href=/en/posts/sistemas/compilaciones_linux/compilacion_de_un_programa_en_c_utilizando_un_makefile/ title="Compilation of a C-program using a Makefile">Compilation of a C-program using a Makefile</a></li><li><a class=list-link href=/en/posts/sistemas/compilaciones_linux/compilacion_de_un_kernel/ title="Compilation of a kernel">Compilation of a kernel</a></li></ul></li><li><a class=list-link href=/en/posts/sistemas/creacion_de_un_sistema_automatizado_de_instalacion/ title="Creation of an automated installation system">Creation of an automated installation system</a></li><li><a class=list-link href=/en/posts/sistemas/samba_debian/ title="Install and configure samba in Debian">Install and configure samba in Debian</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/sistemas/comandos_linux/> Linux Command</a><ul><li><a class=list-link href=/en/posts/sistemas/comandos_linux/ejercicios_de_modificacion_de_parametros_del_kernel/ title="Kernel parameter modification exercises">Kernel parameter modification exercises</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/comandos_procesos/ title="Linux processes">Linux processes</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/ejercicios_de_manejo_de_modulos/ title="Module management exercises">Module management exercises</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/gestion_de_paquetes/ title="Package management">Package management</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/empaquetadores_compresores/ title="Packaging and compressors">Packaging and compressors</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/ejercicios_gestion_de_paqueteria/ title="Paid management exercises">Paid management exercises</a></li><li><a class=list-link href=/en/posts/sistemas/comandos_linux/programacion_tareas/ title="Task programming">Task programming</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/sistemas/migraciones/> Migration in Linnux</a><ul><li><a class=list-link href=/en/posts/sistemas/migraciones/migracion_sistema_de_ficheros/ title="File system">File system</a></li><li><a class=list-link href=/en/posts/sistemas/migraciones/paso_de_centos_stream_8_a_centos_stream_9/ title="Migtation from CentOS stream 8 to CentOS stream 9">Migtation from CentOS stream 8 to CentOS stream 9</a></li><li><a class=list-link href=/en/posts/sistemas/migraciones/eliminacion_systemd/ title="Systemd elimination">Systemd elimination</a></li><li><a class=list-link href=/en/posts/sistemas/migraciones/transformacion_instancia_cloud/ title="Transformation instance cloud">Transformation instance cloud</a></li></ul></li><li><a class=list-link href=/en/posts/sistemas/nfs_debian/ title="NFS in Debian">NFS in Debian</a></li><li><a class=list-link href=/en/posts/sistemas/activacion_selinux/ title="SELinux activation configuration">SELinux activation configuration</a></li><li><a class=list-link href=/en/posts/sistemas/comparticion_de_directorios_en_windows/ title="Share resources in Windows">Share resources in Windows</a></li><li><a class=list-link href=/en/posts/sistemas/ssh_windows/ title="Ssh service in Windows">Ssh service in Windows</a></li><li><a class=list-link href=/en/posts/sistemas/almacenamiento_servidor_independiente/ title="Storage Spaces in Windows Server">Storage Spaces in Windows Server</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/vpn/> VPN</a><ul><li><a class=list-link href=/en/posts/vpn/comparativa_ovpn_wire/ title="OpenVPN and Wireguard Comparative">OpenVPN and Wireguard Comparative</a></li><li><a class=list-link href=/en/posts/vpn/acceso_remoto_openvpn/ title="OpenVPN remote access">OpenVPN remote access</a></li><li><a class=list-link href=/en/posts/vpn/acceso_remoto_strongswang/ title="Remote access Ipsec StrongSwan">Remote access Ipsec StrongSwan</a></li><li><a class=list-link href=/en/posts/vpn/ipsec_cisco/ title="Site-to-Site IPsec Cisco">Site-to-Site IPsec Cisco</a></li><li><a class=list-link href=/en/posts/vpn/site_to_site_fortinet/ title="Site-to-Site IPsec Fortinet">Site-to-Site IPsec Fortinet</a></li><li><a class=list-link href=/en/posts/vpn/site_to_site_openvpn/ title="Site-to-Site OpenVPN">Site-to-Site OpenVPN</a></li><li><a class=list-link href=/en/posts/vpn/site_to_site_wireguard/ title="Site-to-Site Wireguard">Site-to-Site Wireguard</a></li><li><a class=list-link href=/en/posts/vpn/acceso_remoto_wireguard/ title="Wireguard remote access">Wireguard remote access</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/iaw/> Web applications</a><ul><li><a class=list-link href=/en/posts/iaw/lamp/ title="LAMP stack installation">LAMP stack installation</a></li><li><a class=list-link href=/en/posts/iaw/lemp/ title="LEMP stack installation">LEMP stack installation</a></li><li><a class=list-link href=/en/posts/iaw/wordpress/ title="WordPress LAMP">WordPress LAMP</a></li><li><a class=list-link href=/en/posts/iaw/wordpress_lemp/ title="WordPress LEMP">WordPress LEMP</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/sistemas/ad_ubuntu/portada.jpeg)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author/john_hu_2aff0fda0501496d.png alt="Author Image"><h5 class=author-name>Francisco Javier Cruces Doval</h5><p class=text-muted>Wednesday, September 20, 2023 | 20 minutes</p></div><div class=title><h1>Active Directory in Ubuntu</h1></div><div class=tags><ul style=padding-left:0><li class=rounded><a href=/en/tags/debian-12/ class="btn btn-sm btn-info">Debian 12</a></li><li class=rounded><a href=/en/tags/sistemas/ class="btn btn-sm btn-info">Sistemas</a></li><li class=rounded><a href=/en/tags/iso/ class="btn btn-sm btn-info">ISO</a></li><li class=rounded><a href=/en/tags/aso/ class="btn btn-sm btn-info">ASO</a></li></ul></div><div class=post-content id=post-content><p>In this post, we will explore how to set up an Active Directory environment on an Ubuntu server using tools such as Kerberos and Samba. Active Directory is an integral Microsoft solution for identity management and access control in business networks. Through this guide, we will learn step by step how to implement a Ubuntu server as a domain controller, establish Kerberos-based authentication and configure directory services by using Samba.</p><h2 id=introduction>Introduction</h2><p>You want to set up a Linux server (Ubuntu Server 20.04 LTS) to service a set of client equipment (Windows and Linux).</p><p>I will take advantage that the stage is mounted from previous class activities and I will restore the snapshots to have the clean machines.</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.001.png alt></p><h3 id=preparation-of-the-environment>Preparation of the environment</h3><h2 id=1-the-linux-server-will-not-have-a-graphic-environment-you-will-have-at-least-the-partitions-root-home-and-exchange>1. The Linux server will not have a graphic environment. You will have at least the partitions: root, home and exchange.</h2><p>Here we can see that I have no graphic environment installed, we can see that the service is active, however, no environment is launched. Also, if we look for any process with the best known desktop names, it doesn&rsquo;t give us any results.</p><p>Here I show you the partitions that my Ubuntu server has (root, boot, home and swap):</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.002.png alt></p><p>#2. The server must be prepared for remote administration (from now on all management will be done remotely from another network equipment).</p><p>To manage it remotely I will use ssh, for this we install it on the server:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.003.png alt></p><p>Once it is installed we will have it running, no configuration is necessary.</p><p>If we check the service status we can see that you have taken the default configuration:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.004.png alt></p><p>To connect remotely we will need to know the IP of the equipment or the name:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.005.jpeg alt></p><p>In my case I will connect from the external network to our server (enp0s3), we have previously configured the network with netplan:</p><p>And we have implemented the changes:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.006.png alt></p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.007.png alt></p><p>Once we know this data we will connect by ssh from a machine in our network to follow with the other sections, in my case I will use my host machine, for this I have installed the openssh-client package previously:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.008.jpeg alt></p><p>#3. Create the following users and groups</p><ul><li>Groups: teachers, students, smr, asir. I believe the groups:</li></ul><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.009.png alt></p><ul><li>User to create: profedesiree, profejose, proferaul, erik, manu, olive, sandra, fabio and domi</li></ul><p>I believe the users:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.010.png alt></p><p>I created them with home directory and assigned them the 1234 password:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.011.png alt></p><ul><li>Teachers: profedesiree, profejose and proferaul. We add them:</li></ul><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.012.png alt></p><p>We can check that they have been added with the following command:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.013.png alt></p><ul><li>Students: erik, manu, olive, sandra, fabio and domi.</li></ul><p>We add them:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.014.png alt></p><p>We check that they have been added:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.015.jpeg alt></p><ul><li>Users of the group smr: profedesiree, profejose, proferaul, erik, manu and olive.</li></ul><p>We add them:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.016.png alt></p><p>We check that they have been added:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.017.png alt></p><ul><li>Users of the asir group: sandra, fabio and domi.</li></ul><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.018.png alt></p><p>We check that they have been added:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.019.png alt></p><h2 id=4-all-users-will-be-samba-users-for-this-we-must-have-installed-samba>4. All users will be Samba users. For this we must have installed samba:</h2><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.020.png alt></p><p>To add a samba user we must enter the following command and assign a password:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.021.png alt></p><p>We will do this with the 9 users, once added we can use this command to list the samba users we have:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.022.png alt></p><h3 id=samba-domain-controller>Samba domain controller</h3><h2 id=5-create-and-configure-a-samba-domain-controller-on-the-server>5. Create and configure a Samba domain controller on the Server.</h2><p>Before starting the installation we must take into account a number of data:</p><ul><li>Active Directory * domain controller name: FJCD</li></ul><ul><li>Name of the domain of * Active Directory *: javiercrucies.local</li><li>Name of the Kerberos Kingdom: javiercrucies.local</li><li>NetBIOS name of the domain: javiercrosses</li><li>Fixed IP address of the server: 192.168.0.1</li><li>Server role: Domain Controller (DC)</li><li>DNS Reporter: 192.168.0.1</li></ul><p>Once with these clear data we will start with the installation, the first thing is to update the system:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.023.png alt></p><p>Next we will need to change the name of our server to be in line with the data we have selected before, for this I have selected my initials, for this we edit the file * / etc / hostname *:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.024.png alt></p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.025.png alt></p><p>Now we need to reboot the equipment to apply the changes, we will lose the connection by ssh:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.026.png alt></p><p>Let&rsquo;s take the ssh remote control back in a few minutes when you have restarted:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.027.png alt></p><p>As you can see we have connected using the old name that our server had, this is because the / etc / hosts file, contains an IP address ratio with its corresponding logical names. This file contained a reference to the old name of the server itself, which we will change to refer to the new name:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.028.png alt></p><p>Once we have applied these two changes, before we continue we would only have to make sure that our server has the network properly configured. In our stage we have two network cards on our server:</p><ul><li>enp0s3 (External card, gives us internet access)</li><li>enp0s8 (Internal card, is the one that communicates with our local network)</li></ul><p>Because of this the first is configured by DHCP, as we do not care about the configuration that is assigned to it, however, the second is configured statically, as we must control the configuration of it so that we have control over it and then join the equipment to the domain.</p><p>Once this is clarified, at the beginning of the document I indicate how the interfaces are configured, here I leave a screen to remember the addresses:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.029.jpeg alt></p><p>We will now need to have some packages that must be installed before starting, these are:</p><ul><li>samba: file server, printing and authentication for SMB / CIFS. smbclient: command line customers for SMB / CIFS.</li><li>krb5-config: Configuration files for Kerberos Version 5.</li><li>winbind: Service to solve information about users and groups of Windows NT servers.</li></ul><p>We can install these four packages with a simple command:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.030.png alt></p><p>Kerberos, will ask us about the kingdom (domain name) during the installation of the packages, in our case it will be javiercrucies.local:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.031.jpeg alt></p><p>Here we will enter the name of our server team:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.032.png alt></p><p>Here we will re-enter the name of our server:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.033.png alt></p><p>After this, the installation will continue a little further, but without need for more information:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.034.jpeg alt></p><p>We will now configure samba, but before we do so we will change the name to the * smb.conf * configuration file so that you do not use it while we configure it and so we will also have a copy of the original file:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.035.png alt></p><p>We will use the samba-tool domain provision command, so that it is the command itself that requests the values you need and, where possible, suggests its default values. So, if these match those we expect, it will be very likely that the previous steps have been the right ones:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.036.png alt></p><p>As you can see, it is very intuitive to do so, since except for the forwarder IP and the administrator password we have chosen the answers that the same command offers us. This must meet minimum complexity requirements:</p><ul><li>at least 8 characters</li><li>1 capital</li><li>1 number or symbol</li></ul><p>This, in addition to setting up Samba, has generated a configuration file for Kerberos on the route / var / lib / samba / private / krb5.conf. So we&rsquo;ll copy it to / etc:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.037.png alt></p><p>The following will be to configure the resolution of names, for this we will start by stopping the services involved:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.038.png alt></p><p>We will also remove them from starting automatically when restart the equipment:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.039.jpeg alt></p><p>We will then make sure that the samba- and ad- dc service can be started without difficulty, avoiding any masking that may exist:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.040.png alt></p><p>Then we delete the resolv.conf file which, in fact, will be a link to stub-resolv.conf. So we eliminate it and create a new one to remove it:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.041.png alt></p><p>We now introduce the right values according to our domain, for my case:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.042.png alt></p><p>We save the changes and get out of the file.</p><p>We will start the samba-ad@-@ dc service and enable it to start when restart the equipment:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.043.png alt></p><h2 id=check-the-installation>Check the installation</h2><p>If we have managed to get here, we have all the ballots so that our installation has been correct. But it&rsquo;s never too much to do a few checks.</p><h2 id=consult-the-domain-level-and-create-a-new-user>Consult the domain level and create a new user</h2><p>To know our domain level we simply enter this command:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.044.png alt></p><p>In doing so, we check that the level of the domain, and of the forest where it is located, is equivalent to a Windows Server 2008 R2 installation</p><p>We will try to create a new user account in the domain with the command (we will need to take into account password policy):</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.045.png alt></p><h2 id=confirm-that-the-dns-server-works-properly>Confirm that the DNS server works properly</h2><p>The first thing is to check the LDAP service on the TCP protocol, for which we will write the following order:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.046.png alt></p><p>If we have an answer similar to that, it all works as it should.</p><p>We will then check the SRV record for the Kerberos protocol on UDP, for which we use the following order:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.047.png alt></p><p>The answer must be similar to the previous one, if so SRV record is correct.</p><p>Finally, we check the resolution of the name of our server:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.048.jpeg alt></p><h2 id=check-the-operation-of-kerberos>Check the operation of Kerberos</h2><p>To check the operation we can, for example, use the smbclient command to check the services that a particular user can get. For this we will use the following command:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.049.png alt></p><p>If authentication is correct, we&rsquo;ll know Kerberos is doing his job. If we want, we can even log into the server using the administrator account. To achieve this, we will use a syntax like this:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.050.png alt></p><p>We&rsquo;ve already checked everything so we can start joining customers to our domain.</p><h3 id=join-the-domain>Join the domain</h3><p>#6. It integrates at least one Windows client into the Samba domain.</p><p>Windows client</p><p>The first thing we will do is set up our client&rsquo;s network:</p><ul><li>IP: 192.168.0.10</li><li>Subnet mass: / 24</li><li>Liaison door 192.168.0.1</li><li>DNS 192.168.0.1</li></ul><p>Both cards (Internal server and Windows client) must be in internal network for communication.</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.051.png alt></p><p>Once the card is configured, we will do a ping to the server to check the connectivity:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.052.png alt></p><p>Now we access control panel ‚Üí system and security ‚Üí system ‚Üí advanced system configuration ‚Üí team name ‚Üí network id. We select the first option to join the domain</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.053.png alt></p><p>We will select the first option, as our network has a domain:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.054.png alt></p><p>We will now need to enter the data of the administrator user and the name of our domain:</p><p>The administrator user that is created by default in samba is called the administrator</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.055.png alt></p><p>Once you enter the data you will ask us if we want to create a domain account on this computer, I will select that no:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.056.png alt></p><p>And for the changes to be applied, we must restart:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.057.png alt></p><p>Once restart we can log in with the different users of our domain:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.058.jpeg alt></p><p>We can see that we can log into the team with the accounts of our domain:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.059.jpeg alt></p><p>Linux client</p><p>The first thing is to set up the network, for which I have assigned the IP address 192.168.0.2</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.060.jpeg alt></p><p>We will now have to add to our server in the host file, a line in which the IP address of our server will go followed by the name of this server and the full domain name of our server:</p><p>To check this change we have made we will do a ping to the server using its name:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.061.jpeg alt></p><p>We will now update the equipment to download the latest versions from the repositories:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.062.jpeg alt></p><p>To have the Internet on the client I have previously configured NAT on the server.</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.063.png alt></p><p>Once the system is updated we will install the following packages:</p><ul><li>sssd (System Security Services Daemon): Manages authentication mechanisms and access to remote directories. It replaces the classic Winbind with more speed and stability.</li><li>heimdal-clients: This is a free implementation of Kerberos 5 created with the intention of being compatible with the Kerberos protocol implemented by the MIT.</li><li>msktutil: The utility of Kerberos&rsquo; keytabs in a Microsoft Active Directory environment.</li></ul><p>We can do it with 1 command:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.064.png alt></p><p>As we install you will request the name of our active directory server so we enter it:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.065.png alt></p><p>Now you will ask us the name of the computer that acts as a server in our case is:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.066.png alt></p><p>Finally, he will ask us about the administrative server that in our case is the same:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.067.png alt></p><p>Once this is done, the installation will continue without having to enter more data.</p><p>Now let&rsquo;s add additional data to Kerberos to make sure it behaves properly. We will start by changing the name of the configuration file, so that we can return to the original parameters if necessary:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.068.png alt></p><p>We will now use nano to edit the file settings, it will be empty so we will add the following:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.069.jpeg alt></p><p>Once filled in with our domain data, we save the files and check if we can log into the domain:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.070.png alt></p><p>If the output does not offer us any error, it is because the authentication process has worked properly.</p><p>We will proceed to join the domain, for this we will use the following command:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.071.png alt></p><p>This command will have to be completed according to the data of our domain, in case we do not get any output, we will have joined the domain.</p><p>To complete the task, we will remove the kerberos authorization tickets that we activate when running kinit. To achieve this, just use the kdestroy command.</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.072.png alt></p><h2 id=share-folders>Share folders</h2><p>#7. Personal folders are needed on the server for each user. There will also be a folder for each group, to which only the members of each group can access and write.</p><p>We will create the directories in the root partition for each user and one for each group. These will be created by the name of the group or user:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.073.png alt></p><p>We have to bear in mind that the samba users we have generated at the beginning of the document have been removed when installing the domain and we will have to produce them again.</p><p>We will share these folders through samba, for this we edit the / etc / samba / smb.conf file:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.074.jpeg alt></p><p>To indicate that you can access a group we will have to put an @ in front of the group name:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.075.jpeg alt></p><p>We would only be able to correctly assign the appropriate local permissions for our resources and change the folder owners so that users can write on them:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.076.png alt></p><p>This would be the right thing to do, but if we assign you the 775 permissions we can&rsquo;t write in the folder, so we&rsquo;ll assign you all the permissions:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.077.png alt></p><p>Now we&rsquo;ll repeat this with all the directories, first I&rsquo;ll give you the permissions:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.078.png alt></p><p>And finally we will change the folder owners and make each user or group their respective owners:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.079.png alt></p><p>Let&rsquo;s make sure we have applied these changes correctly:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.080.png alt></p><p>We will check that we can access the shared resources from the olive user, we will access the Oliver folder and create a directory within:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.082.png alt></p><h2 id=8-from-windows-access-these-folders-through-network-drives>8. From Windows access these folders through network drives.</h2><p>From the file browser we can see all the shared resources on the network. Now we will create network units, so for example we will add the Oliver folder to the Oliver user as a network drive, for this, we right click on the folder > connect to network drive:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.083.png alt></p><p>And we will select a letter to assign to the network unit:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.084.jpeg alt></p><p>Now this unit will appear on this team:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.085.jpeg alt></p><h3 id=mobile-profiles>Mobile profiles</h3><h2 id=9-define-mobile-profiles-on-the-linux-server-using-samba-so-that-users-can-authenticate-on-different-windows-machines-maintaining-their-configuration-to-do-this-we-will-install-rsat-remote-server-administration-tools-that-will-allow-us-to-manage-our-samba-domain-controller-identical-to-windows-server>9. Define mobile profiles on the Linux server using Samba, so that users can authenticate on different Windows machines, maintaining their configuration. To do this we will install RSAT (Remote Server Administration Tools) that will allow us to manage our samba domain controller identical to windows server.</h2><p>To add them we will search the search for Windows * * * Add optional features * * once here we will give you to add feature:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.086.png alt></p><p>Once here we will look for the following features with RSAT and install them:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.087.png alt></p><p>Once installed we will be created an application similar to that of a Windows server called administrative tools:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.088.png alt></p><p>We will be opened a folder with the management tools:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.089.jpeg alt></p><p>And we will search for user management and active directory equipment or write in running dsa.msc, this we will do with the user managing our domain to be able to access this:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.090.png alt></p><p>Before creating our mobile user we will create a network resource as we have previously done called profiles and we will give the mobile group permission to write on them:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.091.png alt></p><p>For our user to write in this directory we will add it to the group:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.092.png alt></p><p>Now we go to the configuration of our user and we change the profile path. We will put the path of our shared folder profiles followed by * *% username% * *:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.093.png alt></p><p>We kept and we would have made our mobile profile created.</p><p>We will demonstrate the operation of the mobile profile, for which I have changed the background and created two folders:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.094.jpeg alt></p><p>Now let&rsquo;s log in and start it on the Windows on the right:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.095.jpeg alt></p><p>We see that the mobile profile has been properly performed.</p><h2 id=nfs>NFS</h2><h2 id=10-through-nfs-folders-projects-documentation-programs-_-and-_-drivers-will-be-shared-on-the-server-the-first-can-only-be-read-the-last-two-can-also-be-written-linux-equipment-will-automatically-mount-the-folders-in-the-boot>10. Through NFS, folders: projects, documentation, programs _ and _ drivers will be shared on the server. The first can only be read; the last two can also be written. Linux equipment will automatically mount the folders in the boot.</h2><p>The first thing we will do is install the following packages:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.096.png alt></p><p>Now we&rsquo;ll create in the root the directories we&rsquo;re going to share:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.097.png alt></p><p>And we&rsquo;ll change the owner and the permissions to these directories:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.098.png alt></p><p>After this, we must edit the / etc / exports file. This is the file where the folders we are going to share are indicated to NFS. The first one will be read only and the last two can be written:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.099.png alt></p><p>To access these resources on the server we will install the following packages:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.100.png alt></p><p>Now we will create the directories where we will mount our folders:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.101.png alt></p><p>To manually mount them in Linux we will do the following command:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.102.png alt></p><p>Let&rsquo;s check that in projects we can&rsquo;t write:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.103.png alt></p><p>While in the other two we can write:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.104.png alt></p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.105.png alt></p><p>If we want to access these resources in Windows &ndash; >\ 192.168.0.1\ documentation</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.106.png alt></p><p>\ 192.168.0.1\ projects (reading only directory)</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.107.png alt></p><p>\ 192.168.0.1\ programs\ _ and\ _ drivers</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.108.png alt></p><p>To view them you need to have the following features installed in Windows (We can access this program through the Windows search engine by writing Windows features)</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.109.png alt></p><p>To end with this point we will set that Linux equipment automatically mount when you start the directories. We will edit the / etc / fstab file by adding the following lines:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.110.png alt></p><p>Once this is done we will reboot and we will see that we will have been automatically mounted:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.111.png alt></p><p>Quotas</p><p>#11. The server / home folder will have a quota system to avoid saturation with user files (100 MB per user).</p><p>The first thing we will do is install the packages to implement quotas:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.112.png alt></p><p>We will now allow the shares in the partition / home by adding this to the fstab of our server:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.113.png alt></p><p>We take the home partition to apply these changes:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.114.png alt></p><p>And we apply quotas on the partition / home</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.115.png alt></p><p>We will check that at the root of the partition we have been created two files (afuca.group and afuca.user):</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.116.png alt></p><p>We will now apply the 100Mb quota to olive using edcupa:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.117.png alt></p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.118.png alt></p><p>We will now use a tool which is * gawk, * which will allow us to focus on this command, apply the quota we have just created for Oliver to all our users:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.119.png alt></p><p>The order we just launched has drawn a list of all users and has applied Oliver&rsquo;s quota to all users with an ID greater than 499.</p><p>We will now review the quotas to see how they are:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.120.jpeg alt></p><p>To check that it works we will exhaust the proferaul user&rsquo;s share, for this we will create a 30 MB file:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.121.png alt></p><p>Now we&rsquo;ll move him to the home directory of him and make him the owner of the file:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.122.png alt></p><p>We see that the space used in the user directory is updated:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.123.png alt></p><h2 id=webmin>Webmin</h2><p>#12. Install Webmin on the server to have the possibility to manage it graphically from a client. Show some of your functionalities.</p><p>Webmin is a modern web control panel that allows you to manage your Linux server through a browser-based interface.</p><p>We will need to install apache to be able to install webmin on our server:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.124.png alt></p><p>We will now have to add the webmin repository, so we will edit the sources.list and add it:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.125.png alt></p><p>We save the file and make an apt update to update the repositories, we will be wrong warning us that the repository is not reliable.</p><p>So now we will download the PGP key from Webmin and add it to our system:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.127.png alt></p><p>We go back to making an apt update and see that now the repository is reliable</p><p>Below we will download the webmin package:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.129.png alt></p><p>The latest lines of the installation will give us the data to access this service web:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.130.png alt></p><p>So in a client we go to the browser and access this url:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.131.jpeg alt></p><p>It will tell us that the connection is not private, to skip this warning Advanced configuration > access</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.132.png alt></p><p>We will have a portal where we will need to enter with an administrator user of our server:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.133.png alt></p><p>The first thing we will see on the web interface will be a resource monitor, as well as data from our team:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.134.jpeg alt></p><p>We will see a resource monitor history, which will show us the hours and percentage of use of our hardware, as well as system information:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.135.jpeg alt></p><p>We have more sections such as recent login or network interfaces, which will give us information about who has connected and their settings respectively:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.136.jpeg alt></p><p>To end with the panel we will have a last window which will tell us the use of the disk and partitions:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.137.png alt></p><p>Once we have taken a look at the main page we are going to take advantage of a functionality that has to allow us to view the directories shared by nfs, to access here we are going to networking > NFS exports:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.138.jpeg alt></p><p>Come on, it also allows us to edit the current shared directories as well as add or delete these.</p><p>In addition, this tool allows us to set up a Firewall with iptables, which is now of vital importance to have security on our network:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.139.jpeg alt></p><p>It even has a web terminal so that we can manage the server from a client, to access it we deploy the menu and click on the terminal symbol or we press Alt + K:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.140.png alt></p><p>We see you using ssh with the user connected in the application, in my case javiercrosses:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.141.png alt></p><p>Webmin includes many more management functions that help us work with the server in a graphic way to make it more friendly to manage it, from updating packages to setting up a Firewall. In addition, it uses https, so our traffic would travel encrypted, which would allow us to configure nat to be able to access from a device that is outside our network, without a snifer being able to decipher our traffic easily. It is advisable that we change the self-signed certificate that uses webmin to one of our own that we can generate with Let&rsquo;s encrypt, for example.</p><h2 id=cups>CUPS</h2><p>#13. There will be a CUPS printing server, which will be administered from a Ubuntu client. The first thing we need to do is install on the cup server:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.142.png alt></p><p>Once this is done we will configure the service to allow to be managed from our Ubuntu client, for this we edit the following file:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.143.png alt></p><p>We will now add the following parameters:</p><ul><li>Listen 192.168.0.1: 631</li><li>allow 192.168.0.0 / 24</li></ul><p>To allow our client Ubuntu to be able to manage the service</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.144.png alt></p><p>Now we&rsquo;d only have to restart the service:</p><p>We will move to the client and in the browser we will enter the ip of our server followed by two points and 631:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.146.jpeg alt></p><p>With this we have checked that the client can manage coups.</p><p>#14. Set up a network printer for all users, with daily page limits for all users.</p><p>To share our network printer, we access the web panel and in the management section we mark sharing printers connected to this system:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.147.jpeg alt></p><p>Before setting the limits we will enable the service to register the name of the users when sending files, for that in the cups.conf file we change this default value to none:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.148.png alt></p><p>We will now restart the service:</p><p>To set a daily limit for each 20-page user for example, we would apply the following command for our printer.</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.149.png alt></p><p>Once this command has been applied, users will only be able to print the indicated number of pages, when they exceed the limit the works will be sent to cups, but it will remove them from the tail and will not print them:</p><p><img src=/sistemas/ad_ubuntu/img/Aspose.Words.2fdbf265-b3ba-4503-a174-3e0534a81c76.150.jpeg alt></p><p>In other words, work 21 in this example will not be created until 24 hours.</p><h2 id=bibliography>Bibliography</h2><ul><li>[How to know what desktop I have] (https: / / <a href=https://www.sysadmit.com target=_blank rel=noopener>www.sysadmit.com</a> / 2020 / 06 / linux-as-know-that-scriptorio@-@ tengo.html)</li><li>[Mounting samba domain controller] (http: / / somebooks.es / create -a-controller-de-domino-de-active-directory-con-samba-en-ubuntu-18-04-lts /)</li><li>[Configure the network with netplan] (http: / / somebooks.es / establish -a -direction-ip-estatica-ubuntu-server-17-10-posterios /)</li><li>[Unite client linux to domain part 1] (http: / / somebooks.es / unir-a-cliente-ubuntu-20-04-a-a-domine-of-active-directory-over-windows-server-2019-part-1 /)</li><li>[Unite client linux to domain part 2] (http: / / somebooks.es / unir-a-cliente-ubuntu-20-04-a-a-domine-of-active-directory-over-windows-server-2019-part-2 /)</li><li>[Manage domain with RSAT] (http: / / somebooks.es / 12-7-administrar-el-control-de-domino-resara-con-rsat /)</li><li>[Access shared folders w10] (http: / / somebooks.es / nfs-parte-6-acceder-a-la-carpeta-comparta-de-a-cliente-windows-10 /)</li><li>[Contributions] (https: / / <a href=https://www.linuxtotal.com.mx target=_blank rel=noopener>www.linuxtotal.com.mx</a> / index.php? cont = info _ admon _ 018)</li><li>[Installation and use of webmin] (https: / / <a href=https://www.digitalocean.com target=_blank rel=noopener>www.digitalocean.com</a> / community / tutorials / how-to-install-webmin-on-ubuntu-20-04-es)</li><li>[CUPS Commands] (https: / / docs.oracle.com / cd / E26921 _ 01 / html / E25809 / gllgm.html)</li></ul></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fsistemas%2fad_ubuntu%2fad_ubuntu%2f" target=_blank><i class="fab fa-facebook"></i>
</a><a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fsistemas%2fad_ubuntu%2fad_ubuntu%2f&text=Active%20Directory%20in%20Ubuntu&via=Atlas" target=_blank><i class="fab fa-twitter"></i>
</a><a class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fsistemas%2fad_ubuntu%2fad_ubuntu%2f&title=Active%20Directory%20in%20Ubuntu" target=_blank><i class="fab fa-reddit"></i>
</a><a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fsistemas%2fad_ubuntu%2fad_ubuntu%2f&title=Active%20Directory%20in%20Ubuntu" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=Active%20Directory%20in%20Ubuntu https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fsistemas%2fad_ubuntu%2fad_ubuntu%2f" target=_blank><i class="fab fa-whatsapp"></i>
</a><a class="btn icon-button" href="mailto:?subject=Active%20Directory%20in%20Ubuntu&body=https%3a%2f%2fwww.javiercd.es%2fen%2fposts%2fsistemas%2fad_ubuntu%2fad_ubuntu%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/javierasping/sentinel/edit/main/content/posts/sistemas/ad_ubuntu/ad_ubuntu.en.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"></div><hr></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#preparation-of-the-environment>Preparation of the environment</a></li></ul></li><li><a href=#1-the-linux-server-will-not-have-a-graphic-environment-you-will-have-at-least-the-partitions-root-home-and-exchange>1. The Linux server will not have a graphic environment. You will have at least the partitions: root, home and exchange.</a></li><li><a href=#4-all-users-will-be-samba-users-for-this-we-must-have-installed-samba>4. All users will be Samba users. For this we must have installed samba:</a><ul><li><a href=#samba-domain-controller>Samba domain controller</a></li></ul></li><li><a href=#5-create-and-configure-a-samba-domain-controller-on-the-server>5. Create and configure a Samba domain controller on the Server.</a></li><li><a href=#check-the-installation>Check the installation</a></li><li><a href=#consult-the-domain-level-and-create-a-new-user>Consult the domain level and create a new user</a></li><li><a href=#confirm-that-the-dns-server-works-properly>Confirm that the DNS server works properly</a></li><li><a href=#check-the-operation-of-kerberos>Check the operation of Kerberos</a><ul><li><a href=#join-the-domain>Join the domain</a></li></ul></li><li><a href=#share-folders>Share folders</a></li><li><a href=#8-from-windows-access-these-folders-through-network-drives>8. From Windows access these folders through network drives.</a><ul><li><a href=#mobile-profiles>Mobile profiles</a></li></ul></li><li><a href=#9-define-mobile-profiles-on-the-linux-server-using-samba-so-that-users-can-authenticate-on-different-windows-machines-maintaining-their-configuration-to-do-this-we-will-install-rsat-remote-server-administration-tools-that-will-allow-us-to-manage-our-samba-domain-controller-identical-to-windows-server>9. Define mobile profiles on the Linux server using Samba, so that users can authenticate on different Windows machines, maintaining their configuration. To do this we will install RSAT (Remote Server Administration Tools) that will allow us to manage our samba domain controller identical to windows server.</a></li><li><a href=#nfs>NFS</a></li><li><a href=#10-through-nfs-folders-projects-documentation-programs-_-and-_-drivers-will-be-shared-on-the-server-the-first-can-only-be-read-the-last-two-can-also-be-written-linux-equipment-will-automatically-mount-the-folders-in-the-boot>10. Through NFS, folders: projects, documentation, programs _ and _ drivers will be shared on the server. The first can only be read; the last two can also be written. Linux equipment will automatically mount the folders in the boot.</a></li><li><a href=#webmin>Webmin</a></li><li><a href=#cups>CUPS</a></li><li><a href=#bibliography>Bibliography</a></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#about>About Me</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=https://www.javiercd.es/en/#accomplishments>Certifications</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:contacto@javiercd.es target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>contacto@javiercd.es</span></a></li><li><a href=https://github.com/javierasping target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>javierasping</span></a></li><li><a href=https://www.linkedin.com/in/javiercd target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Francisco Javier Cruces Doval</span></a></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>Liability Notice:</strong> This theme is under MIT license. So, you can use it for non-commercial, commercial, or private uses. You can modify or distribute the theme without requiring any permission from the theme author. However, the theme author does not provide any warranty or takes any liability for any issue with the theme.</p></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu_b3360284c55cf72d.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">¬© 2023 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.29119cfdb8d2f06f4caaea7b9908096b5c109c5174eab5fca7e4e0efb0ffcaa0.js integrity="sha256-KRGc/bjS8G9Mqup7mQgJa1wQnFF06rX8p+Tg77D/yqA=" defer></script></body></html>